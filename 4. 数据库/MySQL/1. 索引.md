# 一、索引基础

## 1.1 索引的定义

数据库中，索引的就是帮助<strong><font color = blue>存储引擎快速获取数据的一种数据结构</font></strong>.

<strong><font color = blue>索引的作用就相当于书的目录</font></strong>。

打个比方: 我们在查字典的时候，如果没有目录，那我们就只能一页一页的去找我们需要查的那个字，速度很慢。如果有目录了，我们只需要先去目录里查找字的位置，然后直接翻到那一页就行了。


**存储引擎**，说白了就是如何存储数据、如何为存储的数据建立索引和如何更新、查询数据等技术的**实现方法**。

MySQL 存储引擎有<strong><font color = blue> MyISAM 、InnoDB、Memory，</font></strong>其中 InnoDB 是在 MySQL 5.5 之后成为默认的存储引擎。

下图是 MySQL 的结构图，索引和数据就是位于存储引擎中：

![](https://myblog-tuchuang.oss-cn-shanghai.aliyuncs.com/1623727651911_20170928110355446.png)
---

## 1.2 索引的优缺点

> **索引的优点**

- 索引大大减少了服务器需要扫描的数据量，提升数据的检索速度；
- 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。

> **索引的缺点**

- 创建索引和维护索引需要耗费许多时间。当对表中的数据进行增删改的时候，如果数据有索引，那么索引也需要动态的修改，会降低 SQL 执行效率。
- 索引需要使用物理文件存储，也会耗费一定空间。
  
---

## 1.3 索引底层的数据结构

### Hash表

哈希表是键值对的集合，通过**键(key)即可快速取出对应的值(value)**，因此哈希表可以快速检索数据（接近 O（1））。

> **Hash算法**

为何能够通过 key 快速取出 value呢？ 原因在于 哈希算法（也叫散列算法）。通过哈希算法，我们可以快速找到 key 对应的 index，找到了 index 也就找到了对应的 value。

```bash
hash = hashfunc(key)
index = hash % array_size
```

![](https://img-blog.csdnimg.cn/20210513092328171.png)

> **Hash冲突**

哈希算法有个 **Hash 冲突** 问题，也就是说多个不同的 key 最后得到的 index 相同。

通常情况下，我们常用的解决办法是 **链地址法**。**链地址法就是将哈希冲突数据存放在链表中**。就比如 JDK1.8 之前 HashMap 就是通过链地址法来解决哈希冲突的。不过，JDK1.8 以后HashMap为了减少链表过长的时候搜索时间过长引入了红黑树。

![](https://img-blog.csdnimg.cn/20210513092224836.png)


为了减少 Hash 冲突的发生，一个好的哈希函数应该“均匀地”将数据分布在整个可能的哈希值集合中。

> ****

## 1.4 索引的分类

从如下四个角度对索引进行分类：

- 按「数据结构」分类: <strong> B+ 树索引、Hash索引、Fulle-text索引</strong>
- 按「物理存储」分类: <strong> 主键索引(聚簇索引)、二级索引(辅助索引)</strong>
- 按「字段特性」分类: **主键索引、唯一索引、普通索引、前缀索引**
- 按「字段个数」分类: **单列索引、联合索引**

### 按数据结构分类

MySQL不同存储引擎支持的索引类型不同，如下表为MySQL常见的存储引擎 InooDB、MyISAM和Memory分别支持的索引类型:

![](https://cdn.xiaolincoding.com/gh/xiaolincoder/mysql/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB.drawio.png)




---

---
# 二、