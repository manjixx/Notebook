# ä¸€ã€åŸºç¡€æ¦‚å¿µä¸å¸¸è¯†

## Javaè¯­è¨€çš„ç‰¹ç‚¹

- ç®€å•æ˜“å­¦
- é¢å‘å¯¹è±¡(å°è£…ã€ç»§æ‰¿ã€å¤šæ€)
- å¹³å°æ— å…³æ€§(ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œ)
- æ”¯æŒå¤šçº¿ç¨‹(ä¼ ç»ŸC++åªèƒ½é€šè¿‡è°ƒç”¨ç³»ç»Ÿå¤šçº¿ç¨‹åŠŸèƒ½è¿›è¡Œå¤šçº¿ç¨‹è®¾è®¡ï¼Œåœ¨C++11ä¸­å¼•å…¥äº†å¤šçº¿ç¨‹åº“ã€‚è€ŒJavaæä¾›äº†å¤šçº¿ç¨‹æ”¯æŒ)
- æ”¯æŒç½‘ç»œç¼–ç¨‹( Java è¯­è¨€è¯ç”Ÿæœ¬èº«å°±æ˜¯ä¸ºç®€åŒ–ç½‘ç»œç¼–ç¨‹è®¾è®¡çš„ï¼Œå› æ­¤ Java è¯­è¨€ä¸ä»…æ”¯æŒç½‘ç»œç¼–ç¨‹è€Œä¸”å¾ˆæ–¹ä¾¿)
- ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜
- ç®€å•æ˜“å­¦ã€å¯é æ€§ä¸å®‰å…¨æ€§
  
---

## JVM vs JDK vs JRE

![](https://img-bc.icode.best/a26d7b5caed4452bacec10928a8c76cf.png)

> JVM
Javaè™šæ‹Ÿæœºæ˜¯è¿è¡ŒJavaå­—èŠ‚ç çš„è™šæ‹Ÿæœºã€‚JVMæœ‰é’ˆå¯¹ä¸åŒæ“ä½œç³»ç»Ÿçš„ç‰¹å®šå®ç°ï¼Œç›®çš„æ˜¯ç›¸åŒè¿‡çš„å­—èŠ‚ç åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸­æœ€ç»ˆç»“æœç›¸åŒã€‚

å­—èŠ‚ç å’ŒJVMæ˜¯å®ç°Javaè¯­è¨€"ä¸€æ¬¡ç¼–è¯‘ã€åˆ°å¤„è¿è¡Œ"çš„å…³é”®

**JVMå¹¶ä¸æ˜¯åªæœ‰ä¸€ç§ï¼åªè¦æ»¡è¶³JVMè§„èŒƒï¼Œæ¯ä¸ªå…¬å¸ã€ç»„ç»‡æˆ–ä¸ªäººéƒ½å¯ä»¥å®ç°è‡ªå·±ä¸“å±çš„JVM**ï¼Œæˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„HotSpot VMä»…æ˜¯JVMè§„èŒƒçš„ä¸€ç§å®ç°ã€‚

é™¤äº†æˆ‘ä»¬å¹³æ—¶æœ€å¸¸ç”¨çš„ HotSpot VM å¤–ï¼Œè¿˜æœ‰ J9 VMã€Zing VMã€JRockit VM ç­‰ JVM ã€‚ç»´åŸºç™¾ç§‘ä¸Šå°±æœ‰å¸¸è§ JVM çš„å¯¹æ¯”ï¼š[Comparison of Java virtual machines](https://en.wikipedia.org/wiki/Comparison_of_Java_virtual_machines)ã€‚å¹¶ä¸”ï¼Œä½ å¯ä»¥åœ¨ [Java SE Specifications](https://docs.oracle.com/javase/specs/index.html)ä¸Šæ‰¾åˆ°å„ä¸ªç‰ˆæœ¬çš„ JDK å¯¹åº”çš„ JVM è§„èŒƒã€‚

> JRE (Java Runtime Environment)

åŒ…æ‹¬**Javaè™šæ‹Ÿæœºå’ŒJavaç¨‹åºæ‰€éœ€çš„æ ¸å¿ƒç±»åº“**ï¼Œå¦‚æœæƒ³è¦è¿è¡Œä¸€ä¸ªå¼€å‘å¥½çš„Javaç¨‹åºï¼Œè®¡ç®—æœºä¸­åªéœ€å®‰è£…JREå³å¯ï¼

åœ¨JDKçš„å®‰è£…ç›®å½•é‡Œä½ å¯ä»¥æ‰¾åˆ°jreç›®å½•ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹binå’Œlibï¼š

- åœ¨è¿™é‡Œå¯ä»¥è®¤ä¸ºbinçš„å°±æ˜¯jvm

- libä¸­åˆ™æ˜¯jvmå·¥ä½œæ‰€éœ€è¦çš„ç±»åº“ 

> JDK (Java Development Kit)

JDK(Java Development Kit)æ˜¯é’ˆå¯¹Javaå¼€å‘å‘˜çš„äº§å“ï¼Œæ˜¯æ•´ä¸ªJavaçš„æ ¸å¿ƒï¼ŒåŒ…æ‹¬äº†**Javaè¿è¡Œç¯å¢ƒJRE**ã€**Javaå·¥å…·**å’Œ**JavaåŸºç¡€ç±»åº“**ã€‚

![](https://img-blog.csdn.net/20180923150707612?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE1MDY0OTUx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

åœ¨JDKå®‰è£…ç›®å½•ä¸‹ä¸€å…±æœ‰6ä¸ªæ–‡ä»¶å¤¹ã€ä¸€äº›æè¿°æ–‡ä»¶ã€ä¸€ä¸ªSrcå‹ç¼©æ–‡ä»¶

- bin: javaå¼€å‘å·¥å…· æœ€ä¸»è¦çš„æ˜¯ç¼–è¯‘å™¨(javac.exe)
- include: javaå’ŒJVMäº¤äº’ç”¨çš„å¤´æ–‡ä»¶
- lib:ç±»åº“
- jre:Javaè¿è¡Œç¯å¢ƒ(æ³¨æ„ï¼šè¿™é‡Œçš„binã€libæ–‡ä»¶å¤¹å’Œjreé‡Œçš„binã€libæ˜¯ä¸åŒçš„)
- demoä¸sampleæ˜¯ä¸€äº›ä¾‹å­

---
  
## ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨ Java ä¸­ï¼ŒJVM å¯ä»¥ç†è§£çš„ä»£ç å°±å«åšå­—èŠ‚ç ï¼ˆå³æ‰©å±•åä¸º .class çš„æ–‡ä»¶ï¼‰ï¼Œå®ƒä¸é¢å‘ä»»ä½•ç‰¹å®šçš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚

Java è¯­è¨€é€šè¿‡å­—èŠ‚ç çš„æ–¹å¼ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†ä¼ ç»Ÿè§£é‡Šå‹è¯­è¨€æ‰§è¡Œæ•ˆç‡ä½çš„é—®é¢˜ï¼ŒåŒæ—¶åˆä¿ç•™äº†è§£é‡Šå‹è¯­è¨€å¯ç§»æ¤çš„ç‰¹ç‚¹ã€‚æ‰€ä»¥ï¼Œ Java ç¨‹åºè¿è¡Œæ—¶ç›¸å¯¹æ¥è¯´è¿˜æ˜¯é«˜æ•ˆçš„ï¼ˆä¸è¿‡ï¼Œå’Œ C++ï¼ŒRustï¼ŒGo ç­‰è¯­è¨€è¿˜æ˜¯æœ‰ä¸€å®šå·®è·çš„ï¼‰

**Java ç¨‹åºä»æºä»£ç åˆ°è¿è¡Œçš„è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š**

![](https://s2.51cto.com/oss/202201/18/914f245258f57173cbd1cf7cb162e1db.png)

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/basis/java-code-to-machine-code.png)

éœ€è¦æ³¨æ„çš„æ˜¯ä»`.class -> æœºå™¨ç `è¿™ä¸€æ­¥ã€‚è¿™é‡Œé¦–å…ˆJVMç±»åŠ è½½å™¨é¦–å…ˆåŠ è½½å­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åé€šè¿‡è§£é‡Šå™¨é€è¡Œè§£é‡Šæ‰§è¡Œï¼Œè¿™ç§æ–¹å¼ç›¸å¯¹è¾ƒæ…¢ã€‚è€Œä¸”æœ‰äº›æ–¹æ³•å’Œä»£ç å—(çƒ­ç‚¹ä»£ç )éœ€è¦ç»å¸¸èƒŒè°ƒç”¨ï¼Œå› æ­¤å¼•å…¥äº†JIT(just-in-time compilation)ç¼–è¯‘å™¨ã€‚**JITå±äºè¿è¡Œæ—¶ç¼–è¯‘** å½“ JIT ç¼–è¯‘å™¨å®Œæˆç¬¬ä¸€æ¬¡ç¼–è¯‘åï¼Œå…¶ä¼šå°†å­—èŠ‚ç å¯¹åº”çš„æœºå™¨ç ä¿å­˜ä¸‹æ¥ï¼Œä¸‹æ¬¡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚

> HotSpot é‡‡ç”¨äº†æƒ°æ€§è¯„ä¼°(Lazy Evaluation)çš„åšæ³•ï¼Œæ ¹æ®äºŒå…«å®šå¾‹ï¼Œæ¶ˆè€—å¤§éƒ¨åˆ†ç³»ç»Ÿèµ„æºçš„åªæœ‰é‚£ä¸€å°éƒ¨åˆ†çš„ä»£ç ï¼ˆçƒ­ç‚¹ä»£ç ï¼‰ï¼Œè€Œè¿™ä¹Ÿå°±æ˜¯ JIT æ‰€éœ€è¦ç¼–è¯‘çš„éƒ¨åˆ†ã€‚JVM ä¼šæ ¹æ®ä»£ç æ¯æ¬¡è¢«æ‰§è¡Œçš„æƒ…å†µæ”¶é›†ä¿¡æ¯å¹¶ç›¸åº”åœ°åšå‡ºä¸€äº›ä¼˜åŒ–ï¼Œå› æ­¤æ‰§è¡Œçš„æ¬¡æ•°è¶Šå¤šï¼Œå®ƒçš„é€Ÿåº¦å°±è¶Šå¿«ã€‚JDK 9 å¼•å…¥äº†ä¸€ç§æ–°çš„ç¼–è¯‘æ¨¡å¼ AOT(Ahead of Time Compilation)ï¼Œå®ƒæ˜¯ç›´æ¥å°†å­—èŠ‚ç ç¼–è¯‘æˆæœºå™¨ç ï¼Œè¿™æ ·å°±é¿å…äº† JIT é¢„çƒ­ç­‰å„æ–¹é¢çš„å¼€é”€ã€‚JDK æ”¯æŒåˆ†å±‚ç¼–è¯‘å’Œ AOT åä½œä½¿ç”¨ã€‚

---

## ä¸ºä»€ä¹ˆä¸å…¨éƒ¨ä½¿ç”¨AOTï¼Ÿ

AOT å¯ä»¥æå‰ç¼–è¯‘èŠ‚çœå¯åŠ¨æ—¶é—´ï¼Œé‚£ä¸ºä»€ä¹ˆä¸å…¨éƒ¨ä½¿ç”¨è¿™ç§ç¼–è¯‘æ–¹å¼å‘¢ï¼Ÿ

ç®€è¦æ¥è¯´è¿™**ä¸Javaè¯­è¨€çš„åŠ¨æ€ç‰¹æ€§æœ‰å…³**ã€‚

CGLIBåŠ¨æ€ä»£ç†ä½¿ç”¨çš„æ˜¯ASMæŠ€æœ¯ï¼Œè€ŒASMæŠ€æœ¯çš„åŸç†æ˜¯ï¼šè¿è¡Œæ—¶ç›´æ¥åœ¨å†…å­˜ä¸­ç”Ÿæˆå¹¶åŠ è½½ä¿®æ”¹åçš„å­—èŠ‚ç æ–‡ä»¶ä¹Ÿå°±æ˜¯ .class æ–‡ä»¶ï¼Œå¦‚æœå…¨éƒ¨ä½¿ç”¨ AOT æå‰ç¼–è¯‘ï¼Œä¹Ÿå°±ä¸èƒ½ä½¿ç”¨ ASM æŠ€æœ¯äº†ã€‚ä¸ºäº†æ”¯æŒç±»ä¼¼çš„åŠ¨æ€ç‰¹æ€§ï¼Œæ‰€ä»¥é€‰æ‹©ä½¿ç”¨ JIT å³æ—¶ç¼–è¯‘å™¨ã€‚

---

## ä¸ºä»€ä¹ˆè¯´Javaè¯­è¨€â€œç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜â€ï¼Ÿ

> é«˜çº§ç¼–ç¨‹è¯­è¨€æŒ‰ç…§ç¨‹åºçš„æ‰§è¡Œæ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼š

- **ç¼–è¯‘å‹ï¼š** ç¼–è¯‘å‹è¯­è¨€ä¼šé€šè¿‡ç¼–è¯‘å™¨å°†æºä»£ç ä¸€æ¬¡æ€§ç¿»è¯‘æˆå¯è¢«è¯¥å¹³å°æ‰§è¡Œçš„æœºå™¨ç ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¼–è¯‘è¯­è¨€çš„æ‰§è¡Œé€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œå¼€å‘æ•ˆç‡æ¯”è¾ƒä½ã€‚å¸¸è§çš„ç¼–è¯‘æ€§è¯­è¨€æœ‰ Cã€C++ã€Goã€Rust ç­‰ç­‰ã€‚
- **è§£é‡Šå‹ï¼š** è§£é‡Šå‹è¯­è¨€ä¼šé€šè¿‡è§£é‡Šå™¨ä¸€å¥ä¸€å¥çš„å°†ä»£ç è§£é‡Šï¼ˆinterpretï¼‰ä¸ºæœºå™¨ä»£ç åå†æ‰§è¡Œã€‚è§£é‡Šå‹è¯­è¨€å¼€å‘æ•ˆç‡æ¯”è¾ƒå¿«ï¼Œæ‰§è¡Œé€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚å¸¸è§çš„è§£é‡Šæ€§è¯­è¨€æœ‰ Pythonã€JavaScriptã€PHP ç­‰ç­‰


![](https://img-blog.csdnimg.cn/fdab4cefd9f24e0b97315ddb36766e1f.png)

>ä¸ºäº†æ”¹å–„ç¼–è¯‘è¯­è¨€çš„æ•ˆç‡è€Œå‘å±•å‡ºçš„å³æ—¶ç¼–è¯‘æŠ€æœ¯ï¼Œå·²ç»ç¼©å°äº†è¿™ä¸¤ç§è¯­è¨€é—´çš„å·®è·ã€‚è¿™ç§æŠ€æœ¯æ··åˆäº†ç¼–è¯‘è¯­è¨€ä¸è§£é‡Šå‹è¯­è¨€çš„ä¼˜ç‚¹ï¼Œå®ƒåƒç¼–è¯‘è¯­è¨€ä¸€æ ·ï¼Œå…ˆæŠŠç¨‹åºæºä»£ç ç¼–è¯‘æˆå­—èŠ‚ç ã€‚åˆ°æ‰§è¡ŒæœŸæ—¶ï¼Œå†å°†å­—èŠ‚ç ç›´è¯‘ï¼Œä¹‹åæ‰§è¡Œã€‚Javaä¸LLVMæ˜¯è¿™ç§æŠ€æœ¯çš„ä»£è¡¨äº§ç‰©ã€‚

ç›¸å…³é˜…è¯»ï¼š[åŸºæœ¬åŠŸ | Javaå³æ—¶ç¼–è¯‘å™¨åŸç†è§£æåŠå®è·µ](https://tech.meituan.com/2020/10/22/java-jit-practice-in-meituan.html)

>ä¸ºä»€ä¹ˆè¯´Javaç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜

å› ä¸º Java è¯­è¨€æ—¢å…·æœ‰ç¼–è¯‘å‹è¯­è¨€çš„ç‰¹å¾ï¼Œä¹Ÿå…·æœ‰è§£é‡Šå‹è¯­è¨€çš„ç‰¹å¾ã€‚

Javaç¨‹åºè¦å…ˆç»è¿‡ç¼–è¯‘æ­¥éª¤ï¼Œç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åç”±Javaè§£é‡Šå™¨å°†å­—èŠ‚ç æ–‡ä»¶è§£é‡Šä¸ºæœºå™¨è¯­è¨€æ‰§è¡Œã€‚
![](https://img-b.icode.best/20160419154349203)

---

## Oracle JDK vs Open JDK

å¯¹äº Java 7ï¼Œæ²¡ä»€ä¹ˆå…³é”®çš„åœ°æ–¹ã€‚OpenJDK é¡¹ç›®ä¸»è¦åŸºäº Sun æèµ çš„ HotSpot æºä»£ç ã€‚æ­¤å¤–ï¼ŒOpenJDK è¢«é€‰ä¸º Java 7 çš„å‚è€ƒå®ç°ï¼Œç”± Oracle å·¥ç¨‹å¸ˆç»´æŠ¤ã€‚å…³äº JVMï¼ŒJDKï¼ŒJRE å’Œ OpenJDK ä¹‹é—´çš„åŒºåˆ«ï¼ŒOracle åšå®¢å¸–å­åœ¨ 2012 å¹´æœ‰ä¸€ä¸ªæ›´è¯¦ç»†çš„ç­”æ¡ˆï¼š

> é—®ï¼šOpenJDK å­˜å‚¨åº“ä¸­çš„æºä»£ç ä¸ç”¨äºæ„å»º Oracle JDK çš„ä»£ç ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
> ç­”ï¼šéå¸¸æ¥è¿‘ - æˆ‘ä»¬çš„ Oracle JDK ç‰ˆæœ¬æ„å»ºè¿‡ç¨‹åŸºäº OpenJDK 7 æ„å»ºï¼Œåªæ·»åŠ äº†å‡ ä¸ªéƒ¨åˆ†ï¼Œä¾‹å¦‚éƒ¨ç½²ä»£ç ï¼Œå…¶ä¸­åŒ…æ‹¬ Oracle çš„ Java æ’ä»¶å’Œ Java WebStart çš„å®ç°ï¼Œä»¥åŠä¸€äº›é—­æºçš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œå¦‚å›¾å½¢å…‰æ …åŒ–å™¨ï¼Œä¸€äº›å¼€æºçš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œå¦‚ Rhinoï¼Œä»¥åŠä¸€äº›é›¶ç¢çš„ä¸œè¥¿ï¼Œå¦‚é™„åŠ æ–‡æ¡£æˆ–ç¬¬ä¸‰æ–¹å­—ä½“ã€‚å±•æœ›æœªæ¥ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯å¼€æº Oracle JDK çš„æ‰€æœ‰éƒ¨åˆ†ï¼Œé™¤äº†æˆ‘ä»¬è€ƒè™‘å•†ä¸šåŠŸèƒ½çš„éƒ¨åˆ†ã€‚

> **æ€»ç»“**

- 1. Oracle JDK å¤§æ¦‚æ¯ 6 ä¸ªæœˆå‘ä¸€æ¬¡ä¸»è¦ç‰ˆæœ¬ï¼ˆä» 2014 å¹´ 3 æœˆ JDK 8 LTS å‘å¸ƒåˆ° 2017 å¹´ 9 æœˆ JDK 9 å‘å¸ƒç»å†äº†é•¿è¾¾ 3 å¹´å¤šçš„æ—¶é—´ï¼Œæ‰€ä»¥å¹¶ä¸æ€»æ˜¯ 6 ä¸ªæœˆï¼‰ï¼Œè€Œ OpenJDK ç‰ˆæœ¬å¤§æ¦‚æ¯ä¸‰ä¸ªæœˆå‘å¸ƒä¸€æ¬¡,ä½†è¿™å¹¶ä¸æ˜¯å›ºå®šçš„ã€‚å‚è€ƒï¼š[Update and FAQ on the Java SE Release Cadence](https://blogs.oracle.com/java/post/update-and-faq-on-the-java-se-release-cadence)
- 2. OpenJDK æ˜¯ä¸€ä¸ªå‚è€ƒæ¨¡å‹å¹¶ä¸”æ˜¯å®Œå…¨å¼€æºçš„ï¼Œè€Œ Oracle JDK æ˜¯ OpenJDK çš„ä¸€ä¸ªå®ç°ï¼Œå¹¶ä¸æ˜¯å®Œå…¨å¼€æºçš„ï¼›[OpenJDK å¼€æºé¡¹ç›®](https://github.com/openjdk/jdk)
- 3. Oracle JDK æ¯” OpenJDK æ›´ç¨³å®šï¼ˆOracle JDK ç”± Oracle å†…éƒ¨å›¢é˜Ÿè¿›è¡Œå•ç‹¬ç ”å‘çš„ï¼Œè€Œä¸”å‘å¸ƒæ—¶é—´æ¯” OpenJDK æ›´é•¿ï¼Œè´¨é‡æ›´æœ‰ä¿éšœï¼‰ã€‚OpenJDK å’Œ Oracle JDK çš„ä»£ç å‡ ä¹ç›¸åŒï¼ˆOpenJDK çš„ä»£ç æ˜¯ä» Oracle JDK ä»£ç æ´¾ç”Ÿå‡ºæ¥çš„ï¼Œå¯ä»¥ç†è§£ä¸ºåœ¨ Oracle JDK åˆ†æ”¯ä¸Šæ‹‰äº†ä¸€æ¡æ–°çš„åˆ†æ”¯å« OpenJDKï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†ä»£ç ç›¸åŒï¼‰ï¼Œä½† Oracle JDK æœ‰æ›´å¤šçš„ç±»å’Œä¸€äº›é”™è¯¯ä¿®å¤ã€‚æŸäº›æƒ…å†µä¸‹ï¼Œæœ‰äº›äººæåˆ°åœ¨ä½¿ç”¨ OpenJDK å¯èƒ½ä¼šé‡åˆ°äº†è®¸å¤šåº”ç”¨ç¨‹åºå´©æºƒçš„é—®é¢˜ï¼Œä½†æ˜¯ï¼Œåªéœ€åˆ‡æ¢åˆ° Oracle JDK å°±å¯ä»¥è§£å†³é—®é¢˜ï¼›
- 4. åœ¨å“åº”æ€§å’Œ JVM æ€§èƒ½æ–¹é¢ï¼ŒOracle JDK ä¸ OpenJDK ç›¸æ¯”æä¾›äº†æ›´å¥½çš„æ€§èƒ½ï¼›
- 5. Oracle JDK ä¸ä¼šä¸ºå³å°†å‘å¸ƒçš„ç‰ˆæœ¬æä¾›é•¿æœŸæ”¯æŒï¼ˆå¦‚æœæ˜¯ LTS é•¿æœŸæ”¯æŒç‰ˆæœ¬çš„è¯ä¹Ÿä¼šï¼Œæ¯”å¦‚ JDK 8ï¼Œä½†å¹¶ä¸æ˜¯æ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯ LTS ç‰ˆæœ¬ï¼‰ï¼Œç”¨æˆ·æ¯æ¬¡éƒ½å¿…é¡»é€šè¿‡æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬è·å¾—æ”¯æŒæ¥è·å–æœ€æ–°ç‰ˆæœ¬ï¼›
- 6. Oracle JDK ä½¿ç”¨ BCL/OTN åè®®è·å¾—è®¸å¯ï¼Œè€Œ OpenJDK æ ¹æ® GPL v2 è®¸å¯è·å¾—è®¸å¯

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/basis/oracle-jdk-release-cadence.jpg)
> **æ—¢ç„¶ Oracle JDK è¿™ä¹ˆå¥½ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æœ‰ OpenJDKï¼Ÿ**

- OpenJDK æ˜¯å¼€æºçš„ï¼Œå¼€æºæ„å‘³ç€ä½ å¯ä»¥å¯¹å®ƒæ ¹æ®ä½ è‡ªå·±çš„éœ€è¦è¿›è¡Œä¿®æ”¹ã€ä¼˜åŒ–ï¼Œæ¯”å¦‚ Alibaba åŸºäº OpenJDK å¼€å‘äº† [Dragonwell8](https://github.com/alibaba/dragonwell8)
- OpenJDK æ˜¯å•†ä¸šå…è´¹çš„ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆé€šè¿‡ yum åŒ…ç®¡ç†å™¨ä¸Šé»˜è®¤å®‰è£…çš„ JDK æ˜¯ OpenJDK è€Œä¸æ˜¯ Oracle JDKï¼‰ã€‚è™½ç„¶ Oracle JDK ä¹Ÿæ˜¯å•†ä¸šå…è´¹ï¼ˆæ¯”å¦‚ JDK 8ï¼‰ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰ç‰ˆæœ¬éƒ½æ˜¯å…è´¹çš„ã€‚
- OpenJDK æ›´æ–°é¢‘ç‡æ›´å¿«ã€‚Oracle JDK ä¸€èˆ¬æ˜¯æ¯ 6 ä¸ªæœˆå‘å¸ƒä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œè€Œ OpenJDK ä¸€èˆ¬æ˜¯æ¯ 3 ä¸ªæœˆå‘å¸ƒä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚ï¼ˆç°åœ¨ä½ çŸ¥é“ä¸ºå•¥ Oracle JDK æ›´ç¨³å®šäº†å§ï¼Œå…ˆåœ¨ OpenJDK è¯•è¯•æ°´ï¼ŒæŠŠå¤§éƒ¨åˆ†é—®é¢˜éƒ½è§£å†³æ‰äº†æ‰åœ¨ Oracle JDK ä¸Šå‘å¸ƒï¼‰

åŸºäºä»¥ä¸Šè¿™äº›åŸå› ï¼ŒOpenJDK è¿˜æ˜¯æœ‰å­˜åœ¨çš„å¿…è¦çš„ï¼

> **BCLåè®®ä¸OTNåè®®**

- BCL åè®®ï¼ˆOracle Binary Code License Agreementï¼‰ï¼š å¯ä»¥ä½¿ç”¨ JDKï¼ˆæ”¯æŒå•†ç”¨ï¼‰ï¼Œä½†æ˜¯ä¸èƒ½è¿›è¡Œä¿®æ”¹ã€‚
- OTN åè®®ï¼ˆOracle Technology Network License Agreementï¼‰ï¼š 11 åŠä¹‹åæ–°å‘å¸ƒçš„ JDK ç”¨çš„éƒ½æ˜¯è¿™ä¸ªåè®®ï¼Œå¯ä»¥è‡ªå·±ç§ä¸‹ç”¨ï¼Œä½†æ˜¯å•†ç”¨éœ€è¦ä»˜è´¹ã€‚

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/java-guide-blog/20210425151835918.png)

ç›¸å…³é˜…è¯» ğŸ‘:[Differences Between Oracle JDK and OpenJDK](https://www.baeldung.com/oracle-jdk-vs-openjdk)

---

## Java å’Œ C++çš„åŒºåˆ«

- Javaä¸æä¾›ç›´æ¥å†…å­˜è®¿é—®ï¼Œç¨‹åºå†…å­˜æ›´åŠ å®‰å…¨
- Javaç±»æ˜¯å•ç»§æ‰¿çš„ï¼ŒC++æ”¯æŒå¤šç»§æ‰¿ã€‚Javaæ¥å£å¯ä»¥å¤šç»§æ‰¿
- Javaæœ‰è‡ªåŠ¨å†…å­˜ç®¡ç†ä¸åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾æ— ç”¨å†…å­˜
- C++æ”¯æŒæ–¹æ³•ä¸æ“ä½œç¬¦çš„é‡è½½ï¼ŒJavaä»…æ”¯æŒæ–¹æ³•çš„é‡è½½
  
---

# äºŒã€åŸºæœ¬è¯­æ³•

## æ³¨é‡Šæœ‰å“ªå‡ ç§å½¢å¼ï¼Ÿ

- å•è¡Œæ³¨é‡Š:é€šå¸¸ç”¨äºè§£é‡Šæ–¹æ³•å†…æŸå•è¡Œä»£ç çš„ä½œç”¨ã€‚
- å¤šè¡Œæ³¨é‡Š:é€šå¸¸ç”¨äºè§£é‡Šä¸€æ®µä»£ç çš„ä½œç”¨ã€‚
- æ–‡æ¡£æ³¨é‡Š:é€šå¸¸ç”¨äºç”Ÿæˆ Java å¼€å‘æ–‡æ¡£ã€‚

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/basis/image-20220714112336911.png)


> ä»£ç çš„æ³¨é‡Šä¸æ˜¯è¶Šè¯¦ç»†è¶Šå¥½ã€‚å®é™…ä¸Šå¥½çš„ä»£ç æœ¬èº«å°±æ˜¯æ³¨é‡Šï¼Œæˆ‘ä»¬è¦å°½é‡è§„èŒƒå’Œç¾åŒ–è‡ªå·±çš„ä»£ç æ¥å‡å°‘ä¸å¿…è¦çš„æ³¨é‡Šã€‚
> è‹¥ç¼–ç¨‹è¯­è¨€è¶³å¤Ÿæœ‰è¡¨è¾¾åŠ›ï¼Œå°±ä¸éœ€è¦æ³¨é‡Šï¼Œå°½é‡é€šè¿‡ä»£ç æ¥é˜è¿°ã€‚
> ğŸŒ°ğŸŒ°
> ```java
> // check to see if the employee is eligible for full benefits
>  if ((employee.flags & HOURLY_FLAG) && (employee.age > 65))
> // æ›¿æ¢ä¸º
> if (employee.isEligibleForFullBenefits())
> ``` 


## æ ‡è¯†ç¬¦å’Œå…³é”®å­—çš„åŒºåˆ«

> **æ ‡è¯†ç¬¦å’Œå…³é”®å­—çš„åŒºåˆ«**

æ ‡è¯†ç¬¦:ç¨‹åºã€ç±»ã€å˜é‡ã€æ–¹æ³•ç­‰å–å¾—åå­—ç§°ä¸ºæ ‡è¯†ç¬¦ï¼Œç®€è€Œè¨€ä¹‹æ ‡è¯†ç¬¦å°±æ˜¯ä¸€ä¸ªåå­—ã€‚

å…³é”®å­—ï¼š**è¢«èµ‹äºˆç‰¹æ®Šå«ä¹‰çš„æ ‡è¯†ç¬¦**

> Javaè¯­è¨€å…³é”®å­—æœ‰å“ªäº›ï¼Ÿ

| åˆ†ç±»                 | å…³é”®å­—   |            |          |              |            |           |        |
| :------------------- | -------- | ---------- | -------- | ------------ | ---------- | --------- | ------ |
| è®¿é—®æ§åˆ¶             | private  | protected  | public   |              |            |           |        |
| ç±»ï¼Œæ–¹æ³•å’Œå˜é‡ä¿®é¥°ç¬¦ | abstract | class      | extends  | final        | implements | interface | native |
|                      | new      | static     | strictfp | synchronized | transient  | volatile  | enum   |
| ç¨‹åºæ§åˆ¶             | break    | continue   | return   | do           | while      | if        | else   |
|                      | for      | instanceof | switch   | case         | default    | assert    |        |
| é”™è¯¯å¤„ç†             | try      | catch      | throw    | throws       | finally    |           |        |
| åŒ…ç›¸å…³               | import   | package    |          |              |            |           |        |
| åŸºæœ¬ç±»å‹             | boolean  | byte       | char     | double       | float      | int       | long   |
|                      | short    |            |          |              |            |           |        |
| å˜é‡å¼•ç”¨             | super    | this       | void     |              |            |           |        |
| ä¿ç•™å­—               | goto     | const      |          |              |            |           |        |

**æ³¨æ„äº‹é¡¹ï¼š**

- æ‰€æœ‰çš„å…³é”®å­—éƒ½æ˜¯å°å†™çš„ï¼Œåœ¨ IDE ä¸­ä¼šä»¥ç‰¹æ®Šé¢œè‰²æ˜¾ç¤ºã€‚
- `default`å…³é”®å­—å¾ˆç‰¹æ®Šï¼Œæ—¢å±äºç¨‹åºæ§åˆ¶ï¼Œä¹Ÿå±äºç±»ã€æ–¹æ³•ä¸å˜é‡ä¿®é¥°ç¬¦ï¼Œè¿˜å±äºè®¿é—®æ§åˆ¶ã€‚
  - **åœ¨ç¨‹åºæ§åˆ¶ä¸­**ï¼Œå½“åœ¨ `switch` ä¸­åŒ¹é…ä¸åˆ°ä»»ä½•æƒ…å†µæ—¶ï¼Œå¯ä»¥ä½¿ç”¨` default `æ¥ç¼–å†™é»˜è®¤åŒ¹é…çš„æƒ…å†µã€‚
  - åœ¨**ç±»ï¼Œæ–¹æ³•å’Œå˜é‡ä¿®é¥°ç¬¦ä¸­**ï¼Œä» JDK8 å¼€å§‹å¼•å…¥äº†é»˜è®¤æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ `default` å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªæ–¹æ³•çš„é»˜è®¤å®ç°ã€‚
  - åœ¨**è®¿é—®æ§åˆ¶ä¸­**ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•å‰æ²¡æœ‰ä»»ä½•ä¿®é¥°ç¬¦ï¼Œåˆ™é»˜è®¤ä¼šæœ‰ä¸€ä¸ªä¿®é¥°ç¬¦ `default`ï¼Œä½†æ˜¯è¿™ä¸ªä¿®é¥°ç¬¦åŠ ä¸Šäº†å°±ä¼šæŠ¥é”™ã€‚

- æ³¨æ„ ï¼šè™½ç„¶ `true`, `false`, å’Œ `null` çœ‹èµ·æ¥åƒå…³é”®å­—ä½†å®é™…ä¸Šä»–ä»¬æ˜¯å­—é¢å€¼ï¼ŒåŒæ—¶ä½ ä¹Ÿä¸å¯ä»¥ä½œä¸ºæ ‡è¯†ç¬¦æ¥ä½¿ç”¨ã€‚

[å®˜æ–¹æ–‡æ¡£](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)

---

## è‡ªå¢è‡ªå‡è¿ç®—ç¬¦

â€œç¬¦å·åœ¨å‰å°±å…ˆåŠ /å‡ï¼Œç¬¦å·åœ¨åå°±ååŠ /å‡â€ã€‚

--- 

## continueã€breakå’Œreturnçš„åŒºåˆ«

åœ¨å¾ªç¯ç»“æ„ä¸­ï¼Œå½“å¾ªç¯æ¡ä»¶ä¸æ»¡è¶³æˆ–è€…å¾ªç¯æ¬¡æ•°è¾¾åˆ°è¦æ±‚æ—¶ï¼Œå¾ªç¯ä¼šæ­£å¸¸ç»“æŸã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å€™å¯èƒ½éœ€è¦åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­ï¼Œå½“å‘ç”Ÿäº†æŸç§æ¡ä»¶ä¹‹å ï¼Œæå‰ç»ˆæ­¢å¾ªç¯ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°ä¸‹é¢å‡ ä¸ªå…³é”®è¯ï¼š

- `continue`: æŒ‡è·³å‡ºå½“å‰çš„è¿™ä¸€æ¬¡å¾ªç¯ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯
- `break`: ç»ˆæ­¢æ‰€æœ‰å¾ªç¯ï¼Œç»§ç»­æ‰§è¡Œå¾ªç¯ä¸‹è¾¹çš„è¯­å¥

`return`å…³é”®å­—ç”¨äºè·³å‡ºæ‰€åœ¨æ–¹æ³•ï¼Œç»“æŸè¯¥æ–¹æ³•çš„è¿è¡Œã€‚return ä¸€èˆ¬æœ‰ä¸¤ç§ç”¨æ³•ï¼š

- ç›´æ¥ä½¿ç”¨ return ç»“æŸæ–¹æ³•æ‰§è¡Œï¼Œç”¨äºæ²¡æœ‰è¿”å›å€¼å‡½æ•°çš„æ–¹æ³•
- return ä¸€ä¸ªç‰¹å®šå€¼ï¼Œç”¨äºæœ‰è¿”å›å€¼å‡½æ•°çš„æ–¹æ³•

> ğŸŒ°ğŸŒ°

ä¸‹åˆ—è¯­å¥è¿è¡Œçš„ç»“æœæ˜¯ä»€ä¹ˆ
```java
    public static void main(String[] args) {
        boolean flag = false;
        for (int i = 0; i <= 3; i++) {
            if (i == 0) {
                System.out.println("0");
            } else if (i == 1) {
                System.out.println("1");
                continue;
            } else if (i == 2) {
                System.out.println("2");
                flag = true;
            } else if (i == 3) {
                System.out.println("3");
                break;
            } else if (i == 4) {
                System.out.println("4");
            }
            System.out.println("xixi");
        }
        if (flag) {
            System.out.println("haha");
            return;
        }
        System.out.println("heihei");
    }
```

**è¿è¡Œç»“æœï¼š**

```java
0
xixi
1
2
xixi
3
haha
```

---

## å˜é‡

### æˆå‘˜å˜é‡ä¸å±€éƒ¨å˜é‡çš„åŒºåˆ«ï¼Ÿ

- **è¯­æ³•å½¢å¼ï¼š** 
  - ä»è¯­æ³•å½¢å¼çœ‹ï¼Œæˆå‘˜å˜é‡æ˜¯å±äºç±»çš„ï¼Œè€Œå±€éƒ¨å˜é‡æ˜¯åœ¨ä»£ç å—æˆ–æ–¹æ³•ä¸­å®šä¹‰çš„å˜é‡æˆ–è€…æ˜¯æ–¹æ³•çš„å‚æ•°
  - æˆå‘˜å˜é‡å¯ä»¥è¢« `public`,`private`,`static` ç­‰ä¿®é¥°ç¬¦æ‰€ä¿®é¥°ï¼Œè€Œå±€éƒ¨å˜é‡ä¸èƒ½è¢«è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦åŠ `static` æ‰€ä¿®é¥°ï¼›ä½†æ˜¯ï¼Œæˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡éƒ½èƒ½è¢« `final` æ‰€ä¿®é¥°ã€‚
- **å­˜å‚¨æ–¹å¼**
  - ä»å˜é‡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼æ¥çœ‹ï¼Œå¦‚æœæˆå‘˜å˜é‡ä½¿ç”¨`static` ä¿®é¥°ï¼Œé‚£ä¹ˆè¯¥æˆå‘˜å˜é‡å±äºç±»ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨`static`ä¿®é¥°ï¼Œåˆ™è¯¥æˆå‘˜å˜é‡å±äºå®ä¾‹ã€‚å¯¹è±¡å­˜å‚¨åœ¨å †ä¸­ï¼Œè€Œå±€éƒ¨å˜é‡åˆ™å­˜åœ¨ä¸æ ˆå†…å­˜ä¸­ã€‚
- **ç”Ÿå­˜æ—¶é—´**
  - ä»å˜é‡åœ¨å†…å­˜ä¸­çš„ç”Ÿå­˜æ—¶é—´ä¸Šçœ‹ï¼Œæˆå‘˜å˜é‡æ˜¯å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒéšç€å¯¹è±¡çš„åˆ›å»ºè€Œå­˜åœ¨
  - å±€éƒ¨å˜é‡éšç€æ–¹æ³•çš„è°ƒç”¨è€Œè‡ªåŠ¨ç”Ÿæˆï¼Œéšç€æ–¹æ³•çš„è°ƒç”¨ç»“æŸè€Œæ¶ˆäº¡ã€‚
- **é»˜è®¤å€¼**
  - æˆå‘˜å˜é‡å¦‚æœæ²¡æœ‰åˆå§‹å€¼ï¼Œåˆ™ä¼šè‡ªåŠ¨ä»¥ç±»å‹çš„é»˜è®¤å€¼è€Œèµ‹å€¼ï¼ˆä¸€ç§æƒ…å†µä¾‹å¤–:è¢« final ä¿®é¥°çš„æˆå‘˜å˜é‡ä¹Ÿå¿…é¡»æ˜¾å¼åœ°èµ‹å€¼ï¼‰
  - å±€éƒ¨å˜é‡ä¸ä¼šè¢«è‡ªåŠ¨èµ‹å€¼

### é™æ€å˜é‡æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ

é™æ€å˜é‡å¯ä»¥è¢«ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œæ— è®ºä¸€ä¸ªç±»åˆ›å»ºäº†å¤šå°‘å¯¹è±¡ï¼Œä»–ä»¬éƒ½å…±äº«åŒä¸€ä»½é™æ€å˜é‡ã€‚

é€šå¸¸æƒ…å†µä¸‹ï¼Œé™æ€å˜é‡ä¼šè¢« `final` å…³é”®å­—ä¿®é¥°æˆä¸ºå¸¸é‡ã€‚

### å­—ç¬¦å‹å¸¸é‡å’Œå­—ç¬¦ä¸²å¸¸é‡çš„åŒºåˆ«ï¼Ÿ

- **å½¢å¼ï¼š** å­—ç¬¦å¸¸é‡æ˜¯å•å¼•å·å¼•èµ·çš„ä¸€ä¸ªå­—ç¬¦ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ˜¯åŒå¼•å·å¼•èµ·çš„ 0 ä¸ªæˆ–è‹¥å¹²ä¸ªå­—ç¬¦ã€‚
  
- **å«ä¹‰ï¼š** å­—ç¬¦å¸¸é‡ç›¸å½“äºä¸€ä¸ªæ•´å‹å€¼( ASCII å€¼),å¯ä»¥å‚åŠ è¡¨è¾¾å¼è¿ç®—; å­—ç¬¦ä¸²å¸¸é‡ä»£è¡¨ä¸€ä¸ªåœ°å€å€¼(è¯¥å­—ç¬¦ä¸²åœ¨å†…å­˜ä¸­å­˜æ”¾ä½ç½®)ã€‚
  
- **å å†…å­˜å¤§å°:** å­—ç¬¦å¸¸é‡åªå  2 ä¸ªå­—èŠ‚; å­—ç¬¦ä¸²å¸¸é‡å è‹¥å¹²ä¸ªå­—èŠ‚ã€‚

## æ–¹æ³•

### ä»€ä¹ˆæ˜¯æ–¹æ³•çš„è¿”å›å€¼ï¼Ÿæ–¹æ³•æœ‰å“ªå‡ ç§ç±»å‹ï¼Ÿ

**æ–¹æ³•çš„è¿”å›å€¼**ï¼šæ˜¯æŒ‡æˆ‘ä»¬è·å–åˆ°çš„æŸä¸ªæ–¹æ³•ä½“ä¸­çš„ä»£ç æ‰§è¡Œåäº§ç”Ÿçš„ç»“æœï¼ï¼ˆå‰ææ˜¯è¯¥æ–¹æ³•å¯èƒ½äº§ç”Ÿç»“æœï¼‰ã€‚è¿”å›å€¼çš„ä½œç”¨æ˜¯æ¥æ”¶å‡ºç»“æœï¼Œ**ä½¿å¾—å®ƒå¯ä»¥ç”¨äºå…¶ä»–çš„æ“ä½œï¼**

> **æ ¹æ®æ–¹æ³•çš„è¿”å›å€¼ä¸å‚æ•°ç±»å‹å¯ä»¥å°†æ–¹æ³•åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š**

- **æ— å‚æ•°æ— è¿”å›å€¼**

```java
public void f1() {
    //......
}
// ä¸‹é¢è¿™ä¸ªæ–¹æ³•ä¹Ÿæ²¡æœ‰è¿”å›å€¼ï¼Œè™½ç„¶ç”¨åˆ°äº† return
public void f(int a) {
    if (...) {
        // è¡¨ç¤ºç»“æŸæ–¹æ³•çš„æ‰§è¡Œ,ä¸‹æ–¹çš„è¾“å‡ºè¯­å¥ä¸ä¼šæ‰§è¡Œ
        return;
    }
    System.out.println(a);
}

```

- æœ‰å‚æ•°æ— è¿”å›å€¼

```java
public void f2(Parameter 1, ..., Parameter n) {
    //......
}
``` 

- æœ‰è¿”å›å€¼æ— å‚æ•°

```java
public int f3() {
    //......
    return x;
}
```

- æœ‰è¿”å›å€¼æœ‰å‚æ•°çš„æ–¹æ³•

```java
public int f4(int a, int b) {
    return a * b;
}
```

### é™æ€æ–¹æ³•ä¸ºä»€ä¹ˆä¸èƒ½è°ƒç”¨éé™æ€æˆå‘˜ï¼Ÿ

- é™æ€æ–¹æ³•æ˜¯å±äºç±»çš„ï¼Œåœ¨ç±»åŠ è½½æ—¶å°±ä¼šåˆ†é…å†…å­˜ï¼Œå¯ä»¥é€šè¿‡ç±»åç›´æ¥è®¿é—®ã€‚è€Œéé™æ€æˆå‘˜å±äºå¯¹è±¡å®ä¾‹ï¼Œåªæœ‰å¯¹è±¡åˆå§‹åŒ–ä¹‹åæ‰å­˜åœ¨ï¼Œéœ€è¦é€šè¿‡ç±»çš„å®ä¾‹å»è®¿é—®
- åœ¨ç±»çš„éé™æ€æˆå‘˜ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œé™æ€æˆå‘˜å°±å·²ç»å­˜åœ¨äº†ï¼Œæ­¤æ—¶è°ƒç”¨åœ¨å†…å­˜ä¸­è¿˜ä¸å­˜åœ¨çš„éé™æ€æˆå‘˜ï¼Œå±äºéæ³•æ“ä½œã€‚

### é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•æœ‰ä½•ä¸åŒï¼Ÿ

**1. è°ƒç”¨æ–¹å¼**

å¤–éƒ¨è°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨`ç±»å.æ–¹æ³•å`ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`å¯¹è±¡å.æ–¹æ³•å`ï¼Œ**è°ƒç”¨é™æ€æ–¹æ³•å¯ä»¥æ— éœ€åˆ›å»ºå¯¹è±¡ ã€‚**

è°ƒç”¨å®ä¾‹æ–¹æ³•æ—¶ï¼Œåªèƒ½ä½¿ç”¨`å¯¹è±¡å.æ–¹æ³•å`

ä¸€èˆ¬å»ºè®®ä½¿ç”¨ `ç±»å.æ–¹æ³•å` çš„æ–¹å¼æ¥è°ƒç”¨é™æ€æ–¹æ³•ã€‚ä¸å»ºè®®ä½¿ç”¨ `å¯¹è±¡.æ–¹æ³•å`çš„æ–¹å¼æ¥è°ƒç”¨é™æ€æ–¹æ³•ã€‚è¿™ç§æ–¹å¼éå¸¸å®¹æ˜“é€ æˆæ··æ·†ï¼Œé™æ€æ–¹æ³•ä¸å±äºç±»çš„æŸä¸ªå¯¹è±¡è€Œæ˜¯å±äºè¿™ä¸ªç±»ã€‚

```java
public class Person {
    public void method() {
      //......
    }

    public static void staicMethod(){
      //......
    }
    public static void main(String[] args) {
        Person person = new Person();
        // è°ƒç”¨å®ä¾‹æ–¹æ³•
        person.method();
        // è°ƒç”¨é™æ€æ–¹æ³•
        Person.staicMethod()
    }
}
```

**2. è®¿é—®æˆå‘˜æ˜¯å¦å­˜åœ¨é™åˆ¶**

- é™æ€æ–¹æ³•å­˜åœ¨è®¿é—®é™åˆ¶ï¼Œé™æ€æ–¹æ³•åœ¨è®¿é—®æœ¬ç±»çš„æˆå‘˜æ—¶ï¼Œåªå…è®¸è®¿é—®é™æ€æˆå‘˜ï¼ˆå³é™æ€æˆå‘˜å˜é‡å’Œé™æ€æ–¹æ³•ï¼‰ï¼Œä¸å…è®¸è®¿é—®å®ä¾‹æˆå‘˜ï¼ˆå³å®ä¾‹æˆå‘˜å˜é‡å’Œå®ä¾‹æ–¹æ³•ï¼‰
- å®ä¾‹æ–¹æ³•åˆ™ä¸å­˜åœ¨ä¸Šè¿°é™åˆ¶

### é‡è½½å’Œé‡å†™æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

é‡è½½: æ˜¯æŒ‡åŒä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿæ ¹æ®è¾“å…¥æ•°æ®çš„ä¸åŒï¼Œåšå‡ºä¸åŒçš„å¤„ç†
é‡å†™: å½“å­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»çš„ç›¸åŒæ–¹æ³•ï¼Œè¾“å…¥æ•°æ®ä¸€æ ·ï¼Œä½†è¦åšå‡ºæœ‰åˆ«äºçˆ¶ç±»çš„å“åº”æ—¶ï¼Œéœ€è¦è¦†ç›–çˆ¶ç±»æ–¹æ³•

> **é‡è½½**

å‘ç”Ÿåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼ˆæˆ–è€…çˆ¶ç±»å’Œå­ç±»ä¹‹é—´ï¼‰ï¼Œæ–¹æ³•åå¿…é¡»ç›¸åŒï¼Œå‚æ•°ç±»å‹ä¸åŒã€ä¸ªæ•°ä¸åŒã€é¡ºåºä¸åŒï¼Œæ–¹æ³•è¿”å›å€¼å’Œè®¿é—®ä¿®é¥°ç¬¦å¯ä»¥ä¸åŒã€‚

> ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯ã€‹è¿™æœ¬ä¹¦æ˜¯è¿™æ ·ä»‹ç»é‡è½½çš„ï¼š
> å¦‚æœå¤šä¸ªæ–¹æ³•(æ¯”å¦‚ StringBuilder çš„æ„é€ æ–¹æ³•)æœ‰ç›¸åŒçš„åå­—ã€ä¸åŒçš„å‚æ•°ï¼Œ ä¾¿äº§ç”Ÿäº†é‡è½½ã€‚
> ```java 
> StringBuilder sb = new StringBuilder();
> StringBuilder sb2 = new StringBuilder("HelloWorld");
> ```
> 
> ç¼–è¯‘å™¨å¿…é¡»æŒ‘é€‰å‡ºå…·ä½“æ‰§è¡Œå“ªä¸ªæ–¹æ³•ï¼Œå®ƒé€šè¿‡ç”¨å„ä¸ªæ–¹æ³•ç»™å‡ºçš„å‚æ•°ç±»å‹ä¸ç‰¹å®šæ–¹æ³•è°ƒç”¨æ‰€ä½¿ç”¨çš„å€¼ç±»å‹è¿›è¡ŒåŒ¹é…æ¥æŒ‘é€‰å‡ºç›¸åº”çš„æ–¹æ³•ã€‚ å¦‚æœç¼–è¯‘å™¨æ‰¾ä¸åˆ°åŒ¹é…çš„å‚æ•°ï¼Œ å°±ä¼šäº§ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ï¼Œ å› ä¸ºæ ¹æœ¬ä¸å­˜åœ¨åŒ¹é…ï¼Œ æˆ–è€…æ²¡æœ‰ä¸€ä¸ªæ¯”å…¶ä»–çš„æ›´å¥½(è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºé‡è½½è§£æ(overloading resolution))ã€‚
> Java å…è®¸é‡è½½ä»»ä½•æ–¹æ³•ï¼Œ è€Œä¸åªæ˜¯æ„é€ å™¨æ–¹æ³•ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼šé‡è½½å°±æ˜¯åŒä¸€ä¸ªç±»ä¸­å¤šä¸ªåŒåæ–¹æ³•æ ¹æ®ä¸åŒçš„ä¼ å‚æ¥æ¥ä¹‹ä»ä¸åŒçš„é€»è¾‘å¤„ç†ã€‚

> **é‡å†™**

**é‡å†™å‘ç”Ÿåœ¨è¿è¡ŒæœŸ**ï¼Œæ˜¯å­ç±»å¯¹çˆ¶ç±»çš„å…è®¸è®¿é—®çš„æ–¹æ³•çš„å®ç°è¿‡ç¨‹è¿›è¡Œé‡æ–°ç¼–å†™ã€‚

- **æ–¹æ³•åã€å‚æ•°åˆ—è¡¨å¿…é¡»ç›¸åŒ**ï¼Œå­ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹åº”æ¯”çˆ¶ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹æ›´å°æˆ–ç›¸ç­‰ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸èŒƒå›´å°äºç­‰äºçˆ¶ç±»ï¼Œè®¿é—®ä¿®é¥°ç¬¦èŒƒå›´å¤§äºç­‰äºçˆ¶ç±»ã€‚
- å¦‚æœçˆ¶ç±»æ–¹æ³•è®¿é—®ä¿®é¥°ç¬¦ä¸º private/final/static åˆ™å­ç±»å°±ä¸èƒ½é‡å†™è¯¥æ–¹æ³•ï¼Œä½†æ˜¯è¢« static ä¿®é¥°çš„æ–¹æ³•èƒ½å¤Ÿè¢«å†æ¬¡å£°æ˜ã€‚
- æ„é€ æ–¹æ³•æ— æ³•è¢«é‡å†™

ç»¼ä¸Šï¼š**é‡å†™å°±æ˜¯å­ç±»å¯¹çˆ¶ç±»æ–¹æ³•çš„é‡æ–°æ”¹é€ ï¼Œå¤–éƒ¨æ ·å­ä¸èƒ½æ”¹å˜ï¼Œå†…éƒ¨é€»è¾‘å¯ä»¥æ”¹å˜ã€‚**

**æ–¹æ³•çš„é‡å†™è¦éµå¾ªâ€œä¸¤åŒä¸¤å°ä¸€å¤§â€ï¼ˆä»¥ä¸‹å†…å®¹æ‘˜å½•è‡ªã€Šç–¯ç‹‚ Java è®²ä¹‰ã€‹ï¼‰ï¼š**

- â€œä¸¤åŒâ€å³æ–¹æ³•åç›¸åŒã€å½¢å‚åˆ—è¡¨ç›¸åŒï¼›
- â€œä¸¤å°â€æŒ‡çš„æ˜¯å­ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹åº”æ¯”çˆ¶ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹æ›´å°æˆ–ç›¸ç­‰ï¼Œå­ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»åº”æ¯”çˆ¶ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»æ›´å°æˆ–ç›¸ç­‰ï¼›
- â€œä¸€å¤§â€æŒ‡çš„æ˜¯å­ç±»æ–¹æ³•çš„è®¿é—®æƒé™åº”æ¯”çˆ¶ç±»æ–¹æ³•çš„è®¿é—®æƒé™æ›´å¤§æˆ–ç›¸ç­‰ã€‚

> **æ€»ç»“**

| åŒºåˆ«ç‚¹     | é‡è½½æ–¹æ³• | é‡å†™æ–¹æ³•                                                         |
| ---------- | -------- | ---------------------------------------------------------------- |
| å‘ç”ŸèŒƒå›´   | åŒä¸€ä¸ªç±» | å­ç±»                                                             |
| å‚æ•°åˆ—è¡¨   | å¿…é¡»ä¿®æ”¹ | ä¸€å®šä¸èƒ½ä¿®æ”¹                                                     |
| è¿”å›ç±»å‹   | å¯ä»¥ä¿®æ”¹ | å­ç±»æ–¹æ³•çš„è¿”å›å€¼ç±»å‹åº”è¯¥æ¯”çˆ¶ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹æ›´å°æˆ–è€…ç›¸ç­‰         |
| å¼‚å¸¸       | å¯ä»¥ä¿®æ”¹ | å­ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»åº”æ¯”çˆ¶ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»æ›´å°æˆ–ç›¸ç­‰ï¼› |
| è®¿é—®ä¿®é¥°ç¬¦ | å¯ä»¥ä¿®æ”¹ | ä¸€å®šä¸èƒ½åšæ›´ä¸¥æ ¼çš„é™åˆ¶ï¼ˆå¯ä»¥é™ä½é™åˆ¶ï¼‰                           |
| å‘ç”Ÿé˜¶æ®µ   | ç¼–è¯‘æœŸ   | è¿è¡ŒæœŸ                                                           |

â­ï¸ å…³äº `é‡å†™çš„è¿”å›å€¼ç±»å‹` è¿™é‡Œéœ€è¦é¢å¤–å¤šè¯´æ˜ä¸€ä¸‹ï¼Œä¸Šé¢çš„è¡¨è¿°ä¸å¤ªæ¸…æ™°å‡†ç¡®ï¼šå¦‚æœæ–¹æ³•çš„è¿”å›ç±»å‹æ˜¯ void å’ŒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™è¿”å›å€¼é‡å†™æ—¶ä¸å¯ä¿®æ”¹ã€‚ä½†æ˜¯å¦‚æœæ–¹æ³•çš„è¿”å›å€¼æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‡å†™æ—¶æ˜¯å¯ä»¥è¿”å›è¯¥å¼•ç”¨ç±»å‹çš„å­ç±»çš„ã€‚

```java
public class Hero {
    public String name() {
        return "è¶…çº§è‹±é›„";
    }
}
public class SuperMan extends Hero{
    @Override
    public String name() {
        return "è¶…äºº";
    }
    public Hero hero() {
        return new Hero();
    }
}

public class SuperSuperMan extends SuperMan {
    public String name() {
        return "è¶…çº§è¶…çº§è‹±é›„";
    }

    @Override
    public SuperMan hero() {
        return new SuperMan();
    }
}
```

### ä»€ä¹ˆæ˜¯å¯å˜é•¿å‚æ•°ï¼Ÿ

> **å¯å˜é•¿å‚æ•°**

- ä» Java5 å¼€å§‹ï¼ŒJava æ”¯æŒå®šä¹‰å¯å˜é•¿å‚æ•°ï¼Œæ‰€è°“**å¯å˜é•¿å‚æ•°**å°±æ˜¯å…è®¸åœ¨è°ƒç”¨æ–¹æ³•æ—¶ä¼ å…¥ä¸å®šé•¿åº¦çš„å‚æ•°ã€‚

```java
// è¯¥æ–¹æ³•æ”¯æŒä¼ å…¥0ä¸ªæˆ–å¤šä¸ªå‚æ•°
public static void method1(String... args) {
   //......
}
```

- å¯å˜å‚æ•°åªèƒ½ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ï¼Œä½†å‰é¢å¯ä»¥æœ‰å…¶ä»–å‚æ•°ä¹Ÿå¯æ²¡æœ‰ä»»ä½•å‚æ•°

```java
public static void method2(String arg1, String... args) {
   //......
}
```

- **Java çš„å¯å˜å‚æ•°ç¼–è¯‘åå®é™…ä¼šè¢«è½¬æ¢æˆä¸€ä¸ªæ•°ç»„**ï¼Œæˆ‘ä»¬çœ‹ç¼–è¯‘åç”Ÿæˆçš„ classæ–‡ä»¶å°±å¯ä»¥çœ‹å‡ºæ¥äº†ã€‚

> **é‡åˆ°æ–¹æ³•é‡è½½æ—¶ï¼Œä¼˜å…ˆåŒ¹é…å›ºå®šå‚æ•°è¿˜æ˜¯å¯å˜å‚æ•°æ–¹æ³•å‘¢ï¼Ÿ**

ç­”æ¡ˆï¼šä¼˜å…ˆåŒ¹é…å›ºå®šå‚æ•°çš„æ–¹æ³•ï¼Œå› ä¸ºå›ºå®šå‚æ•°çš„æ–¹æ³•åŒ¹é…åº¦æ›´é«˜ã€‚

ğŸ™‹â€â™‚ï¸ğŸŒ°

```java
public class VariableLengthArgument {

    public static void printVariable(String... args) {
        for (String s : args) {
            System.out.println(s);
        }
    }

    public static void printVariable(String arg1, String arg2) {
        System.out.println(arg1 + arg2);
    }

    public static void main(String[] args) {
        printVariable("a", "b");
        printVariable("a", "b", "c", "d");
    }
}
```

**è¾“å‡º**

```java
ab
a
b
c
d
```
---

# ä¸‰ã€åŸºæœ¬æ•°æ®ç±»å‹

## Javaä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹

> **8ç§åŸºæœ¬æ•°æ®ç±»å‹**

- 6ç§æ•°æ®ç±»å‹:
  - 4ç§æ•´æ•°ç±»å‹:byteã€shortã€intã€long
  - 2ç§æµ®ç‚¹å‹: floatã€double
- 1 ç§å­—ç¬¦ç±»å‹: char
- 1 ç§å¸ƒå°”ç±»å‹: boolean

> åŸºæœ¬æ•°æ®çš„é»˜è®¤å€¼ä»¥åŠæ‰€å ç©ºé—´å¤§å°

| åŸºæœ¬ç±»å‹  | ä½æ•° | å­—èŠ‚ | é»˜è®¤å€¼  | å–å€¼èŒƒå›´                                   |
| :-------- | :--- | :--- | :------ | ------------------------------------------ |
| `byte`    | 8    | 1    | 0       | -128 ~ 127                                 |
| `short`   | 16   | 2    | 0       | -32768 ~ 32767                             |
| `int`     | 32   | 4    | 0       | -2147483648 ~ 2147483647                   |
| `long`    | 64   | 8    | 0L      | -9223372036854775808 ~ 9223372036854775807 |
| `char`    | 16   | 2    | 'u0000' | 0 ~ 65535                                  |
| `float`   | 32   | 4    | 0f      | 1.4E-45 ~ 3.4028235E38                     |
| `double`  | 64   | 8    | 0d      | 4.9E-324 ~ 1.7976931348623157E308          |
| `boolean` | 1    |      | false   | trueã€false                                |


**æ³¨æ„ï¼š**

1. Java é‡Œä½¿ç”¨ `long` ç±»å‹çš„æ•°æ®ä¸€å®šè¦åœ¨æ•°å€¼åé¢åŠ ä¸Š **L**ï¼Œå¦åˆ™å°†ä½œä¸ºæ•´å‹è§£æã€‚
2. `char a = 'h'`char :å•å¼•å·ï¼Œ`String a = "hello"` :åŒå¼•å·ã€‚

è¿™å…«ç§åŸºæœ¬ç±»å‹éƒ½æœ‰å¯¹åº”çš„åŒ…è£…ç±»åˆ†åˆ«ä¸ºï¼š`Byte`ã€`Short`ã€`Integer`ã€`Long`ã€`Float`ã€`Double`ã€`Character`ã€`Boolean` ã€‚

## åŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»å‹çš„åŒºåˆ«

- æˆå‘˜å˜é‡åŒ…è£…ç±»å‹ä¸èµ‹å€¼å°±æ˜¯ `null` ï¼Œè€ŒåŸºæœ¬ç±»å‹æœ‰é»˜è®¤å€¼ä¸”ä¸æ˜¯ `null`ã€‚
- åŒ…è£…ç±»å‹å¯ç”¨äºæ³›å‹ï¼Œè€ŒåŸºæœ¬ç±»å‹ä¸å¯ä»¥ã€‚
- åŸºæœ¬æ•°æ®ç±»å‹çš„å±€éƒ¨å˜é‡å­˜æ”¾åœ¨ Java è™šæ‹Ÿæœºæ ˆä¸­çš„å±€éƒ¨å˜é‡è¡¨ä¸­ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡ï¼ˆæœªè¢« `static` ä¿®é¥° ï¼‰å­˜æ”¾åœ¨ Java è™šæ‹Ÿæœºçš„å †ä¸­ã€‚åŒ…è£…ç±»å‹å±äºå¯¹è±¡ç±»å‹ï¼Œæˆ‘ä»¬çŸ¥é“å‡ ä¹æ‰€æœ‰å¯¹è±¡å®ä¾‹éƒ½å­˜åœ¨äºå †ä¸­ã€‚
- ç›¸æ¯”äºå¯¹è±¡ç±»å‹ï¼Œ åŸºæœ¬æ•°æ®ç±»å‹å ç”¨çš„ç©ºé—´éå¸¸å°ã€‚

**ä¸ºä»€ä¹ˆè¯´æ˜¯å‡ ä¹æ‰€æœ‰å¯¹è±¡å®ä¾‹å‘¢ï¼Ÿ** è¿™æ˜¯å› ä¸º HotSpot è™šæ‹Ÿæœºå¼•å…¥äº† JIT ä¼˜åŒ–ä¹‹åï¼Œä¼šå¯¹å¯¹è±¡è¿›è¡Œé€ƒé€¸åˆ†æï¼Œå¦‚æœå‘ç°æŸä¸€ä¸ªå¯¹è±¡å¹¶æ²¡æœ‰é€ƒé€¸åˆ°æ–¹æ³•å¤–éƒ¨ï¼Œé‚£ä¹ˆå°±å¯èƒ½é€šè¿‡æ ‡é‡æ›¿æ¢æ¥å®ç°æ ˆä¸Šåˆ†é…ï¼Œè€Œé¿å…å †ä¸Šåˆ†é…å†…å­˜

âš ï¸ æ³¨æ„ ï¼š **åŸºæœ¬æ•°æ®ç±»å‹å­˜æ”¾åœ¨æ ˆä¸­æ˜¯ä¸€ä¸ªå¸¸è§çš„è¯¯åŒºï¼** åŸºæœ¬æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡å¦‚æœæ²¡æœ‰è¢« `static` ä¿®é¥°çš„è¯ï¼ˆä¸å»ºè®®è¿™ä¹ˆä½¿ç”¨ï¼Œåº”è¯¥è¦ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹ï¼‰ï¼Œå°±å­˜æ”¾åœ¨å †ä¸­ã€‚

```java
class BasicTypeVar{
  private int x;
}
```

## åŒ…è£…ç±»å‹çš„ç¼“å­˜æœºåˆ¶

**ä¸»è¦ç›®çš„ï¼š** æå‡æ€§èƒ½

- `Byte`,`Short`,`Integer`,`Long` è¿™ 4 ç§åŒ…è£…ç±»é»˜è®¤åˆ›å»ºäº†æ•°å€¼ [-128ï¼Œ127] çš„ç›¸åº”ç±»å‹çš„ç¼“å­˜æ•°æ®
- `Character` åˆ›å»ºäº†æ•°å€¼åœ¨ [0,127] èŒƒå›´çš„ç¼“å­˜æ•°æ®
- `Boolean` ç›´æ¥è¿”å› `True` or `False`ã€‚
- å¦‚æœè¶…å‡ºå¯¹åº”èŒƒå›´ä»ç„¶ä¼šå»åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œç¼“å­˜çš„èŒƒå›´åŒºé—´çš„å¤§å°åªæ˜¯åœ¨æ€§èƒ½å’Œèµ„æºä¹‹é—´çš„æƒè¡¡ã€‚
- ä¸¤ç§æµ®ç‚¹æ•°ç±»å‹çš„åŒ…è£…ç±» Float,Double å¹¶æ²¡æœ‰å®ç°ç¼“å­˜æœºåˆ¶ã€‚

> **Integerç¼“å­˜æºç ** 

```java
public static Integer valueOf(int i) {
    if (i >= IntegerCache.low && i <= IntegerCache.high)
        return IntegerCache.cache[i + (-IntegerCache.low)];
    return new Integer(i);
}
private static class IntegerCache {
    static final int low = -128;
    static final int high;
    static {
        // high value may be configured by property
        int h = 127;
    }
}
```

> **Characterç¼“å­˜æºç **

```java
public static Character valueOf(char c) {
    if (c <= 127) { // must cache
      return CharacterCache.cache[(int)c];
    }
    return new Character(c);
}

private static class CharacterCache {
    private CharacterCache(){}
    static final Character cache[] = new Character[127 + 1];
    static {
        for (int i = 0; i < cache.length; i++)
            cache[i] = new Character((char)i);
    }

}
```

> **Booleanç¼“å­˜æºç **

```java
public static Boolean valueOf(boolean b) {
    return (b ? TRUE : FALSE);
}
```

> ğŸ™‹â€â™‚ï¸ğŸŒ°

```java
Integer i1 = 33;
Integer i2 = 33;
System.out.println(i1 == i2);// è¾“å‡º true

Float i11 = 333f;
Float i22 = 333f;
System.out.println(i11 == i22);// è¾“å‡º false

Double i3 = 1.2;
Double i4 = 1.2;
System.out.println(i3 == i4);// è¾“å‡º false
```

```java
Integer i1 = 40;
Integer i2 = new Integer(40);
System.out.println(i1==i2); // false
```

Integer i1=40 è¿™ä¸€è¡Œä»£ç ä¼šå‘ç”Ÿè£…ç®±ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™è¡Œä»£ç ç­‰ä»·äº Integer i1=Integer.valueOf(40) ã€‚å› æ­¤ï¼Œi1 ç›´æ¥ä½¿ç”¨çš„æ˜¯ç¼“å­˜ä¸­çš„å¯¹è±¡ã€‚è€ŒInteger i2 = new Integer(40) ä¼šç›´æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚

> **æ‰€æœ‰æ•´å‹åŒ…è£…ç±»å¯¹è±¡ä¹‹é—´å€¼çš„æ¯”è¾ƒï¼Œå…¨éƒ¨ä½¿ç”¨ equals æ–¹æ³•æ¯”è¾ƒ**

![](https://img-blog.csdnimg.cn/20210422164544846.png)

## è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŠå…¶åŸç†

> **è£…ç®±ä¸æ‹†ç®±**

- è£…ç®±:åŸºæœ¬å¯¹è±¡ç”¨å®ƒä»¬å¯¹åº”çš„å¼•ç”¨ç±»å‹åŒ…è£…èµ·æ¥
- æ‹†ç®±:å°†åŒ…è£…ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹

> ğŸ™‹â€â™‚ï¸ğŸŒ°

```java
Integer i = 10;  //è£…ç®±
int n = i;   //æ‹†ç®±
```

ä¸Šè¿°ä¸¤è¡Œä»£ç å¯¹åº”çš„å­—èŠ‚ç 

```java

   L1

    LINENUMBER 8 L1

    ALOAD 0

    BIPUSH 10

    INVOKESTATIC java/lang/Integer.valueOf (I)Ljava/lang/Integer;

    PUTFIELD AutoBoxTest.i : Ljava/lang/Integer;

   L2

    LINENUMBER 9 L2

    ALOAD 0

    ALOAD 0

    GETFIELD AutoBoxTest.i : Ljava/lang/Integer;

    INVOKEVIRTUAL java/lang/Integer.intValue ()I

    PUTFIELD AutoBoxTest.n : I

    RETURN
```

ä»å­—èŠ‚ç ä¸­ï¼Œæˆ‘ä»¬å‘ç°è£…ç®±å…¶å®å°±æ˜¯è°ƒç”¨äº† åŒ…è£…ç±»çš„valueOf()æ–¹æ³•ï¼Œæ‹†ç®±å…¶å®å°±æ˜¯è°ƒç”¨äº† xxxValue()æ–¹æ³•ã€‚

å› æ­¤

- `Integer i = 10`ç­‰ä»·äº `Integer i = Integer.valueOf(10)`
- `int n = i` ç­‰ä»·äº `int n = i.intValue()`

**æ³¨æ„ï¼š** å¦‚æœé¢‘ç¹æ‹†è£…ç®±çš„è¯ï¼Œä¹Ÿä¼šä¸¥é‡å½±å“ç³»ç»Ÿçš„æ€§èƒ½ã€‚æˆ‘ä»¬åº”è¯¥å°½é‡é¿å…ä¸å¿…è¦çš„æ‹†è£…ç®±æ“ä½œã€‚

```java
private static long sum() {
    // åº”è¯¥ä½¿ç”¨ long è€Œä¸æ˜¯ Long
    Long sum = 0L;
    for (long i = 0; i <= Integer.MAX_VALUE; i++)
        sum += i;
    return sum;
}
```

## ä¸ºä»€ä¹ˆæµ®ç‚¹æ•°è¿ç®—æ—¶æœ‰ç²¾åº¦ä¸¢å¤±çš„é£é™©ï¼Ÿ

> **æµ®ç‚¹æ•°è¿ç®—ç²¾åº¦ä¸¢å¤±ä»£ç æ¼”ç¤ºï¼š**

```java
float a = 2.0f - 1.9f;
float b = 1.8f - 1.7f;
System.out.println(a);// 0.100000024
System.out.println(b);// 0.099999905
System.out.println(a == b);// false
```

> **ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ**

å› ä¸ºè®¡ç®—æœºæ˜¯äºŒè¿›åˆ¶çš„ï¼Œè€Œä¸”è®¡ç®—æœºåœ¨è¡¨ç¤ºä¸€ä¸ªæ•°å­—çš„æ—¶ï¼Œå®½åº¦æ˜¯æœ‰é™çš„ã€‚

è€Œå°æ•°å­˜å‚¨åœ¨è®¡ç®—æœºä¸­æ˜¯é€šè¿‡ ä¹˜2å–æ•´æ³• è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°ã€‚è¿™å›å¯¼è‡´å˜ä¸ºæ— é™å¾ªç¯çš„å°æ•°ã€‚

æ— é™å¾ªç¯çš„å°æ•°å­˜å‚¨åœ¨è®¡ç®—æœºæ—¶ï¼Œåªèƒ½è¢«æˆªæ–­ï¼Œæ‰€ä»¥å°±ä¼šå¯¼è‡´å°æ•°ç²¾åº¦å‘ç”ŸæŸå¤±çš„æƒ…å†µã€‚è¿™ä¹Ÿå°±æ˜¯è§£é‡Šäº†ä¸ºä»€ä¹ˆæµ®ç‚¹æ•°æ²¡æœ‰åŠæ³•ç”¨äºŒè¿›åˆ¶ç²¾ç¡®è¡¨ç¤ºã€‚

ğŸ™‹ğŸŒ°: åè¿›åˆ¶ä¸‹çš„ 0.2 å°±æ²¡åŠæ³•ç²¾ç¡®è½¬æ¢æˆäºŒè¿›åˆ¶å°æ•°
```java
// 0.2 è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°çš„è¿‡ç¨‹ä¸ºï¼Œä¸æ–­ä¹˜ä»¥ 2ï¼Œç›´åˆ°ä¸å­˜åœ¨å°æ•°ä¸ºæ­¢ï¼Œ
// åœ¨è¿™ä¸ªè®¡ç®—è¿‡ç¨‹ä¸­ï¼Œå¾—åˆ°çš„æ•´æ•°éƒ¨åˆ†ä»ä¸Šåˆ°ä¸‹æ’åˆ—å°±æ˜¯äºŒè¿›åˆ¶çš„ç»“æœã€‚
0.2 * 2 = 0.4 -> 0
0.4 * 2 = 0.8 -> 0
0.8 * 2 = 1.6 -> 1
0.6 * 2 = 1.2 -> 1
0.2 * 2 = 0.4 -> 0ï¼ˆå‘ç”Ÿå¾ªç¯ï¼‰
...
```

## å¦‚ä½•è§£å†³æµ®ç‚¹æ•°è¿ç®—ç²¾åº¦ä¸¢å¤±é—®é¢˜

` BigDecimal` å¯ä»¥å®ç°å¯¹æµ®ç‚¹æ•°çš„è¿ç®—ï¼Œä¸ä¼šé€ æˆç²¾åº¦ä¸¢å¤±ã€‚

é€šå¸¸æƒ…å†µä¸‹ï¼Œå¤§éƒ¨åˆ†éœ€è¦æµ®ç‚¹æ•°ç²¾ç¡®è¿ç®—ç»“æœçš„ä¸šåŠ¡åœºæ™¯ï¼ˆæ¯”å¦‚æ¶‰åŠåˆ°é’±çš„åœºæ™¯ï¼‰éƒ½æ˜¯é€šè¿‡ BigDecimal æ¥åšçš„ã€‚

```java
BigDecimal a = new BigDecimal("1.0");
BigDecimal b = new BigDecimal("0.9");
BigDecimal c = new BigDecimal("0.8");

BigDecimal x = a.subtract(b);
BigDecimal y = b.subtract(c);

System.out.println(x); /* 0.1 */
System.out.println(y); /* 0.1 */
System.out.println(Objects.equals(x, y)); /* true */
```

## BigDecimalè¯¦è§£

### BigDecimalå¸¸è§æ–¹æ³•

> **åˆ›å»º**

- ä½¿ç”¨ `BigDecimal` æ—¶ï¼Œä¸ºäº†é˜²æ­¢ç²¾åº¦ä¸¢å¤±ï¼Œæ¨èä½¿ç”¨
- `BigDecimal(String val)`æ„é€ æ–¹æ³•
- `BigDecimal.valueOf(double val)` é™æ€æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/javaguide/image-20211213102222601.png)

> **åŠ å‡ä¹˜é™¤**

- `add` æ–¹æ³•ç”¨äºå°†ä¸¤ä¸ª `BigDecimal` å¯¹è±¡ç›¸åŠ 
- `subtract` æ–¹æ³•ç”¨äºå°†ä¸¤ä¸ª `BigDecimal` å¯¹è±¡ç›¸å‡
- `multiply` æ–¹æ³•ç”¨äºå°†ä¸¤ä¸ª `BigDecimal` å¯¹è±¡ç›¸ä¹˜
- `divide` æ–¹æ³•ç”¨äºå°†ä¸¤ä¸ª `BigDecimal` å¯¹è±¡ç›¸é™¤

```java
BigDecimal a = new BigDecimal("1.0");
BigDecimal b = new BigDecimal("0.9");
System.out.println(a.add(b));// 1.9
System.out.println(a.subtract(b));// 0.1
System.out.println(a.multiply(b));// 0.90
System.out.println(a.divide(b));// æ— æ³•é™¤å°½ï¼ŒæŠ›å‡º ArithmeticException å¼‚å¸¸
System.out.println(a.divide(b, 2, RoundingMode.HALF_UP));// 1.11
```

**æ³¨æ„:** åœ¨ä½¿ç”¨ `divide` æ–¹æ³•çš„æ—¶å€™å°½é‡ä½¿ç”¨ 3 ä¸ªå‚æ•°ç‰ˆæœ¬ï¼Œå¹¶ä¸”`RoundingMode` ä¸è¦é€‰æ‹© `UNNECESSARY`ï¼Œå¦åˆ™å¾ˆå¯èƒ½ä¼šé‡åˆ° `ArithmeticException`ï¼ˆæ— æ³•é™¤å°½å‡ºç°æ— é™å¾ªç¯å°æ•°çš„æ—¶å€™ï¼‰ï¼Œå…¶ä¸­ `scale` è¡¨ç¤ºè¦ä¿ç•™å‡ ä½å°æ•°ï¼Œ`roundingMode` ä»£è¡¨ä¿ç•™è§„åˆ™ã€‚

ä¸‹é¢åˆ—ä¸¾äº†ä¿ç•™è§„åˆ™:

```java
public enum RoundingMode {
    // 2.5 -> 3 , 1.6 -> 2
    // -1.6 -> -2 , -2.5 -> -3
    UP(BigDecimal.ROUND_UP),
    // 2.5 -> 2 , 1.6 -> 1
    // -1.6 -> -1 , -2.5 -> -2
    DOWN(BigDecimal.ROUND_DOWN),
    // 2.5 -> 3 , 1.6 -> 2
    // -1.6 -> -1 , -2.5 -> -2
    CEILING(BigDecimal.ROUND_CEILING),
    // 2.5 -> 2 , 1.6 -> 1
    // -1.6 -> -2 , -2.5 -> -3
    FLOOR(BigDecimal.ROUND_FLOOR),
    // 2.5 -> 3 , 1.6 -> 2
    // -1.6 -> -2 , -2.5 -> -3
    HALF_UP(BigDecimal.ROUND_HALF_UP),
    //......
}
```

> **å¤§å°æ¯”è¾ƒ**

`a.compareTo(b)`ï¼šè¿”å›-1 è¡¨ç¤º a < b, 0 è¡¨ç¤º a = b, 1 è¡¨ç¤º a å¤§äº bã€‚

```java
BigDecimal a = new BigDecimal("1.0");
BigDecimal b = new BigDecimal("0.9");
System.out.println(a.compareTo(b));// 1
```

> **ä¿ç•™å°æ•°ä½**
é€šè¿‡ `setScale`æ–¹æ³•è®¾ç½®ä¿ç•™å‡ ä½å°æ•°ä»¥åŠä¿ç•™è§„åˆ™ã€‚ä¿ç•™è§„åˆ™æœ‰æŒºå¤šç§ï¼Œä¸éœ€è¦è®°ï¼ŒIDEA ä¼šæç¤ºã€‚

```java
BigDecimal m = new BigDecimal("1.255433");
BigDecimal n = m.setScale(3,RoundingMode.HALF_DOWN);
System.out.println(n);// 1.255
```

> **BigDecimalæ¯”è¾ƒ**

ã€Šé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹ä¸­æåˆ°ï¼š

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/basis/image-20220714161315993.png)

> **ä½¿ç”¨`equals`è¿›è¡Œç­‰å€¼æ¯”è¾ƒ**

BigDecimal ä½¿ç”¨ equals() æ–¹æ³•è¿›è¡Œç­‰å€¼æ¯”è¾ƒå‡ºç°é—®é¢˜çš„ä»£ç ç¤ºä¾‹ï¼š

```java
BigDecimal a = new BigDecimal("1");
BigDecimal b = new BigDecimal("1.0");
System.out.println(a.equals(b));//false
```

å‡ºç°ä¸Šè¿°é—®é¢˜çš„åŸå› åœ¨äº`equals()`æ–¹æ³•ä¸ä»…ä¼š**æ¯”è¾ƒå€¼å¤§å°**ï¼Œè¿˜ä¼š**æ¯”è¾ƒç²¾åº¦**

1.0 çš„ scale æ˜¯ 1ï¼Œ1 çš„ scale æ˜¯ 0ï¼Œå› æ­¤ a.equals(b) çš„ç»“æœæ˜¯ falseã€‚

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/basis/image-20220714164706390.png)

> **`compareTo()` æ–¹æ³•**

compareTo() æ–¹æ³•æ¯”è¾ƒçš„æ—¶å€™ä¼šå¿½ç•¥ç²¾åº¦ã€‚

compareTo() æ–¹æ³•å¯ä»¥æ¯”è¾ƒä¸¤ä¸ª BigDecimal çš„å€¼ï¼Œå¦‚æœç›¸ç­‰å°±è¿”å› 0ï¼Œå¦‚æœç¬¬ 1 ä¸ªæ•°æ¯”ç¬¬ 2 ä¸ªæ•°å¤§åˆ™è¿”å› 1ï¼Œåä¹‹è¿”å›-1ã€‚

```java
BigDecimal a = new BigDecimal("1");
BigDecimal b = new BigDecimal("1.0");
System.out.println(a.compareTo(b));//0
```

### BigDecimalå·¥å…·ç±»

```java
import java.math.BigDecimal;
import java.math.RoundingMode;

/**
 * ç®€åŒ–BigDecimalè®¡ç®—çš„å°å·¥å…·ç±»
 */
public class BigDecimalUtil {

    /**
     * é»˜è®¤é™¤æ³•è¿ç®—ç²¾åº¦
     */
    private static final int DEF_DIV_SCALE = 10;

    private BigDecimalUtil() {
    }

    /**
     * æä¾›ç²¾ç¡®çš„åŠ æ³•è¿ç®—ã€‚
     *
     * @param v1 è¢«åŠ æ•°
     * @param v2 åŠ æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„å’Œ
     */
    public static double add(double v1, double v2) {
        BigDecimal b1 = BigDecimal.valueOf(v1);
        BigDecimal b2 = BigDecimal.valueOf(v2);
        return b1.add(b2).doubleValue();
    }

    /**
     * æä¾›ç²¾ç¡®çš„å‡æ³•è¿ç®—ã€‚
     *
     * @param v1 è¢«å‡æ•°
     * @param v2 å‡æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„å·®
     */
    public static double subtract(double v1, double v2) {
        BigDecimal b1 = BigDecimal.valueOf(v1);
        BigDecimal b2 = BigDecimal.valueOf(v2);
        return b1.subtract(b2).doubleValue();
    }

    /**
     * æä¾›ç²¾ç¡®çš„ä¹˜æ³•è¿ç®—ã€‚
     *
     * @param v1 è¢«ä¹˜æ•°
     * @param v2 ä¹˜æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„ç§¯
     */
    public static double multiply(double v1, double v2) {
        BigDecimal b1 = BigDecimal.valueOf(v1);
        BigDecimal b2 = BigDecimal.valueOf(v2);
        return b1.multiply(b2).doubleValue();
    }

    /**
     * æä¾›ï¼ˆç›¸å¯¹ï¼‰ç²¾ç¡®çš„é™¤æ³•è¿ç®—ï¼Œå½“å‘ç”Ÿé™¤ä¸å°½çš„æƒ…å†µæ—¶ï¼Œç²¾ç¡®åˆ°
     * å°æ•°ç‚¹ä»¥å10ä½ï¼Œä»¥åçš„æ•°å­—å››èˆäº”å…¥ã€‚
     *
     * @param v1 è¢«é™¤æ•°
     * @param v2 é™¤æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„å•†
     */
    public static double divide(double v1, double v2) {
        return divide(v1, v2, DEF_DIV_SCALE);
    }

    /**
     * æä¾›ï¼ˆç›¸å¯¹ï¼‰ç²¾ç¡®çš„é™¤æ³•è¿ç®—ã€‚å½“å‘ç”Ÿé™¤ä¸å°½çš„æƒ…å†µæ—¶ï¼Œç”±scaleå‚æ•°æŒ‡
     * å®šç²¾åº¦ï¼Œä»¥åçš„æ•°å­—å››èˆäº”å…¥ã€‚
     *
     * @param v1    è¢«é™¤æ•°
     * @param v2    é™¤æ•°
     * @param scale è¡¨ç¤ºè¡¨ç¤ºéœ€è¦ç²¾ç¡®åˆ°å°æ•°ç‚¹ä»¥åå‡ ä½ã€‚
     * @return ä¸¤ä¸ªå‚æ•°çš„å•†
     */
    public static double divide(double v1, double v2, int scale) {
        if (scale < 0) {
            throw new IllegalArgumentException(
                    "The scale must be a positive integer or zero");
        }
        BigDecimal b1 = BigDecimal.valueOf(v1);
        BigDecimal b2 = BigDecimal.valueOf(v2);
        return b1.divide(b2, scale, RoundingMode.HALF_UP).doubleValue();
    }

    /**
     * æä¾›ç²¾ç¡®çš„å°æ•°ä½å››èˆäº”å…¥å¤„ç†ã€‚
     *
     * @param v     éœ€è¦å››èˆäº”å…¥çš„æ•°å­—
     * @param scale å°æ•°ç‚¹åä¿ç•™å‡ ä½
     * @return å››èˆäº”å…¥åçš„ç»“æœ
     */
    public static double round(double v, int scale) {
        if (scale < 0) {
            throw new IllegalArgumentException(
                    "The scale must be a positive integer or zero");
        }
        BigDecimal b = BigDecimal.valueOf(v);
        BigDecimal one = new BigDecimal("1");
        return b.divide(one, scale, RoundingMode.HALF_UP).doubleValue();
    }

    /**
     * æä¾›ç²¾ç¡®çš„ç±»å‹è½¬æ¢(Float)
     *
     * @param v éœ€è¦è¢«è½¬æ¢çš„æ•°å­—
     * @return è¿”å›è½¬æ¢ç»“æœ
     */
    public static float convertToFloat(double v) {
        BigDecimal b = new BigDecimal(v);
        return b.floatValue();
    }

    /**
     * æä¾›ç²¾ç¡®çš„ç±»å‹è½¬æ¢(Int)ä¸è¿›è¡Œå››èˆäº”å…¥
     *
     * @param v éœ€è¦è¢«è½¬æ¢çš„æ•°å­—
     * @return è¿”å›è½¬æ¢ç»“æœ
     */
    public static int convertsToInt(double v) {
        BigDecimal b = new BigDecimal(v);
        return b.intValue();
    }

    /**
     * æä¾›ç²¾ç¡®çš„ç±»å‹è½¬æ¢(Long)
     *
     * @param v éœ€è¦è¢«è½¬æ¢çš„æ•°å­—
     * @return è¿”å›è½¬æ¢ç»“æœ
     */
    public static long convertsToLong(double v) {
        BigDecimal b = new BigDecimal(v);
        return b.longValue();
    }

    /**
     * è¿”å›ä¸¤ä¸ªæ•°ä¸­å¤§çš„ä¸€ä¸ªå€¼
     *
     * @param v1 éœ€è¦è¢«å¯¹æ¯”çš„ç¬¬ä¸€ä¸ªæ•°
     * @param v2 éœ€è¦è¢«å¯¹æ¯”çš„ç¬¬äºŒä¸ªæ•°
     * @return è¿”å›ä¸¤ä¸ªæ•°ä¸­å¤§çš„ä¸€ä¸ªå€¼
     */
    public static double returnMax(double v1, double v2) {
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v2);
        return b1.max(b2).doubleValue();
    }

    /**
     * è¿”å›ä¸¤ä¸ªæ•°ä¸­å°çš„ä¸€ä¸ªå€¼
     *
     * @param v1 éœ€è¦è¢«å¯¹æ¯”çš„ç¬¬ä¸€ä¸ªæ•°
     * @param v2 éœ€è¦è¢«å¯¹æ¯”çš„ç¬¬äºŒä¸ªæ•°
     * @return è¿”å›ä¸¤ä¸ªæ•°ä¸­å°çš„ä¸€ä¸ªå€¼
     */
    public static double returnMin(double v1, double v2) {
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v2);
        return b1.min(b2).doubleValue();
    }

    /**
     * ç²¾ç¡®å¯¹æ¯”ä¸¤ä¸ªæ•°å­—
     *
     * @param v1 éœ€è¦è¢«å¯¹æ¯”çš„ç¬¬ä¸€ä¸ªæ•°
     * @param v2 éœ€è¦è¢«å¯¹æ¯”çš„ç¬¬äºŒä¸ªæ•°
     * @return å¦‚æœä¸¤ä¸ªæ•°ä¸€æ ·åˆ™è¿”å›0ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ•°æ¯”ç¬¬äºŒä¸ªæ•°å¤§åˆ™è¿”å›1ï¼Œåä¹‹è¿”å›-1
     */
    public static int compareTo(double v1, double v2) {
        BigDecimal b1 = BigDecimal.valueOf(v1);
        BigDecimal b2 = BigDecimal.valueOf(v2);
        return b1.compareTo(b2);
    }

}
```
---

## è¶…è¿‡longæ•´å‹çš„æ•°æ®åº”è¯¥å¦‚ä½•è¡¨ç¤ºï¼Ÿ

åŸºæœ¬æ•°å€¼ç±»å‹éƒ½æœ‰ä¸€ä¸ªè¡¨è¾¾èŒƒå›´ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªèŒƒå›´å°±ä¼šæœ‰æ•°å€¼æº¢å‡ºçš„é£é™©ã€‚

åœ¨ Java ä¸­ï¼Œ64 ä½ long æ•´å‹æ˜¯æœ€å¤§çš„æ•´æ•°ç±»å‹ã€‚

```java
long l = Long.MAX_VALUE;
System.out.println(l + 1); // -9223372036854775808
System.out.println(l + 1 == Long.MIN_VALUE); // true
```

`BigInteger` å†…éƒ¨ä½¿ç”¨ `int[]` æ•°ç»„æ¥å­˜å‚¨ä»»æ„å¤§å°çš„æ•´å½¢æ•°æ®ã€‚

ç›¸å¯¹äºå¸¸è§„æ•´æ•°ç±»å‹çš„è¿ç®—æ¥è¯´ï¼Œ`BigInteger` è¿ç®—çš„æ•ˆç‡ä¼šç›¸å¯¹è¾ƒä½ã€‚

---

# å››ã€é¢å‘å¯¹è±¡åŸºç¡€

## é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«

- **é¢å‘è¿‡ç¨‹:** å°†è§£å†³é—®é¢˜çš„æ–¹æ³•æ‹†åˆ†ä¸ºä¸€ä¸ªä¸ªæ–¹æ³•ï¼Œé€šè¿‡æ‰§è¡Œä¸€ä¸ªä¸ªæ–¹æ³•æ¥è§£å†³é—®é¢˜
- **é¢å‘å¯¹è±¡ï¼š** å…ˆæŠ½ç¦»å‡ºå¯¹è±¡ï¼Œç„¶åç”¨**å¯¹è±¡æ‰§è¡Œæ–¹æ³•**è§£å†³é—®é¢˜ã€‚

é¢å‘å¯¹è±¡å¼€å‘çš„ç¨‹åºä¸€èˆ¬æ›´å®¹æ˜“ç»´æŠ¤ã€æ˜“å¤ç”¨ã€æ˜“æ‰©å±•ã€‚

---

## åˆ›å»ºä¸€ä¸ªå¯¹è±¡ç”¨ä»€ä¹ˆè¿ç®—ç¬¦ï¼Ÿå¯¹è±¡å®ä½“ä¸å¯¹è±¡å¼•ç”¨æœ‰ä½•ä¸åŒï¼Ÿ

åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä½¿ç”¨`new`è¿ç®—ç¬¦

å¯¹è±¡å®ä½“åœ¨å †å†…å­˜ä¸­ï¼Œå¯¹è±¡å¼•ç”¨æŒ‡å‘å¯¹è±¡å®ä½“ï¼Œå¯¹è±¡å¼•ç”¨æ”¾åœ¨æ ˆå†…å­˜ä¸­ã€‚

ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å¯ä»¥æŒ‡å‘0ä¸ªæˆ–1ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªå¯¹è±¡å®ä½“å¯ä»¥nä¸ªå¼•ç”¨æŒ‡å‘ä»–ã€‚

---

## å¯¹è±¡ç›¸ç­‰å’Œå¼•ç”¨ç›¸ç­‰çš„åŒºåˆ«

**å¯¹è±¡ç›¸ç­‰ï¼š** ä¸€èˆ¬æ¯”è¾ƒçš„æ˜¯å†…å­˜ä¸­å­˜æ”¾çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚
**å¼•ç”¨ç›¸ç­‰ï¼š** ä¸€èˆ¬æ¯”è¾ƒå®ƒä»¬æŒ‡å‘çš„å†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰ã€‚

---

## ç±»çš„æ„é€ æ–¹æ³•çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ

æ„é€ æ–¹æ³•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•ï¼Œä¸»è¦ä½œç”¨æ˜¯å®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–ã€‚

---

## å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å£°æ˜æ„é€ æ–¹æ³•ï¼Œè¯¥ç¨‹åºèƒ½æ­£ç¡®è¿è¡Œå—ï¼Ÿ

å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å£°æ˜æ„é€ æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œï¼å› ä¸ºä¸€ä¸ªç±»å³ä½¿æ²¡æœ‰å£°æ˜æ„é€ æ–¹æ³•ä¹Ÿä¼šæœ‰é»˜è®¤çš„ä¸å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•ã€‚

---

## æ„é€ æ–¹æ³•æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿæ˜¯å¦å¯ä»¥è¢«Overrideï¼Ÿ

- åå­—ä¸ç±»çš„åå­—ç›¸åŒ
- æ²¡æœ‰è¿”å›å€¼ï¼Œä½†ä¸èƒ½ç”¨voidå£°æ˜æ„é€ å‡½æ•°
- æ–°å»ºç±»çš„å¯¹è±¡æ—¶è‡ªåŠ¨æ‰§è¡Œï¼Œæ— éœ€è°ƒç”¨ã€‚

æ„é€ æ–¹æ³•ä¸èƒ½è¢«Override(é‡å†™)ï¼Œä½†æ˜¯å¯ä»¥Overload(é‡è½½)ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç±»ä¸­æœ‰å¤šä¸ªæ„é€ å‡½æ•°ã€‚

---

## é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹å¾

> **å°è£…**

å°è£…æ˜¯æŒ‡æŠŠä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯(å³å±æ€§)éšè—åœ¨å¯¹è±¡å†…éƒ¨ï¼Œ**ä¸å…è®¸å¤–éƒ¨å¯¹è±¡ç›´æ¥è®¿é—®å¯¹è±¡çš„å†…éƒ¨ä¿¡æ¯**ã€‚

ä½†å¯ä»¥æä¾›ä¸€äº›å¯ä»¥è¢«å¤–ç•Œè®¿é—®çš„æ–¹æ³•æ¥æ“ä½œå±æ€§

```java
public class Student {
    private int id;//idå±æ€§ç§æœ‰åŒ–
    private String name;//nameå±æ€§ç§æœ‰åŒ–

    //è·å–idçš„æ–¹æ³•
    public int getId() {
        return id;
    }

    //è®¾ç½®idçš„æ–¹æ³•
    public void setId(int id) {
        this.id = id;
    }

    //è·å–nameçš„æ–¹æ³•
    public String getName() {
        return name;
    }

    //è®¾ç½®nameçš„æ–¹æ³•
    public void setName(String name) {
        this.name = name;
    }
}
```

> **ç»§æ‰¿**

ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œç›¸äº’ä¹‹é—´ç»å¸¸æœ‰ä¸€å®šæ•°é‡çš„å…±åŒç‚¹ã€‚

ç»§æ‰¿æ˜¯ä½¿ç”¨å·²å­˜åœ¨çš„ç±»çš„å®šä¹‰ä½œä¸ºåŸºç¡€å»ºç«‹æ–°ç±»çš„æŠ€æœ¯ï¼Œæ–°ç±»çš„å®šä¹‰å¯ä»¥å¢åŠ æ–°çš„æ•°æ®æˆ–æ–°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½é€‰æ‹©æ€§åœ°ç»§æ‰¿çˆ¶ç±»ã€‚é€šè¿‡ä½¿ç”¨ç»§æ‰¿ï¼Œå¯ä»¥å¿«é€Ÿåœ°åˆ›å»ºæ–°çš„ç±»ï¼Œå¯ä»¥æé«˜ä»£ç çš„é‡ç”¨ï¼Œç¨‹åºçš„å¯ç»´æŠ¤æ€§ï¼ŒèŠ‚çœå¤§é‡åˆ›å»ºæ–°ç±»çš„æ—¶é—´ ï¼Œæé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚

**ç»§æ‰¿éœ€è®°ä½å¦‚ä¸‹3ç‚¹:**

- å­ç±»æ‹¥æœ‰çˆ¶ç±»å¯¹è±¡æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŒ…æ‹¬ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•ï¼Œä½†æ˜¯çˆ¶ç±»ä¸­çš„ç§æœ‰å±æ€§å’Œæ–¹æ³•æ˜¯æ— æ³•è®¿é—®ï¼Œåªæ˜¯æ‹¥æœ‰
- å­ç±»å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ï¼Œå³å­ç±»å¯ä»¥å¯¹çˆ¶ç±»è¿›è¡Œæ‰©å±•
- å­ç±»å¯ä»¥ç”¨è‡ªå·±çš„æ–¹å¼å®ç°çˆ¶ç±»çš„æ–¹æ³•(é‡å†™)

> **å¤šæ€**

å¤šæ€ï¼Œé¡¾åæ€ä¹‰ï¼Œè¡¨ç¤ºä¸€ä¸ªå¯¹è±¡å…·æœ‰å¤šç§çŠ¶æ€ï¼Œå…·ä½“è¡¨ç°ä¸º**çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»çš„å®ä¾‹ã€‚**

```java
List<Integer> list = new ArrayList<Integer>();
```

**å¤šç±»çš„ç‰¹ç‚¹**

- å¯¹è±¡ç±»å‹å’Œå¼•ç”¨ç±»å‹ä¹‹é—´å…·æœ‰ç»§æ‰¿(ç±»)/å®ç°(æ¥å£)çš„å…³ç³»ï¼›
- å¼•ç”¨ç±»å‹å‘å‡ºçš„æ–¹æ³•è°ƒç”¨åˆ°åº•åœ¨å“ªä¸ªç±»ä¸­ï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½ç¡®å®šï¼›
- å¤šæ€ä¸èƒ½è°ƒç”¨"åªåœ¨å­ç±»ä¸­å­˜åœ¨ä½†çˆ¶ç±»ä¸­ä¸å­˜åœ¨çš„æ–¹æ³•"
- å¦‚æœå­ç±»é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼ŒçœŸæ­£æ‰§è¡Œçš„æ˜¯å­ç±»Overrideçš„æ–¹æ³•ã€‚å¦‚æœå­ç±»æ²¡æœ‰çˆ¶ç±»çš„æ–¹æ³•ï¼Œæ‰§è¡Œçš„æ˜¯çˆ¶ç±»çš„æ–¹æ³• 

---

## æ¥å£å’ŒæŠ½è±¡ç±»çš„å¼‚åŒ

> **å…±åŒç‚¹**

- éƒ½ä¸èƒ½è¢«å®ä¾‹åŒ–
- éƒ½å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•
- éƒ½å¯ä»¥æ‹¥æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•(Java 8 å¯ä»¥ç”¨`default`å…³é”®å­—åœ¨æ¥å£ä¸­å®šä¹‰é»˜è®¤æ–¹æ³•)

> **ä¸åŒç‚¹**

- æ¥å£ä¸»è¦æ˜¯**å¯¹ç±»çš„è¡Œä¸ºè¿›è¡Œçº¦æŸ**ï¼Œå®ç°äº†æŸä¸ªæ¥å£å°±å…·æœ‰äº†å¯¹åº”çš„è¡Œä¸ºã€‚æŠ½è±¡ç±»ä¸»è¦ç”¨**äºä»£ç å¤ç”¨**ï¼Œå¼ºè°ƒçš„æ˜¯æ‰€å±å…³ç³»ã€‚
- æŠ½è±¡ç±»åªèƒ½è¢«å•ç»§æ‰¿ï¼Œä½†æ¥å£å¯ä»¥è¢«å¤šå®ç°
- æ¥å£ä¸­çš„æˆå‘˜å˜é‡åªèƒ½æ˜¯`public static final`ç±»å‹çš„ï¼Œä¸èƒ½è¢«ä¿®æ”¹ä¸”å¿…é¡»æœ‰åˆå§‹å€¼ã€‚è€ŒæŠ½è±¡å¯¹è±¡çš„æˆå‘˜å˜é‡é»˜è®¤ `default`ï¼Œå¯åœ¨å­ç±»ä¸­é‡æ–°å®šä¹‰ï¼Œä¹Ÿå¯ä»¥è¢«é‡æ–°èµ‹å€¼ã€‚
  
---

## æ·±æ‹·è´ã€æµ…æ‹·è´å’Œå¼•ç”¨æ‹·è´

> **åŸºæœ¬æ¦‚å¿µ**

- æ·±æ‹·è´:å®Œå…¨å¤åˆ¶æ•´ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬è¿™ä¸ªå¯¹è±¡æ‰€åŒ…å«çš„å†…éƒ¨å¯¹è±¡
- æµ…æ‹·è´:æµ…æ‹·è´ä¼šåœ¨å †ä¸Šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡(åŒºåˆ«äºå¼•ç”¨æ‹·è´),å¦‚æœåŸå¯¹è±¡å†…éƒ¨å†…éƒ¨å±æ€§æ˜¯å¼•ç”¨ç±»å‹çš„è¯ï¼Œæµ…æ‹·è´ä¼šç›´æ¥å¤åˆ¶å†…éƒ¨å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œå³æ‹·è´å¯¹è±¡äºåŸå¯¹è±¡å…±ç”¨ä¸€ä¸ªå†…éƒ¨å¯¹è±¡ã€‚
- å¼•ç”¨æ‹·è´:ä¸¤ä¸ªä¸åŒå¯¹è±¡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/basis/shallow&deep-copy.png)

> ğŸ™‹â€â™‚ï¸ğŸŒ°

**æµ…æ‹·è´**

ä¸‹è¾¹ç¤ºä¾‹å®ç°äº†Cloneableæ¥å£ï¼Œå¹¶é‡å†™äº†clone()æ–¹æ³•ã€‚

clone() æ–¹æ³•çš„å®ç°å¾ˆç®€å•ï¼Œç›´æ¥è°ƒç”¨çš„æ˜¯çˆ¶ç±» Object çš„ clone() æ–¹æ³•ã€‚

```java
public class Address implements Cloneable{
    private String name;
    // çœç•¥æ„é€ å‡½æ•°ã€Getter&Setteræ–¹æ³•
    @Override
    public Address clone() {
        try {
            return (Address) super.clone();
        } catch (CloneNotSupportedException e) {
            throw new AssertionError();
        }
    }
}

public class Person implements Cloneable {
    private Address address;
    // çœç•¥æ„é€ å‡½æ•°ã€Getter&Setteræ–¹æ³•
    @Override
    public Person clone() {
        try {
            Person person = (Person) super.clone();
            return person;
        } catch (CloneNotSupportedException e) {
            throw new AssertionError();
        }
    }
}
```

æµ‹è¯•

```java
Person person1 = new Person(new Address("æ­¦æ±‰"));
Person person1Copy = person1.clone();
// true
System.out.println(person1.getAddress() == person1Copy.getAddress());
```
ä»è¾“å‡ºç»“æ„å°±å¯ä»¥çœ‹å‡ºï¼Œ person1 çš„å…‹éš†å¯¹è±¡å’Œ person1 ä½¿ç”¨çš„ä»ç„¶æ˜¯åŒä¸€ä¸ª Address å¯¹è±¡ã€‚

**æ·±æ‹·è´**

```java
@Override
public Person clone() {
    try {
        Person person = (Person) super.clone();
        person.setAddress(person.getAddress().clone());
        return person;
    } catch (CloneNotSupportedException e) {
        throw new AssertionError();
    }
}
```

æµ‹è¯•:

```java
Person person1 = new Person(new Address("æ­¦æ±‰"));
Person person1Copy = person1.clone();
// false
System.out.println(person1.getAddress() == person1Copy.getAddress());
```

---

# äº”ã€Javaå¸¸è§ç±»

## Object

### Objectç±»çš„å¸¸è§æ–¹æ³•ï¼Ÿ

Object ç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼Œæ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ã€‚å®ƒä¸»è¦æä¾›äº†ä»¥ä¸‹ 11 ä¸ªæ–¹æ³•ï¼š

```java
/**
 * native æ–¹æ³•ï¼Œç”¨äºè¿”å›å½“å‰è¿è¡Œæ—¶å¯¹è±¡çš„ Class å¯¹è±¡ï¼Œä½¿ç”¨äº† final å…³é”®å­—ä¿®é¥°ï¼Œæ•…ä¸å…è®¸å­ç±»é‡å†™ã€‚
 */
public final native Class<?> getClass()
/**
 * native æ–¹æ³•ï¼Œç”¨äºè¿”å›å¯¹è±¡çš„å“ˆå¸Œç ï¼Œä¸»è¦ä½¿ç”¨åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæ¯”å¦‚ JDK ä¸­çš„HashMapã€‚
 */
public native int hashCode()
/**
 * ç”¨äºæ¯”è¾ƒ 2 ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰ï¼ŒString ç±»å¯¹è¯¥æ–¹æ³•è¿›è¡Œäº†é‡å†™ä»¥ç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²çš„å€¼æ˜¯å¦ç›¸ç­‰ã€‚
 */
public boolean equals(Object obj)
/**
 * naitive æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå¹¶è¿”å›å½“å‰å¯¹è±¡çš„ä¸€ä»½æ‹·è´ã€‚
 */
protected native Object clone() throws CloneNotSupportedException
/**
 * è¿”å›ç±»çš„åå­—å®ä¾‹çš„å“ˆå¸Œç çš„ 16 è¿›åˆ¶çš„å­—ç¬¦ä¸²ã€‚å»ºè®® Object æ‰€æœ‰çš„å­ç±»éƒ½é‡å†™è¿™ä¸ªæ–¹æ³•ã€‚
 */
public String toString()
/**
 * native æ–¹æ³•ï¼Œå¹¶ä¸”ä¸èƒ½é‡å†™ã€‚å”¤é†’ä¸€ä¸ªåœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„çº¿ç¨‹(ç›‘è§†å™¨ç›¸å½“äºå°±æ˜¯é”çš„æ¦‚å¿µ)ã€‚å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åœ¨ç­‰å¾…åªä¼šä»»æ„å”¤é†’ä¸€ä¸ªã€‚
 */
public final native void notify()
/**
 * native æ–¹æ³•ï¼Œå¹¶ä¸”ä¸èƒ½é‡å†™ã€‚è·Ÿ notify ä¸€æ ·ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ä¼šå”¤é†’åœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹ã€‚
 */
public final native void notifyAll()
/**
 * nativeæ–¹æ³•ï¼Œå¹¶ä¸”ä¸èƒ½é‡å†™ã€‚æš‚åœçº¿ç¨‹çš„æ‰§è¡Œã€‚æ³¨æ„ï¼šsleep æ–¹æ³•æ²¡æœ‰é‡Šæ”¾é”ï¼Œè€Œ wait æ–¹æ³•é‡Šæ”¾äº†é” ï¼Œtimeout æ˜¯ç­‰å¾…æ—¶é—´ã€‚
 */
public final native void wait(long timeout) throws InterruptedException
/**
 * å¤šäº† nanos å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°è¡¨ç¤ºé¢å¤–æ—¶é—´ï¼ˆä»¥æ¯«å¾®ç§’ä¸ºå•ä½ï¼ŒèŒƒå›´æ˜¯ 0-999999ï¼‰ã€‚ æ‰€ä»¥è¶…æ—¶çš„æ—¶é—´è¿˜éœ€è¦åŠ ä¸Š nanos æ¯«ç§’ã€‚ã€‚
 */
public final void wait(long timeout, int nanos) throws InterruptedException
/**
 * è·Ÿä¹‹å‰çš„2ä¸ªwaitæ–¹æ³•ä¸€æ ·ï¼Œåªä¸è¿‡è¯¥æ–¹æ³•ä¸€ç›´ç­‰å¾…ï¼Œæ²¡æœ‰è¶…æ—¶æ—¶é—´è¿™ä¸ªæ¦‚å¿µ
 */
public final void wait() throws InterruptedException
/**
 * å®ä¾‹è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ—¶å€™è§¦å‘çš„æ“ä½œ
 */
protected void finalize() throws Throwable { }
```

---

### == å’Œ equalsçš„åŒºåˆ«

> **==**

- å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¥è¯´ï¼Œ`==`æ¯”è¾ƒçš„æ˜¯å€¼ã€‚
- å¯¹äºå¼•ç”¨æ•°æ®ç±»å‹æ¥è¯´ï¼Œ`==`æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚

å› ä¸º Java åªæœ‰å€¼ä¼ é€’ï¼Œæ‰€ä»¥ï¼Œå¯¹äº == æ¥è¯´ï¼Œä¸ç®¡æ˜¯æ¯”è¾ƒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿˜æ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡ï¼Œå…¶æœ¬è´¨æ¯”è¾ƒçš„éƒ½æ˜¯å€¼ï¼Œåªæ˜¯å¼•ç”¨ç±»å‹å˜é‡å­˜çš„å€¼æ˜¯å¯¹è±¡çš„åœ°å€ã€‚

> **equals()**

- `equals()` **ä¸èƒ½ç”¨äºåˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡**ï¼Œåªèƒ½ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚
- `equals()`æ–¹æ³•å­˜åœ¨äº`Object`ç±»ä¸­ï¼Œè€Œ`Object`ç±»æ˜¯æ‰€æœ‰ç±»çš„ç›´æ¥æˆ–é—´æ¥çˆ¶ç±»ï¼Œå› æ­¤æ‰€æœ‰çš„ç±»éƒ½æœ‰`equals()`æ–¹æ³•ã€‚
- `equals()`æ–¹æ³•å­˜åœ¨ä¸¤ç§ä½¿ç”¨æƒ…å†µ:
  - **ç±»æ²¡æœ‰é‡å†™`equals()`æ–¹æ³•:** é€šè¿‡`equals()`æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œç­‰ä»·äºé€šè¿‡â€œ==â€æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ï¼Œ**ä½¿ç”¨çš„é»˜è®¤æ˜¯ Objectç±»equals()æ–¹æ³•**ã€‚
  - **ç±»é‡å†™äº† `equals()`æ–¹æ³•:** ä¸€èˆ¬æˆ‘ä»¬éƒ½é‡å†™ `equals()`æ–¹æ³•æ¥ **æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡ä¸­çš„å±æ€§æ˜¯å¦ç›¸ç­‰**ï¼›è‹¥å®ƒä»¬çš„å±æ€§ç›¸ç­‰ï¼Œåˆ™è¿”å› true(å³ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰)ã€‚

`Object`ç±»`equals()`æ–¹æ³•ï¼š

```java
public boolean equals(Object obj) {
     return (this == obj);
}
```

> ğŸ™â€â™‚ï¸ğŸŒ°

è¿™é‡Œåªæ˜¯ä¸ºäº†ä¸¾ä¾‹ã€‚å®é™…ä¸Šï¼Œä½ æŒ‰ç…§ä¸‹é¢è¿™ç§å†™æ³•çš„è¯ï¼Œåƒ IDEA è¿™ç§æ¯”è¾ƒæ™ºèƒ½çš„ IDE éƒ½ä¼šæç¤ºä½ å°† `==` æ¢æˆ `equals()`

```java
String a = new String("ab"); // a ä¸ºä¸€ä¸ªå¼•ç”¨
String b = new String("ab"); // bä¸ºå¦ä¸€ä¸ªå¼•ç”¨,å¯¹è±¡çš„å†…å®¹ä¸€æ ·
String aa = "ab"; // æ”¾åœ¨å¸¸é‡æ± ä¸­
String bb = "ab"; // ä»å¸¸é‡æ± ä¸­æŸ¥æ‰¾
System.out.println(aa == bb);// true
System.out.println(a == b);// false
System.out.println(a.equals(b));// true
System.out.println(42 == 42.0);// true
```

**`String`ç±»ä¸­çš„`equals()`æ–¹æ³•**

- String ä¸­çš„ equals æ–¹æ³•æ˜¯è¢«é‡å†™è¿‡çš„ï¼Œå› ä¸º Object çš„ equals æ–¹æ³•æ˜¯æ¯”è¾ƒçš„å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œè€Œ String çš„ equals æ–¹æ³•æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å€¼ã€‚

- å½“åˆ›å»º String ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œè™šæ‹Ÿæœºä¼šåœ¨å¸¸é‡æ± ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰å·²ç»å­˜åœ¨çš„å€¼å’Œè¦åˆ›å»ºçš„å€¼ç›¸åŒçš„å¯¹è±¡ï¼Œå¦‚æœæœ‰å°±æŠŠå®ƒèµ‹ç»™å½“å‰å¼•ç”¨ã€‚å¦‚æœæ²¡æœ‰å°±åœ¨å¸¸é‡æ± ä¸­é‡æ–°åˆ›å»ºä¸€ä¸ª String å¯¹è±¡ã€‚

```java
public boolean equals(Object anObject) {
    if (this == anObject) {
        return true;
    }
    if (anObject instanceof String) {
        String anotherString = (String)anObject;
        int n = value.length;
        if (n == anotherString.value.length) {
            char v1[] = value;
            char v2[] = anotherString.value;
            int i = 0;
            while (n-- != 0) {
                if (v1[i] != v2[i])
                    return false;
                i++;
            }
            return true;
        }
    }
    return false;
}
```

---

### hashCode()

> **hashCode()çš„ä½œç”¨**

- hashCode()çš„ä½œç”¨æ˜¯è·å–å“ˆå¸Œç (int æ•´æ•°),ä¹Ÿç§°ä¸ºæ•£åˆ—ç ã€‚è¿™ä¸ªå“ˆå¸Œç çš„ä½œç”¨æ˜¯ç¡®å®šå¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­çš„ç´¢å¼•ä½ç½®ã€‚
- hashCode()å®šä¹‰åœ¨ JDK çš„ Object ç±»ä¸­ï¼Œè¿™å°±æ„å‘³ç€ Java ä¸­çš„ä»»ä½•ç±»éƒ½åŒ…å«æœ‰ hashCode() å‡½æ•°ã€‚
-  Object çš„ hashCode() æ–¹æ³•æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ç”¨ C è¯­è¨€æˆ– C++ å®ç°çš„ï¼Œè¯¥æ–¹æ³•é€šå¸¸ç”¨æ¥å°†å¯¹è±¡çš„å†…å­˜åœ°å€è½¬æ¢ä¸ºæ•´æ•°ä¹‹åè¿”å›ã€‚

```java
public native int hashCode();
```

æ•£åˆ—è¡¨å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹(key-value)ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šèƒ½æ ¹æ®â€œé”®â€å¿«é€Ÿçš„æ£€ç´¢å‡ºå¯¹åº”çš„â€œå€¼â€ã€‚è¿™å…¶ä¸­å°±åˆ©ç”¨åˆ°äº†æ•£åˆ—ç ï¼ï¼ˆå¯ä»¥å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€è¦çš„å¯¹è±¡ï¼‰

> **ä¸ºä»€ä¹ˆè¦æœ‰hashCode()**

ã€ŠHead First Javaã€‹
> å½“ä½ æŠŠå¯¹è±¡åŠ å…¥ HashSet æ—¶ï¼ŒHashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashCode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸å…¶ä»–å·²ç»åŠ å…¥çš„å¯¹è±¡çš„ hashCode å€¼ä½œæ¯”è¾ƒï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„ hashCodeï¼ŒHashSet ä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ã€‚ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒ hashCode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals() æ–¹æ³•æ¥æ£€æŸ¥ hashCode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼ŒHashSet å°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚è¿™æ ·æˆ‘ä»¬å°±å¤§å¤§å‡å°‘äº† equals çš„æ¬¡æ•°ï¼Œç›¸åº”å°±å¤§å¤§æé«˜äº†æ‰§è¡Œé€Ÿåº¦ã€‚

**hashCode()å’Œequals()éƒ½æ˜¯ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰**

> **JDKä¸ºä»€ä¹ˆåŒæ—¶æä¾›equals()å’ŒhashCode()æ–¹æ³•**

å¦‚æœä»…æä¾›`equals()`æ–¹æ³•ï¼Œåœ¨ä¸€äº›å®¹å™¨ä¸­ï¼Œæœ‰äº†hashCode()ï¼Œå¯ä»¥æ˜¾è‘—æå‡å…ƒç´ æ˜¯å¦åœ¨å¯¹åº”å®¹å™¨ä¸­çš„åˆ¤æ–­æ•ˆç‡ã€‚

å…¶æ¬¡å¦‚æœåªæä¾›hashCode()æ–¹æ³•ï¼Œå› ä¸ºå­˜åœ¨å“ˆå¸Œç¢°æ’ï¼Œä¼šå‡ºç°ä¸¤ä¸ªå¯¹è±¡å€¼ä¸ç­‰ä½†å“ˆå¸Œå€¼ç›¸åŒçš„é—®é¢˜ã€‚å³ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡`hashCode`å€¼ç›¸åŒã€‚

**æ€»ç»“**

- å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCode å€¼ç›¸ç­‰ï¼Œé‚£è¿™ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç›¸ç­‰ï¼ˆå“ˆå¸Œç¢°æ’ï¼‰ã€‚
- å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCode å€¼ç›¸ç­‰å¹¶ä¸”equals()æ–¹æ³•ä¹Ÿè¿”å› trueï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ã€‚
- å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCode å€¼ä¸ç›¸ç­‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ã€‚

### ä¸ºä»€ä¹ˆé‡å†™ equals() æ—¶å¿…é¡»é‡å†™ hashCode() æ–¹æ³•ï¼Ÿ

å¦‚æœé‡å†™ `equals()` æ—¶æ²¡æœ‰é‡å†™ `hashCode()` æ–¹æ³•çš„è¯å°±å¯èƒ½ä¼šå¯¼è‡´ `equals` æ–¹æ³•åˆ¤æ–­æ˜¯ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œ`hashCode` å€¼å´ä¸ç›¸ç­‰ã€‚

---

## String

### Stringã€StringBuilderå’ŒStringBuffer

> **å¯å˜æ€§**

- Stringä¸å¯å˜
- StringBuilder å’Œ StringBufferå¯å˜ã€‚äºŒè€…éƒ½ç»§æ‰¿è‡ª`AbstractStringBuilder`ç±»ï¼Œåœ¨`AbstractStringBuilder`ç±»ä¸­ä¹Ÿæ˜¯ä½¿ç”¨å­—ç¬¦æ•°ç»„ä¿å­˜å­—ç¬¦ä¸²ï¼Œæ²¡æœ‰ä½¿ç”¨ `final` å’Œ `private` å…³é”®å­—ä¿®é¥°.åŒæ—¶è¿˜æä¾›äº†å¾ˆå¤šä¿®æ”¹å­—ç¬¦ä¸²çš„æ–¹æ³•å¦‚`append`.

```java
abstract class AbstractStringBuilder implements Appendable, CharSequence {
    char[] value;
    public AbstractStringBuilder append(String str) {
        if (str == null)
            return appendNull();
        int len = str.length();
        ensureCapacityInternal(count + len);
        str.getChars(0, len, value, count);
        count += len;
        return this;
    }
  	//...
}
```

> **çº¿ç¨‹å®‰å…¨æ€§**

- `String`ä¸­çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œä¹Ÿå°±å¯ä»¥ç†è§£ä¸ºå¸¸é‡ï¼Œçº¿ç¨‹å®‰å…¨ã€‚
- `StringBuffer` å¯¹æ–¹æ³•åŠ äº†åŒæ­¥é”æˆ–è€…å¯¹è°ƒç”¨çš„æ–¹æ³•åŠ äº†åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯**çº¿ç¨‹å®‰å…¨çš„**ã€‚
- `StringBuilder` å¹¶æ²¡æœ‰å¯¹æ–¹æ³•è¿›è¡ŒåŠ åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚

> **æ€§èƒ½**

- æ¯æ¬¡å¯¹ `String` ç±»å‹è¿›è¡Œæ”¹å˜çš„æ—¶å€™ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ `String` å¯¹è±¡ï¼Œç„¶åå°†æŒ‡é’ˆæŒ‡å‘æ–°çš„ `String` å¯¹è±¡ã€‚
- `StringBuffer` å’Œ `StringBuilder`æ¯æ¬¡éƒ½ä¼šå¯¹å¯¹è±¡æœ¬èº«è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„å¯¹è±¡å¹¶æ”¹å˜å¯¹è±¡å¼•ç”¨ã€‚
- ç›¸åŒæƒ…å†µä¸‹ä½¿ç”¨ `StringBuilder` ç›¸æ¯”ä½¿ç”¨ `StringBuffer` ä»…èƒ½è·å¾— 10%~15% å·¦å³çš„æ€§èƒ½æå‡ï¼Œä½†å´è¦å†’å¤šçº¿ç¨‹ä¸å®‰å…¨çš„é£

> **ä¸‰è€…ä½¿ç”¨æ€»ç»“**

- æ“ä½œå°‘é‡æ•°æ®ä½¿ç”¨`String`
- å•çº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡å­—ç¬¦ `StringBuilder`
- å¤šçº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡å­—ç¬¦ `StringBuffer`
  
---

### String ä¸ºä»€ä¹ˆæ˜¯ä¸å¯å˜çš„ï¼Ÿ

- 1. ä¿å­˜å­—ç¬¦ä¸²çš„æ•°ç»„è¢«`final`ä¿®é¥°ä¸”ä¸ºç§æœ‰ï¼Œå¹¶ä¸”`String`ç±»æ²¡æœ‰æä¾›/æš´éœ²ä¿®æ”¹è¿™ä¸ªå­—ç¬¦ä¸²çš„æ–¹æ³•
- 2. `String`ç±»è¢«`final`ä¿®é¥°å¯¼è‡´å…¶ä¸èƒ½è¢«ç»§æ‰¿ï¼Œè¿›è€Œé¿å…äº†å­ç±»ç ´å`String`ä¸å¯å˜ã€‚

---

### å­—ç¬¦ä¸²æ‹¼æ¥ç”¨â€œ+â€ è¿˜æ˜¯ StringBuilder?

å­—ç¬¦ä¸²æ‹¼æ¥ä½¿ç”¨"+"ï¼Œå®é™…ä¸Šè¿˜æ˜¯ä½¿ç”¨`StringBuilder`è°ƒç”¨`append`å®ç°çš„ï¼Œæ‹¼æ¥å®Œæˆåè°ƒç”¨`toString()`å¾—åˆ°ä¸€ä¸ª`String`å¯¹è±¡ã€‚

> ğŸ™‹ğŸŒ°

```java
String str1 = "he";
String str2 = "llo";
String str3 = "world";
String str4 = str1 + str2 + str3;
```

ä¸Šè¿°ä»£ç å¯¹åº”çš„å­—èŠ‚å¦‚ä¸‹:

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/image-20220422161637929.png)

åœ¨å¾ªç¯å†…ä½¿ç”¨â€œ+â€è¿›è¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥çš„è¯ï¼Œå­˜åœ¨æ¯”è¾ƒæ˜æ˜¾çš„ç¼ºé™·ï¼šå› ä¸º`StringBuilder` å¯¹è±¡æ˜¯åœ¨å¾ªç¯å†…éƒ¨è¢«åˆ›å»ºçš„ï¼Œè¿™æ„å‘³ç€æ¯å¾ªç¯ä¸€æ¬¡å°±ä¼šåˆ›å»ºä¸€ä¸ª StringBuilder å¯¹è±¡ã€‚ç¼–è¯‘å™¨ä¼šåˆ›å»ºå¤šä¸ª `StringBuilder` å¯¹è±¡ã€‚

```java
String[] arr = {"he", "llo", "world"};
String s = "";
for (int i = 0; i < arr.length; i++) {
    s += arr[i];
}
System.out.println(s);
```

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/image-20220422161320823.png)

å¦‚æœç›´æ¥ä½¿ç”¨ StringBuilder å¯¹è±¡è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„è¯ï¼Œå°±ä¸ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜äº†ã€‚

```java
String[] arr = {"he", "llo", "world"};
StringBuilder s = new StringBuilder();
for (String value : arr) {
    s.append(value);
}
System.out.println(s);
```

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/image-20220422162327415.png)

---

### String ä¸­equals() å’Œ Objectä¸­equals() æœ‰ä½•åŒºåˆ«ï¼Ÿ

`String` ä¸­çš„ `equals` æ–¹æ³•æ˜¯è¢«é‡å†™è¿‡çš„ï¼Œæ¯”è¾ƒçš„æ˜¯ `String` å­—ç¬¦ä¸²çš„å€¼æ˜¯å¦ç›¸ç­‰ã€‚ `Object` çš„ `equals` æ–¹æ³•æ˜¯æ¯”è¾ƒçš„å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚

---

### å­—ç¬¦ä¸²å¸¸é‡æ± çš„ä½œç”¨äº†è§£å—ï¼Ÿ

å­—ç¬¦ä¸²å¸¸é‡æ±  æ˜¯ JVM ä¸ºäº†**æå‡æ€§èƒ½å’Œå‡å°‘å†…å­˜æ¶ˆè€—é’ˆå¯¹å­—ç¬¦ä¸²ï¼ˆString ç±»ï¼‰ä¸“é—¨å¼€è¾Ÿçš„ä¸€å—åŒºåŸŸ**ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†**é¿å…å­—ç¬¦ä¸²çš„é‡å¤åˆ›å»º**ã€‚

```java
// åœ¨å †ä¸­åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡â€abâ€œ
// å°†å­—ç¬¦ä¸²å¯¹è±¡â€abâ€œçš„å¼•ç”¨ä¿å­˜åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­
String aa = "ab";
// ç›´æ¥è¿”å›å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å­—ç¬¦ä¸²å¯¹è±¡â€abâ€œçš„å¼•ç”¨
String bb = "ab";
System.out.println(aa==bb);// true
```

---

### String s1 = new String("abc");è¿™å¥è¯åˆ›å»ºäº†å‡ ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Ÿ

ä¼šåˆ›å»º 1 æˆ– 2 ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ã€‚

> Case1:å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­**ä¸å­˜åœ¨å­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€çš„å¼•ç”¨**,ä¼šåœ¨å †ä¸­åˆ›å»º 2 ä¸ªå­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€ã€‚

```java
String s1 = new String("abc");
```

å¯¹åº”å­—èŠ‚ç ï¼š
![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/open-source-project/image-20220413175809959.png)

`ldc` å‘½ä»¤ç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ˜¯å¦ä¿å­˜äº†å¯¹åº”çš„å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨

- å¦‚æœä¿å­˜äº†çš„è¯ç›´æ¥è¿”å›
- å¦‚æœæ²¡æœ‰ä¿å­˜çš„è¯ï¼Œä¼šåœ¨å †ä¸­åˆ›å»ºå¯¹åº”çš„å­—ç¬¦ä¸²å¯¹è±¡å¹¶å°†è¯¥å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ã€‚

> Case2:å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­**å·²å­˜åœ¨å­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€çš„å¼•ç”¨**ï¼Œåˆ™åªä¼šåœ¨å †ä¸­åˆ›å»º 1 ä¸ªå­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€

```java
// å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å·²å­˜åœ¨å­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€çš„å¼•ç”¨
String s1 = "abc";
// ä¸‹é¢è¿™æ®µä»£ç åªä¼šåœ¨å †ä¸­åˆ›å»º 1 ä¸ªå­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€
String s2 = new String("abc");
```

å¯¹åº”å­—èŠ‚ç :

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/open-source-project/image-20220413180021072.png)

7 è¿™ä¸ªä½ç½®çš„ ldc å‘½ä»¤ä¸ä¼šåœ¨å †ä¸­åˆ›å»ºæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€ã€‚

å› ä¸º 0 è¿™ä¸ªä½ç½®å·²ç»æ‰§è¡Œäº†ä¸€æ¬¡ ldc å‘½ä»¤ï¼Œå·²ç»åœ¨å †ä¸­åˆ›å»ºè¿‡ä¸€æ¬¡å­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€äº†ã€‚

7 è¿™ä¸ªä½ç½®æ‰§è¡Œ ldc å‘½ä»¤ä¼šç›´æ¥è¿”å›å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€å¯¹åº”çš„å¼•ç”¨ã€‚

---

### String.intern() æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨?

`String.intern()` æ˜¯ä¸€ä¸ª nativeï¼ˆæœ¬åœ°ï¼‰æ–¹æ³•ï¼Œå…¶ä½œç”¨æ˜¯å°†æŒ‡å®šçš„å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œå¯ä»¥ç®€å•åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š

- å¦‚æœ**å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ä¿å­˜**äº†å¯¹åº”çš„å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨ï¼Œå°±ç›´æ¥è¿”å›è¯¥å¼•ç”¨ã€‚
- å¦‚æœ**å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ²¡æœ‰ä¿å­˜**äº†å¯¹åº”çš„å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£å°±åœ¨å¸¸é‡æ± ä¸­åˆ›å»ºä¸€ä¸ªæŒ‡å‘è¯¥å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨å¹¶è¿”å›ã€‚

> **ç¤ºä¾‹ä»£ç (JDK1.8)ï¼š**

```java
// åœ¨å †ä¸­åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡â€Javaâ€œ
// å°†å­—ç¬¦ä¸²å¯¹è±¡â€Javaâ€œçš„å¼•ç”¨ä¿å­˜åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­
String s1 = "Java";

// ç›´æ¥è¿”å›å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å­—ç¬¦ä¸²å¯¹è±¡â€Javaâ€œå¯¹åº”çš„å¼•ç”¨
String s2 = s1.intern();

// ä¼šåœ¨å †ä¸­åœ¨å•ç‹¬åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡
String s3 = new String("Java");

// ç›´æ¥è¿”å›å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å­—ç¬¦ä¸²å¯¹è±¡â€Javaâ€œå¯¹åº”çš„å¼•ç”¨
String s4 = s3.intern();

// s1 å’Œ s2 æŒ‡å‘çš„æ˜¯å †ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡
System.out.println(s1 == s2); // true

// s3 å’Œ s4 æŒ‡å‘çš„æ˜¯å †ä¸­ä¸åŒçš„å¯¹è±¡
System.out.println(s3 == s4); // false

// s1 å’Œ s4 æŒ‡å‘çš„æ˜¯å †ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡
System.out.println(s1 == s4); //true
```

---

### String ç±»å‹çš„å˜é‡å’Œå¸¸é‡åšâ€œ+â€è¿ç®—æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

> ğŸ™‹â€â™‚ï¸ğŸŒ°

å­—ç¬¦ä¸²ä¸åŠ  `final` å…³é”®å­—æ‹¼æ¥çš„æƒ…å†µï¼ˆJDK1.8ï¼‰ï¼š

```java
String str1 = "str";
String str2 = "ing";
String str3 = "str" + "ing";
String str4 = str1 + str2;
String str5 = "string";
System.out.println(str3 == str4);//false
System.out.println(str3 == str5);//true
System.out.println(str4 == str5);//false
```

> **è§£é‡Šè¯´æ˜**

å¯¹äºç¼–è¯‘æœŸå¯ä»¥ç¡®å®šå€¼çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯å¸¸é‡å­—ç¬¦ä¸² ï¼Œjvm ä¼šå°†å…¶å­˜å…¥å­—ç¬¦ä¸²å¸¸é‡æ± ã€‚å¹¶ä¸”ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ‹¼æ¥å¾—åˆ°çš„å­—ç¬¦ä¸²å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µå°±å·²ç»è¢«å­˜æ”¾å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œè¿™ä¸ªå¾—ç›Šäºç¼–è¯‘å™¨çš„ä¼˜åŒ–ã€‚

åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼ŒJavac ç¼–è¯‘å™¨ï¼ˆä¸‹æ–‡ä¸­ç»Ÿç§°ä¸ºç¼–è¯‘å™¨ï¼‰ä¼šè¿›è¡Œä¸€ä¸ªå«åš **å¸¸é‡æŠ˜å (Constant Folding)** çš„ä»£ç ä¼˜åŒ–ã€‚

**å¸¸é‡æŠ˜å **ä¼šæŠŠ**å¸¸é‡è¡¨è¾¾å¼çš„å€¼æ±‚å‡ºæ¥ä½œä¸ºå¸¸é‡åµŒåœ¨æœ€ç»ˆç”Ÿæˆçš„ä»£ç ä¸­**ï¼Œè¿™æ˜¯ Javac ç¼–è¯‘å™¨ä¼šå¯¹æºä»£ç åšçš„æå°‘é‡ä¼˜åŒ–æªæ–½ä¹‹ä¸€(ä»£ç ä¼˜åŒ–å‡ ä¹éƒ½åœ¨å³æ—¶ç¼–è¯‘å™¨ä¸­è¿›è¡Œ)

å› æ­¤`String str3 = "str" + "ing";`ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–ä¸º`String str3 = "string";`

**å…³äºå¸¸é‡æŠ˜å éœ€è¦æ³¨æ„å¦‚ä¸‹å‡ ç‚¹:**

- å¹¶ä¸æ˜¯æ‰€æœ‰çš„å¸¸é‡éƒ½ä¼šè¿›è¡ŒæŠ˜å ï¼Œåªæœ‰ç¼–è¯‘å™¨åœ¨ç¨‹åºç¼–è¯‘æœŸå°±å¯ä»¥ç¡®å®šå€¼çš„å¸¸é‡æ‰å¯ä»¥ï¼š
  - åŸºæœ¬æ•°æ®ç±»å‹( byteã€booleanã€shortã€charã€intã€floatã€longã€double)ä»¥åŠå­—ç¬¦ä¸²å¸¸é‡ã€‚
  - final ä¿®é¥°çš„åŸºæœ¬æ•°æ®ç±»å‹å’Œå­—ç¬¦ä¸²å˜é‡
  - å­—ç¬¦ä¸²é€šè¿‡ â€œ+â€æ‹¼æ¥å¾—åˆ°çš„å­—ç¬¦ä¸²ã€åŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´ç®—æ•°è¿ç®—ï¼ˆåŠ å‡ä¹˜é™¤ï¼‰ã€åŸºæœ¬æ•°æ®ç±»å‹çš„ä½è¿ç®—ï¼ˆ<<ã€>>ã€>>> ï¼‰
- å¼•ç”¨çš„å€¼åœ¨ç¨‹åºç¼–è¯‘æœŸæ˜¯æ— æ³•ç¡®å®šçš„ï¼Œç¼–è¯‘å™¨æ— æ³•å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚

å¯¹è±¡å¼•ç”¨å’Œâ€œ+â€çš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡ StringBuilder è°ƒç”¨ append() æ–¹æ³•å®ç°çš„ï¼Œæ‹¼æ¥å®Œæˆä¹‹åè°ƒç”¨ toString() å¾—åˆ°ä¸€ä¸ª String å¯¹è±¡ ã€‚

```java
String str4 = new StringBuilder().append(str1).append(str2).toString();
```
æˆ‘ä»¬åœ¨å¹³æ—¶å†™ä»£ç çš„æ—¶å€™ï¼Œå°½é‡é¿å…å¤šä¸ªå­—ç¬¦ä¸²å¯¹è±¡æ‹¼æ¥ï¼Œå› ä¸ºè¿™æ ·ä¼šé‡æ–°åˆ›å»ºå¯¹è±¡ã€‚å¦‚æœéœ€è¦æ”¹å˜å­—ç¬¦ä¸²çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ StringBuilder æˆ–è€… StringBufferã€‚

> **å­—ç¬¦ä¸²ä½¿ç”¨ final å…³é”®å­—å£°æ˜ä¹‹åï¼Œå¯ä»¥è®©ç¼–è¯‘å™¨å½“åšå¸¸é‡æ¥å¤„ç†ã€‚**

ç¤ºä¾‹ä»£ç ï¼š

```java
final String str1 = "str";
final String str2 = "ing";
// ä¸‹é¢ä¸¤ä¸ªè¡¨è¾¾å¼å…¶å®æ˜¯ç­‰ä»·çš„
String c = "str" + "ing";// å¸¸é‡æ± ä¸­çš„å¯¹è±¡
String d = str1 + str2; // å¸¸é‡æ± ä¸­çš„å¯¹è±¡
System.out.println(c == d);// true
```

è¢« final å…³é”®å­—ä¿®æ”¹ä¹‹åçš„ String ä¼šè¢«ç¼–è¯‘å™¨å½“åšå¸¸é‡æ¥å¤„ç†ï¼Œç¼–è¯‘å™¨åœ¨ç¨‹åºç¼–è¯‘æœŸå°±å¯ä»¥ç¡®å®šå®ƒçš„å€¼ï¼Œå…¶æ•ˆæœå°±ç›¸å½“äºè®¿é—®å¸¸é‡ã€‚

å¦‚æœ ï¼Œç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“å…¶ç¡®åˆ‡å€¼çš„è¯ï¼Œå°±æ— æ³•å¯¹å…¶ä¼˜åŒ–ã€‚

ç¤ºä¾‹ä»£ç ï¼ˆstr2 åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå…¶å€¼ï¼‰ï¼š

```java
final String str1 = "str";
final String str2 = getStr();
String c = "str" + "ing";// å¸¸é‡æ± ä¸­çš„å¯¹è±¡
String d = str1 + str2; // åœ¨å †ä¸Šåˆ›å»ºçš„æ–°çš„å¯¹è±¡
System.out.println(c == d);// false
public static String getStr() {
      return "ing";
}
```

---

# å…­ã€å¼‚å¸¸

## Javaå¼‚å¸¸å±‚æ¬¡æ¦‚è§ˆå›¾

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/basis/types-of-exceptions-in-java.png)

## Exceptionå’ŒErrorçš„åŒºåˆ«ï¼Ÿ

- `Exception:` ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡`catch`æ•è·ã€‚`Exception` åˆå¯ä»¥åˆ†ä¸º `Checked Exception` (å—æ£€æŸ¥å¼‚å¸¸ï¼Œå¿…é¡»å¤„ç†) å’Œ `Unchecked Exception` (ä¸å—æ£€æŸ¥å¼‚å¸¸ï¼Œå¯ä»¥ä¸å¤„ç†)ã€‚
- `Error:` `Error` å±äºç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ ï¼Œæˆ‘ä»¬æ²¡åŠæ³•é€šè¿‡ `catch` æ¥è¿›è¡Œæ•è·ä¸å»ºè®®é€šè¿‡catchæ•è· ã€‚ä¾‹å¦‚ Java è™šæ‹Ÿæœºè¿è¡Œé”™è¯¯ï¼ˆVirtual MachineErrorï¼‰ã€è™šæ‹Ÿæœºå†…å­˜ä¸å¤Ÿé”™è¯¯(OutOfMemoryError)ã€ç±»å®šä¹‰é”™è¯¯ï¼ˆNoClassDefFoundErrorï¼‰ç­‰ ã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œ**Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸€èˆ¬ä¼šé€‰æ‹©çº¿ç¨‹ç»ˆæ­¢ã€‚**

---

## Checked Exceptionå’ŒUnchecked Exceptionå’ŒErrorçš„åŒºåˆ«

> **Checked Exception**

`Checked Exception` å³ å—æ£€æŸ¥å¼‚å¸¸ ï¼ŒJava ä»£ç åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå—æ£€æŸ¥å¼‚å¸¸æ²¡æœ‰è¢« `catch`æˆ–è€…`throws` å…³é”®å­—å¤„ç†çš„è¯ï¼Œå°±æ²¡åŠæ³•é€šè¿‡ç¼–è¯‘ã€‚

é™¤äº†`RuntimeException`åŠå…¶å­ç±»ä»¥å¤–ï¼Œå…¶ä»–çš„`Exception`ç±»åŠå…¶å­ç±»éƒ½å±äºå—æ£€æŸ¥å¼‚å¸¸ ã€‚å¸¸è§çš„å—æ£€æŸ¥å¼‚å¸¸æœ‰ï¼š IO ç›¸å…³çš„å¼‚å¸¸ã€`ClassNotFoundException` ã€`SQLException`...ã€‚

> **Unchecked Exception**

`Unchecked Exception` å³ ä¸å—æŸ¥å¼‚å¸¸ï¼ŒJava ä»£ç åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ ï¼Œæˆ‘ä»¬å³ä½¿ä¸å¤„ç†ä¸å—æ£€æŸ¥å¼‚å¸¸ä¹Ÿå¯ä»¥æ­£å¸¸é€šè¿‡ç¼–è¯‘ã€‚

`RuntimeException` åŠå…¶å­ç±»éƒ½ç»Ÿç§°ä¸ºéå—æ£€æŸ¥å¼‚å¸¸ï¼Œå¸¸è§çš„æœ‰ï¼ˆç†è§£å¹¶è®°å¿†ï¼‰ï¼š

- `NullPointerException`(ç©ºæŒ‡é’ˆé”™è¯¯)
- `IllegalArgumentException`(å‚æ•°é”™è¯¯æ¯”å¦‚æ–¹æ³•å…¥å‚ç±»å‹é”™è¯¯)
- `NumberFormatException`ï¼ˆå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—æ ¼å¼é”™è¯¯ï¼ŒIllegalArgumentExceptionçš„å­ç±»ï¼‰
- `ArrayIndexOutOfBoundsException`ï¼ˆæ•°ç»„è¶Šç•Œé”™è¯¯ï¼‰
- `ClassCastException`ï¼ˆç±»å‹è½¬æ¢é”™è¯¯ï¼‰
- `ArithmeticException`ï¼ˆç®—æœ¯é”™è¯¯ï¼‰
- `SecurityException` ï¼ˆå®‰å…¨é”™è¯¯æ¯”å¦‚æƒé™ä¸å¤Ÿï¼‰
- `UnsupportedOperationException`(ä¸æ”¯æŒçš„æ“ä½œé”™è¯¯æ¯”å¦‚é‡å¤åˆ›å»ºåŒä¸€ç”¨æˆ·)
......

---

## Throwableç±»çš„å¸¸ç”¨æ–¹æ³•

- `String getMessage()`: è¿”å›å¼‚å¸¸å‘ç”Ÿæ—¶çš„ç®€è¦æè¿°
- `String toString()`: è¿”å›å¼‚å¸¸å‘ç”Ÿæ—¶çš„è¯¦ç»†ä¿¡æ¯
- `String getLocalizedMessage()`: è¿”å›å¼‚å¸¸å¯¹è±¡çš„æœ¬åœ°åŒ–ä¿¡æ¯ã€‚ä½¿ç”¨ Throwable çš„å­ç±»è¦†ç›–è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”Ÿæˆæœ¬åœ°åŒ–ä¿¡æ¯ã€‚å¦‚æœå­ç±»æ²¡æœ‰è¦†ç›–è¯¥æ–¹æ³•ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›çš„ä¿¡æ¯ä¸ getMessage()è¿”å›çš„ç»“æœç›¸åŒ
- `void printStackTrace()`: åœ¨æ§åˆ¶å°ä¸Šæ‰“å° Throwable å¯¹è±¡å°è£…çš„å¼‚å¸¸ä¿¡æ¯

---

## try-catch-finally

- `try`å— ï¼š ç”¨äºæ•è·å¼‚å¸¸ã€‚å…¶åå¯æ¥**é›¶ä¸ªæˆ–å¤šä¸ª** `catch` å—ï¼Œå¦‚æœæ²¡æœ‰ `catch` å—ï¼Œåˆ™å¿…é¡»è·Ÿä¸€ä¸ª `finally` å—ã€‚
- `catch`å— ï¼š ç”¨äºå¤„ç† `try` æ•è·åˆ°çš„å¼‚å¸¸ã€‚
- `finally` å— ï¼š æ— è®ºæ˜¯å¦æ•è·æˆ–å¤„ç†å¼‚å¸¸ï¼Œ`finally` å—é‡Œçš„è¯­å¥éƒ½ä¼šè¢«æ‰§è¡Œã€‚å½“åœ¨ `try` å—æˆ– `catch` å—ä¸­é‡åˆ° `return `è¯­å¥æ—¶ï¼Œ`finally` è¯­å¥å—å°†åœ¨æ–¹æ³•è¿”å›ä¹‹å‰è¢«æ‰§è¡Œã€‚

```java
try {
    System.out.println("Try to do something");
    throw new RuntimeException("RuntimeException");
} catch (Exception e) {
    System.out.println("Catch Exception -> " + e.getMessage());
} finally {
    System.out.println("Finally");
}

// è¾“å‡º:
// Try to do something
// Catch Exception -> RuntimeException
// Finally
```

**æ³¨æ„**

ä¸è¦åœ¨ finally è¯­å¥å—ä¸­ä½¿ç”¨ return! å½“ try è¯­å¥å’Œ finally è¯­å¥ä¸­éƒ½æœ‰ return è¯­å¥æ—¶ï¼Œ**try è¯­å¥å—ä¸­çš„ return è¯­å¥ä¼šè¢«å¿½ç•¥**ã€‚è¿™æ˜¯å› ä¸º try è¯­å¥ä¸­çš„ return è¿”å›å€¼ä¼šå…ˆè¢«æš‚å­˜åœ¨ä¸€ä¸ªæœ¬åœ°å˜é‡ä¸­ï¼Œå½“æ‰§è¡Œåˆ° finally è¯­å¥ä¸­çš„ return ä¹‹åï¼Œè¿™ä¸ªæœ¬åœ°å˜é‡çš„å€¼å°±å˜ä¸ºäº† finally è¯­å¥ä¸­çš„ return è¿”å›å€¼ã€‚

---

## finallyä¸­ä»£ç ä¸€å®šä¼šæ‰§è¡Œå—ï¼Ÿ

ä¸ä¸€å®šçš„ï¼åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œfinally ä¸­çš„ä»£ç ä¸ä¼šè¢«æ‰§è¡Œã€‚

- å¦‚åœ¨ finally ä¹‹å‰è™šæ‹Ÿæœºè¢«ç»ˆæ­¢è¿è¡Œçš„è¯ï¼Œfinally ä¸­çš„ä»£ç å°±ä¸ä¼šè¢«æ‰§è¡Œã€‚
 
  ```java
    try {
        System.out.println("Try to do something");
        throw new RuntimeException("RuntimeException");
    } catch (Exception e) {
        System.out.println("Catch Exception -> " + e.getMessage());
        // ç»ˆæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„Javaè™šæ‹Ÿæœº
        System.exit(1);
    } finally {
        System.out.println("Finally");
    }
    /**
    Try to do something
    Catch Exception -> RuntimeException
     */
  ```

- ç¨‹åºæ‰€åœ¨çš„çº¿ç¨‹æ­»äº¡ã€‚
- å…³é—­ CPUã€‚

---

## ä½¿ç”¨`try-with-resource`ä»£æ›¿`try-catch-finally`

- é€‚ç”¨èŒƒå›´ï¼ˆèµ„æºçš„å®šä¹‰ï¼‰ï¼š ä»»ä½•å®ç° java.lang.AutoCloseableæˆ–è€… java.io.Closeable çš„å¯¹è±¡
- å…³é—­èµ„æºå’Œ finally å—çš„æ‰§è¡Œé¡ºåºï¼š åœ¨ try-with-resources è¯­å¥ä¸­ï¼Œ**ä»»ä½• catch æˆ– finally å—åœ¨å£°æ˜çš„èµ„æºå…³é—­åè¿è¡Œ**

Java ä¸­ç±»ä¼¼äºInputStreamã€OutputStream ã€Scanner ã€PrintWriterç­‰çš„èµ„æºéƒ½éœ€è¦æˆ‘ä»¬è°ƒç”¨close()æ–¹æ³•æ¥æ‰‹åŠ¨å…³é—­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡try-catch-finallyè¯­å¥æ¥å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œå¦‚ä¸‹ï¼š

```java
//è¯»å–æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹
Scanner scanner = null;
try {
    scanner = new Scanner(new File("D://read.txt"));
    while (scanner.hasNext()) {
        System.out.println(scanner.nextLine());
    }
} catch (FileNotFoundException e) {
    e.printStackTrace();
} finally {
    if (scanner != null) {
        scanner.close();
    }
}
```

ä½¿ç”¨ Java 7 ä¹‹åçš„ try-with-resources è¯­å¥æ”¹é€ ä¸Šé¢çš„ä»£ç :

```java
try (Scanner scanner = new Scanner(new File("test.txt"))) {
    while (scanner.hasNext()) {
        System.out.println(scanner.nextLine());
    }
} catch (FileNotFoundException fnfe) {
    fnfe.printStackTrace();
}
```

å½“ç„¶å¤šä¸ªèµ„æºéœ€è¦å…³é—­çš„æ—¶å€™ï¼Œä½¿ç”¨ try-with-resources å®ç°èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼Œå¦‚æœä½ è¿˜æ˜¯ç”¨try-catch-finallyå¯èƒ½ä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ã€‚

é€šè¿‡ä½¿ç”¨åˆ†å·åˆ†éš”ï¼Œå¯ä»¥åœ¨try-with-resourceså—ä¸­å£°æ˜å¤šä¸ªèµ„æºã€‚

```java
try (BufferedInputStream bin = new BufferedInputStream(new FileInputStream(new File("test.txt")));
     BufferedOutputStream bout = new BufferedOutputStream(new FileOutputStream(new File("out.txt")))) {
    int b;
    while ((b = bin.read()) != -1) {
        bout.write(b);
    }
}
catch (IOException e) {
    e.printStackTrace();
}
```

---

## å¼‚å¸¸ä½¿ç”¨æ³¨æ„ç‚¹

- ä¸è¦æŠŠå¼‚å¸¸å®šä¹‰ä¸ºé™æ€å˜é‡ï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´å¼‚å¸¸æ ˆä¿¡æ¯é”™ä¹±ã€‚æ¯æ¬¡æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨ new ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡æŠ›å‡ºã€‚
- æŠ›å‡ºçš„å¼‚å¸¸ä¿¡æ¯ä¸€å®šè¦æœ‰æ„ä¹‰ã€‚
- å»ºè®®æŠ›å‡ºæ›´åŠ å…·ä½“çš„å¼‚å¸¸æ¯”å¦‚å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—æ ¼å¼é”™è¯¯çš„æ—¶å€™åº”è¯¥æŠ›å‡ºNumberFormatExceptionè€Œä¸æ˜¯å…¶çˆ¶ç±»IllegalArgumentExceptionã€‚
- ä½¿ç”¨æ—¥å¿—æ‰“å°å¼‚å¸¸ä¹‹åå°±ä¸è¦å†æŠ›å‡ºå¼‚å¸¸äº†ï¼ˆä¸¤è€…ä¸è¦åŒæ—¶å­˜åœ¨ä¸€æ®µä»£ç é€»è¾‘ä¸­ï¼‰ã€‚
......

---

# ä¸ƒã€æ³›å‹

## æ³›å‹å®šä¹‰åŠå…¶ä½œç”¨

æ˜¯JAVA SE5 å¼•å…¥çš„æ–°ç‰¹æ€§ã€‚å…¶æœ¬è´¨æ˜¯ **ç±»å‹å‚æ•°åŒ–æˆ–å‚æ•°åŒ–ç±»å‹**ï¼Œåœ¨ä¸åˆ›å»ºæ–°ç±»å‹çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ³›å‹æŒ‡å®šçš„ä¸åŒç±»å‹æ¥æ§åˆ¶å½¢å‚å…·ä½“é™åˆ¶çš„ç±»å‹ã€‚

Java åœ¨å¼•å…¥æ³›å‹ä¹‹å‰ï¼Œè¡¨ç¤ºå¯å˜å¯¹è±¡ï¼Œé€šå¸¸ä½¿ç”¨ Object æ¥å®ç°ï¼Œä½†æ˜¯åœ¨è¿›è¡Œç±»å‹å¼ºåˆ¶è½¬æ¢æ—¶å­˜åœ¨å®‰å…¨é£é™©ã€‚æœ‰äº†æ³›å‹åï¼š

- ç¼–è¯‘æœŸé—´ç¡®å®šç±»å‹ï¼Œä¿è¯ç±»å‹å®‰å…¨ï¼Œæ”¾çš„æ˜¯ä»€ä¹ˆï¼Œå–çš„ä¹Ÿæ˜¯ä»€ä¹ˆï¼Œä¸ç”¨æ‹…å¿ƒæŠ›å‡º ClassCastException å¼‚å¸¸ã€‚

- æå‡å¯è¯»æ€§ï¼Œä»ç¼–ç é˜¶æ®µå°±æ˜¾å¼åœ°çŸ¥é“æ³›å‹é›†åˆã€æ³›å‹æ–¹æ³•ç­‰å¤„ç†çš„å¯¹è±¡ç±»å‹æ˜¯ä»€ä¹ˆã€‚

- æ³›å‹åˆå¹¶äº†åŒç±»å‹çš„å¤„ç†ä»£ç æé«˜ä»£ç çš„é‡ç”¨ç‡ï¼Œå¢åŠ ç¨‹åºçš„é€šç”¨çµæ´»æ€§ã€‚

ç¼–è¯‘å™¨å¯ä»¥å¯¹æ³›å‹å‚æ•°è¿›è¡Œæ£€æµ‹ï¼Œå¹¶ä¸”é€šè¿‡æ³›å‹å‚æ•°å¯ä»¥æŒ‡å®šä¼ å…¥çš„å¯¹è±¡ç±»å‹ã€‚æ¯”å¦‚ `ArrayList<Persion> persons = new ArrayList<Persion>()` è¿™è¡Œä»£ç å°±æŒ‡æ˜äº†è¯¥ `ArrayList` å¯¹è±¡åªèƒ½ä¼ å…¥ `Persion` å¯¹è±¡ï¼Œå¦‚æœä¼ å…¥å…¶ä»–ç±»å‹çš„å¯¹è±¡å°±ä¼šæŠ¥é”™ã€‚

---

## æ³›å‹çš„ä½¿ç”¨æ–¹å¼

> **æ³›å‹ç±»**

```java
public class Generic<T>{
    private T key;

    public Generic(T key){
        this.key = key;
    }

    public T getKey(){
        return key;
    }
}

// å®ä¾‹åŒ–æ³›å‹ç±»
Generic<Integer> genericInteger = new Generic<Integer>(123456);
```

> **æ³›å‹æ¥å£**

```java
public interface Generator<T>{
    public T method();
}
```

**å®ç°æ³›å‹æ¥å£ï¼Œä¸æŒ‡å®šç±»å‹**

```java
class GeneratorImpl<T> implements Generator<T>{
    @Override
    public T method() {
        return null;
    }
}
```

**å®ç°æ³›å‹æ¥å£ï¼ŒæŒ‡å®šç±»å‹ï¼š**

```java
class GeneratorImpl<T> implements Generator<String>{
    @Override
    public String method(){
        return "hello";
    }
}
```

> **æ³›å‹æ–¹æ³•**

```java
public static < E > void printArray( E[] inputArray )
{
        for ( E element : inputArray ){
        System.out.printf( "%s ", element );
        }
        System.out.println();
}
```

**ä½¿ç”¨**

```java
// åˆ›å»ºä¸åŒç±»å‹æ•°ç»„ï¼š Integer, Double å’Œ Character
Integer[] intArray = { 1, 2, 3 };
String[] stringArray = { "Hello", "World" };
printArray( intArray  );
printArray( stringArray  );
```

**æ³¨æ„**

æ³¨æ„: public static < E > void printArray( E[] inputArray ) ä¸€èˆ¬è¢«ç§°ä¸ºé™æ€æ³›å‹æ–¹æ³•;åœ¨ java ä¸­æ³›å‹åªæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå¿…é¡»åœ¨ä¼ é€’ç±»å‹åæ‰èƒ½ä½¿ç”¨ã€‚ç±»åœ¨å®ä¾‹åŒ–æ—¶æ‰èƒ½çœŸæ­£çš„ä¼ é€’ç±»å‹å‚æ•°ï¼Œç”±äºé™æ€æ–¹æ³•çš„åŠ è½½å…ˆäºç±»çš„å®ä¾‹åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´ç±»ä¸­çš„æ³›å‹è¿˜æ²¡æœ‰ä¼ é€’çœŸæ­£çš„ç±»å‹å‚æ•°ï¼Œé™æ€çš„æ–¹æ³•çš„åŠ è½½å°±å·²ç»å®Œæˆäº†ï¼Œæ‰€ä»¥é™æ€æ³›å‹æ–¹æ³•æ˜¯æ²¡æœ‰åŠæ³•ä½¿ç”¨ç±»ä¸Šå£°æ˜çš„æ³›å‹çš„ã€‚åªèƒ½ä½¿ç”¨è‡ªå·±å£°æ˜çš„ <E>

---

## æ³›å‹çš„è¡¨ç¤º

ä¸€èˆ¬æ³›å‹æœ‰çº¦å®šçš„ç¬¦å·ï¼šE ä»£è¡¨ Elementï¼Œ<E> é€šå¸¸åœ¨é›†åˆä¸­ä½¿ç”¨ï¼›T ä»£è¡¨ Typeï¼Œ<T >é€šå¸¸ç”¨äºè¡¨ç¤ºç±»ï¼›K ä»£è¡¨ Keyï¼ŒV ä»£è¡¨ Valueï¼Œ<K, V> é€šå¸¸ç”¨äºé”®å€¼å¯¹çš„è¡¨ç¤ºï¼›? ä»£è¡¨æ³›å‹é€šé…ç¬¦ã€‚

æ³›å‹çš„è¡¨è¾¾å¼æœ‰å¦‚ä¸‹å‡ ç§ï¼š

- æ™®é€šç¬¦å· <T>

- æ— è¾¹ç•Œé€šé…ç¬¦ <?>

- ä¸Šç•Œé€šé…ç¬¦ <? extends E> çˆ¶ç±»æ˜¯ E

- ä¸‹ç•Œé€šé…ç¬¦ <? super E> æ˜¯ E çš„çˆ¶ç±»

---

## é¡¹ç›®ä¸­å“ªé‡Œä½¿ç”¨åˆ°äº†æ³›å‹

- è‡ªå®šä¹‰æ¥å£é€šç”¨è¿”å›ç»“æœ`CommonResult<T>` é€šè¿‡å‚æ•°`T`å¯æ ¹æ®å…·ä½“çš„è¿”å›ç±»å‹åŠ¨æ€æŒ‡å®šç»“æœçš„æ•°æ®ç±»å‹
- å®šä¹‰ Excel å¤„ç†ç±» `ExcelUtil<T>` ç”¨äºåŠ¨æ€æŒ‡å®š Excel å¯¼å‡ºçš„æ•°æ®ç±»å‹
- æ„å»ºé›†åˆå·¥å…·ç±»ï¼ˆå‚è€ƒ `Collections` ä¸­çš„ `sort`, `binarySearch` æ–¹æ³•ï¼‰

---

# å…«ã€åå°„

## ä½•è°“åå°„

Javaåå°„æœºåˆ¶æ˜¯æŒ‡ï¼šåœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—è¯¥ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹ä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½è°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªå±æ€§å’Œæ–¹æ³•ã€‚è¿™ç§**åŠ¨æ€è·å–ç±»ä¿¡æ¯**ä»¥åŠ**åŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•**çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚

---

## åå°„çš„ä¼˜ç¼ºç‚¹

- ä½¿ä»£ç æ›´åŠ çµæ´»ã€ä¸ºå„ç§æ¡†æ¶æä¾›å¼€ç®±å³ç”¨çš„åŠŸèƒ½æä¾›äº†ä¾¿åˆ©
- å½“æˆ‘ä»¬æ‹¥æœ‰åœ¨è¿è¡Œæ—¶åˆ†ææ“ä½œç±»çš„èƒ½åŠ›çš„åŒæ—¶ï¼Œå¢åŠ äº†å®‰å…¨é—®é¢˜ã€‚æ¯”å¦‚å¯ä»¥æ— è§†æ³›å‹å‚æ•°çš„å®‰å…¨æ£€æŸ¥ï¼ˆæ³›å‹å‚æ•°çš„å®‰å…¨æ£€æŸ¥å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ï¼‰ã€‚
- åå°„çš„æ€§èƒ½ä¹Ÿè¦ç¨å·®ç‚¹ï¼Œä¸è¿‡ï¼Œå¯¹äºæ¡†æ¶æ¥è¯´å®é™…æ˜¯å½±å“ä¸å¤§çš„ã€‚
  
---

## åå°„çš„åº”ç”¨åœºæ™¯

- Spring/Spring Bootã€ Mybatisç­‰å¤§é‡æ¡†æ¶éƒ½ä½¿ç”¨äº†åå°„æœºåˆ¶
- Javaçš„`æ³¨è§£`ä¹Ÿä½¿ç”¨äº†åå°„ã€‚å½“æˆ‘ä»¬ä½¿ç”¨`Spring`æ—¶ï¼ŒåŸºäºåå°„åˆ†æç±»ï¼Œè·å–åˆ°ç±»/å±æ€§/æ–¹æ³•/æ–¹æ³•ä¸Šçš„å‚æ•°çš„æ³¨è§£ã€‚å½“æˆ‘ä»¬è·å–åˆ°æ³¨è§£ä¹‹åï¼Œå°±å¯ä»¥è¿›ä¸€æ­¥å¤„ç†

## åå°„ç›¸å…³çš„ç±»åŒ…

åå°„æœºåˆ¶çš„ç›¸å…³ç±»åœ¨`java.lang.reflect.*;`

åå°„æœºåˆ¶ç›¸å…³çš„é‡è¦ç±»:

| ç±»                            | å«ä¹‰    ï½œ                                                        |
| ----------------------------- | ----------------------------------------------------------------- |
| java.lang.Class               | ä»£è¡¨æ•´ä¸ªå­—èŠ‚ç ã€‚ä»£è¡¨ä¸€ä¸ªç±»å‹ï¼Œä»£è¡¨æ•´ä¸ªç±»ã€‚                        |
| java.lang.reflect.Method      | ä»£è¡¨å­—èŠ‚ç ä¸­çš„æ–¹æ³•å­—èŠ‚ç ã€‚ä»£è¡¨ç±»ä¸­çš„æ–¹æ³•ã€‚                        |
| java.lang.reflect.Constructor | ä»£è¡¨å­—èŠ‚ç ä¸­çš„æ„é€ æ–¹æ³•å­—èŠ‚ç ã€‚ä»£è¡¨ç±»ä¸­çš„æ„é€ æ–¹æ³•ã€‚                 |
| java.lang.reflect.Field       | ä»£è¡¨å­—èŠ‚ç ä¸­çš„å±æ€§å­—èŠ‚ç ã€‚ä»£è¡¨ç±»ä¸­çš„æˆå‘˜å˜é‡ï¼ˆé™æ€å˜é‡+å®ä¾‹å˜é‡ï¼‰     |

æ³¨ï¼šå¿…é¡»å…ˆè·å¾—Classæ‰èƒ½è·å–Methodã€Constructorã€Fieldã€‚

## åå°„å®æˆ˜

### è·å–Classå¯¹è±¡çš„å››ç§æ–¹å¼

> **çŸ¥é“å…·ä½“ç±»çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨**

```java
Class alunbarClass = TargetObject.class;
```

> **é€šè¿‡ Class.forName()ä¼ å…¥ç±»çš„å…¨è·¯å¾„è·å–**

```java
Class alunbarClass1 = Class.forName("cn.javaguide.TargetObject");
```

> **é€šè¿‡å¯¹è±¡å®ä¾‹ instance.getClass() è·å–**

```java
TargetObject o = new TargetObject();
Class alunbarClass2 = o.getClass();
```

> **é€šè¿‡ç±»åŠ è½½å™¨xxxClassLoader.loadClass()ä¼ å…¥ç±»è·¯å¾„è·å–**

```java
ClassLoader.getSystemClassLoader().loadClass("cn.javaguide.TargetObject");
```

é€šè¿‡ç±»åŠ è½½å™¨è·å– Class å¯¹è±¡ä¸ä¼šè¿›è¡Œåˆå§‹åŒ–ï¼Œæ„å‘³ç€ä¸è¿›è¡ŒåŒ…æ‹¬åˆå§‹åŒ–ç­‰ä¸€ç³»åˆ—æ­¥éª¤ï¼Œé™æ€ä»£ç å—å’Œé™æ€å¯¹è±¡ä¸ä¼šå¾—åˆ°æ‰§è¡Œ


### åå°„çš„ä¸€äº›åŸºæœ¬æ“ä½œ

> **åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬è¦ä½¿ç”¨åå°„æ“ä½œçš„ç±» TargetObject**

```java
package cn.javaguide;

public class TargetObject {
    private String value;

    public TargetObject() {
        value = "JavaGuide";
    }

    public void publicMethod(String s) {
        System.out.println("I love " + s);
    }

    private void privateMethod() {
        System.out.println("value is " + value);
    }
}
```

> **ä½¿ç”¨åå°„æ“ä½œè¿™ä¸ªç±»çš„æ–¹æ³•ä»¥åŠå‚æ•°**

```java
package cn.javaguide;

import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class Main {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InstantiationException, InvocationTargetException, NoSuchFieldException {
        /**
         * è·å– TargetObject ç±»çš„ Class å¯¹è±¡å¹¶ä¸”åˆ›å»º TargetObject ç±»å®ä¾‹
         */
        Class<?> targetClass = Class.forName("cn.javaguide.TargetObject");
        TargetObject targetObject = (TargetObject) targetClass.newInstance();
        /**
         * è·å– TargetObject ç±»ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•
         */
        Method[] methods = targetClass.getDeclaredMethods();
        for (Method method : methods) {
            System.out.println(method.getName());
        }

        /**
         * è·å–æŒ‡å®šæ–¹æ³•å¹¶è°ƒç”¨
         */
        Method publicMethod = targetClass.getDeclaredMethod("publicMethod",
                String.class);

        publicMethod.invoke(targetObject, "JavaGuide");

        /**
         * è·å–æŒ‡å®šå‚æ•°å¹¶å¯¹å‚æ•°è¿›è¡Œä¿®æ”¹
         */
        Field field = targetClass.getDeclaredField("value");
        //ä¸ºäº†å¯¹ç±»ä¸­çš„å‚æ•°è¿›è¡Œä¿®æ”¹,å–æ¶ˆå®‰å…¨æ£€æŸ¥
        field.setAccessible(true);
        field.set(targetObject, "JavaGuide");

        /**
         * è°ƒç”¨ private æ–¹æ³•
         */
        Method privateMethod = targetClass.getDeclaredMethod("privateMethod");
        //ä¸ºäº†è°ƒç”¨privateæ–¹æ³•,å–æ¶ˆå®‰å…¨æ£€æŸ¥
        privateMethod.setAccessible(true);
        privateMethod.invoke(targetObject);
    }
}
```

**è¾“å‡º**

```java
publicMethod
privateMethod
I love JavaGuide
value is JavaGuide
```

---

# ä¹ã€æ³¨è§£

## ä½•è°“æ³¨è§£

`Annotation`(æ³¨è§£)æ˜¯java5 å¼•å…¥å¼€å§‹å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå¯ä»¥çœ‹ä½œä¸€ç§ç‰¹æ®Šçš„æ³¨è§£ã€‚ä¸»è¦ç”¨äºä¿®é¥°ç±»ã€æ–¹æ³•æˆ–è€…å˜é‡ï¼Œ**æä¾›æŸäº›ä¿¡æ¯ä¾›ç¨‹åºåœ¨ç¼–è¯‘æˆ–è¿è¡Œæ—¶ä½¿ç”¨**

æ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ªç»§æ‰¿äº†Annotation çš„ç‰¹æ®Šæ¥å£ï¼š

```java
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.SOURCE)
public @interface Override {

}

public interface Override extends Annotation{

}
```

---

## æ³¨è§£çš„è§£ææ–¹æ³•æœ‰å“ªå‡ ç§

æ³¨è§£åªæœ‰è¢«è§£æä¹‹åæ‰ä¼šç”Ÿæ•ˆï¼Œå¸¸è§çš„è§£ææ–¹æ³•æœ‰ä¸¤ç§ï¼š

- ç¼–è¯‘å™¨ç›´æ¥æ‰«æï¼šç¼–è¯‘å™¨åœ¨ç¼–è¯‘ Java ä»£ç çš„æ—¶å€™æ‰«æå¯¹åº”çš„æ³¨è§£å¹¶å¤„ç†ï¼Œæ¯”å¦‚æŸä¸ªæ–¹æ³•ä½¿ç”¨@Override æ³¨è§£ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šæ£€æµ‹å½“å‰çš„æ–¹æ³•æ˜¯å¦é‡å†™äº†çˆ¶ç±»å¯¹åº”çš„æ–¹æ³•ã€‚
- è¿è¡ŒæœŸé€šè¿‡åå°„å¤„ç†ï¼šåƒæ¡†æ¶ä¸­è‡ªå¸¦çš„æ³¨è§£(æ¯”å¦‚ Spring æ¡†æ¶çš„ @Value ã€@Component)éƒ½æ˜¯é€šè¿‡åå°„æ¥è¿›è¡Œå¤„ç†çš„ã€‚

# åã€SPI

## ä½•è°“SPIï¼Ÿ

SPI å³ `Service Provider Interface` ï¼Œå­—é¢æ„æ€å°±æ˜¯ï¼šâ€œæœåŠ¡æä¾›è€…çš„æ¥å£â€ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼šä¸“é—¨æä¾›ç»™**æœåŠ¡æä¾›è€…æˆ–è€…æ‰©å±•æ¡†æ¶åŠŸèƒ½çš„å¼€å‘è€…å»ä½¿ç”¨çš„ä¸€ä¸ªæ¥å£ã€‚**

SPI å°†æœåŠ¡æ¥å£å’Œå…·ä½“çš„æœåŠ¡å®ç°åˆ†ç¦»å¼€æ¥ï¼Œå°†æœåŠ¡è°ƒç”¨æ–¹å’ŒæœåŠ¡å®ç°è€…è§£è€¦ï¼Œèƒ½å¤Ÿæå‡ç¨‹åºçš„æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§ã€‚ä¿®æ”¹æˆ–è€…æ›¿æ¢æœåŠ¡å®ç°å¹¶ä¸éœ€è¦ä¿®æ”¹è°ƒç”¨æ–¹ã€‚

å¾ˆå¤šæ¡†æ¶éƒ½ä½¿ç”¨äº† Java çš„ SPI æœºåˆ¶ï¼Œæ¯”å¦‚ï¼šSpring æ¡†æ¶ã€æ•°æ®åº“åŠ è½½é©±åŠ¨ã€æ—¥å¿—æ¥å£ã€ä»¥åŠ Dubbo çš„æ‰©å±•å®ç°ç­‰ç­‰ã€‚

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/basis/spi/22e1830e0b0e4115a882751f6c417857tplv-k3u1fbpfcp-zoom-1.jpeg)

---

## SPIå’ŒAPIçš„åŒºåˆ«

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/basis/spi/1ebd1df862c34880bc26b9d494535b3dtplv-k3u1fbpfcp-watermark.png)

ä¸€èˆ¬æ¨¡å—ä¹‹é—´éƒ½æ˜¯é€šè¿‡é€šè¿‡æ¥å£è¿›è¡Œé€šè®¯ï¼Œé‚£æˆ‘ä»¬åœ¨æœåŠ¡è°ƒç”¨æ–¹å’ŒæœåŠ¡å®ç°æ–¹ï¼ˆä¹Ÿç§°æœåŠ¡æä¾›è€…ï¼‰ä¹‹é—´å¼•å…¥ä¸€ä¸ªâ€œæ¥å£â€ã€‚

å½“å®ç°æ–¹æä¾›äº†æ¥å£å’Œå®ç°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨å®ç°æ–¹çš„æ¥å£ä»è€Œæ‹¥æœ‰å®ç°æ–¹ç»™æˆ‘ä»¬æä¾›çš„èƒ½åŠ›ï¼Œè¿™å°±æ˜¯ **API** ï¼Œè¿™ç§æ¥å£å’Œå®ç°éƒ½æ˜¯æ”¾åœ¨å®ç°æ–¹çš„ã€‚

å½“æ¥å£å­˜åœ¨äºè°ƒç”¨æ–¹è¿™è¾¹æ—¶ï¼Œå°±æ˜¯ **SPI** ï¼Œç”±æ¥å£è°ƒç”¨æ–¹ç¡®å®šæ¥å£è§„åˆ™ï¼Œç„¶åç”±ä¸åŒçš„å‚å•†å»æ ¹ç»è¿™ä¸ªè§„åˆ™å¯¹è¿™ä¸ªæ¥å£è¿›è¡Œå®ç°ï¼Œä»è€Œæä¾›æœåŠ¡ã€‚

ä¸¾ä¸ªé€šä¿—æ˜“æ‡‚çš„ä¾‹å­ï¼šå…¬å¸ H æ˜¯ä¸€å®¶ç§‘æŠ€å…¬å¸ï¼Œæ–°è®¾è®¡äº†ä¸€æ¬¾èŠ¯ç‰‡ï¼Œç„¶åç°åœ¨éœ€è¦é‡äº§äº†ï¼Œè€Œå¸‚é¢ä¸Šæœ‰å¥½å‡ å®¶èŠ¯ç‰‡åˆ¶é€ ä¸šå…¬å¸ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œåªè¦ H å…¬å¸æŒ‡å®šå¥½äº†è¿™èŠ¯ç‰‡ç”Ÿäº§çš„æ ‡å‡†ï¼ˆå®šä¹‰å¥½äº†æ¥å£æ ‡å‡†ï¼‰ï¼Œé‚£ä¹ˆè¿™äº›åˆä½œçš„èŠ¯ç‰‡å…¬å¸ï¼ˆæœåŠ¡æä¾›è€…ï¼‰å°±æŒ‰ç…§æ ‡å‡†äº¤ä»˜è‡ªå®¶ç‰¹è‰²çš„èŠ¯ç‰‡ï¼ˆæä¾›ä¸åŒæ–¹æ¡ˆçš„å®ç°ï¼Œä½†æ˜¯ç»™å‡ºæ¥çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼‰ã€‚

--- 

## SPIçš„ä¼˜ç¼ºç‚¹

- é€šè¿‡ SPI æœºåˆ¶èƒ½å¤Ÿå¤§å¤§åœ°æé«˜æ¥å£è®¾è®¡çš„çµæ´»æ€§
- éœ€è¦éå†åŠ è½½æ‰€æœ‰çš„å®ç°ç±»ï¼Œä¸èƒ½åšåˆ°æŒ‰éœ€åŠ è½½ï¼Œè¿™æ ·æ•ˆç‡è¿˜æ˜¯ç›¸å¯¹è¾ƒä½çš„ã€‚
- å½“å¤šä¸ª ServiceLoader åŒæ—¶ load æ—¶ï¼Œä¼šæœ‰å¹¶å‘é—®é¢˜ã€‚

---

# åä¸€ã€è¯­æ³•ç³–

## ä»€ä¹ˆæ˜¯è¯­æ³•ç³–

è¯­æ³•ç³–ï¼ˆSyntactic Sugarï¼‰ ä¹Ÿç§°ç³–è¡£è¯­æ³•ï¼šæŒ‡åœ¨è®¡ç®—æœºè¯­è¨€ä¸­æ·»åŠ çš„æŸç§è¯­æ³•ï¼Œè¿™ç§è¯­æ³•å¯¹è¯­è¨€çš„åŠŸèƒ½å¹¶æ²¡æœ‰å½±å“ï¼Œä½†æ˜¯æ›´æ–¹ä¾¿ç¨‹åºå‘˜ä½¿ç”¨ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¯­æ³•ç³–è®©ç¨‹åºæ›´åŠ ç®€æ´ï¼Œæœ‰æ›´é«˜çš„å¯è¯»æ€§ã€‚

---

## Javaä¸­å¸¸è§çš„è¯­æ³•ç³–

Java è™šæ‹Ÿæœºå¹¶ä¸æ”¯æŒè¿™äº›è¯­æ³•ç³–ã€‚è¿™äº›è¯­æ³•ç³–åœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šè¢«è¿˜åŸæˆç®€å•çš„åŸºç¡€è¯­æ³•ç»“æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯è§£è¯­æ³•ç³–ã€‚

è¯´åˆ°ç¼–è¯‘ï¼Œå¤§å®¶è‚¯å®šéƒ½çŸ¥é“ï¼ŒJava è¯­è¨€ä¸­ï¼Œjavacå‘½ä»¤å¯ä»¥å°†åç¼€åä¸º.javaçš„æºæ–‡ä»¶ç¼–è¯‘ä¸ºåç¼€åä¸º.classçš„å¯ä»¥è¿è¡Œäº Java è™šæ‹Ÿæœºçš„å­—èŠ‚ç ã€‚

åœ¨`com.sun.tools.javac.main.JavaCompiler`çš„æºç ä¸­ï¼Œå¯ä»¥å‘ç°åœ¨`compile()`ä¸­æœ‰ä¸€ä¸ªæ­¥éª¤å°±æ˜¯è°ƒç”¨`desugar()`ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯è´Ÿè´£è§£è¯­æ³•ç³–çš„å®ç°çš„ã€‚


Java ä¸­æœ€å¸¸ç”¨çš„è¯­æ³•ç³–ä¸»è¦æœ‰æ³›å‹ã€å˜é•¿å‚æ•°ã€æ¡ä»¶ç¼–è¯‘ã€è‡ªåŠ¨æ‹†è£…ç®±ã€å†…éƒ¨ç±»ç­‰ã€‚

æˆ‘ä»¬è¿™é‡Œä¼šç”¨åˆ°[åç¼–è¯‘](https://mp.weixin.qq.com/s?__biz=MzI3NzE0NjcwMg==&mid=2650120609&idx=1&sn=5659f96310963ad57d55b48cee63c788&chksm=f36bbc80c41c3596a1e4bf9501c6280481f1b9e06d07af354474e6f3ed366fef016df673a7ba&scene=21#wechat_redirect)ï¼Œä½ å¯ä»¥é€šè¿‡ [Decompilers online](http://www.javadecompilers.com/) å¯¹ Class æ–‡ä»¶è¿›è¡Œåœ¨çº¿åç¼–è¯‘ã€‚

### switch æ”¯æŒ String ä¸æšä¸¾

ä» Java 7 å¼€å§‹ï¼ŒJava è¯­è¨€ä¸­çš„è¯­æ³•ç³–åœ¨é€æ¸ä¸°å¯Œï¼Œå…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„å°±æ˜¯ Java 7 ä¸­`switch`å¼€å§‹æ”¯æŒ`String`ã€‚

åœ¨å¼€å§‹ä¹‹å‰å…ˆç§‘æ™®ä¸‹ï¼ŒJava ä¸­çš„`switch`è‡ªèº«åŸæœ¬å°±æ”¯æŒåŸºæœ¬ç±»å‹ã€‚æ¯”å¦‚`int`ã€`char`ç­‰ã€‚

- å¯¹äº`int`ç±»å‹ï¼Œç›´æ¥è¿›è¡Œæ•°å€¼çš„æ¯”è¾ƒã€‚
- å¯¹äº`char`ç±»å‹åˆ™æ˜¯æ¯”è¾ƒå…¶ ascii ç ã€‚
 
æ‰€ä»¥ï¼Œå¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼Œ`switch`ä¸­å…¶å®åªèƒ½ä½¿ç”¨æ•´å‹ï¼Œä»»ä½•ç±»å‹çš„æ¯”è¾ƒéƒ½è¦è½¬æ¢æˆæ•´å‹ã€‚æ¯”å¦‚`byte`ã€‚`short`ï¼Œ`char`(ackii ç æ˜¯æ•´å‹)ä»¥åŠ`int`ã€‚

**é‚£ä¹ˆæ¥ä¸‹æ¥çœ‹ä¸‹`switch`å¯¹`String`å¾—æ”¯æŒï¼Œæœ‰ä»¥ä¸‹ä»£ç ï¼š**

```java
public class switchDemoString {
    public static void main(String[] args) {
        String str = "world";
        switch (str) {
        case "hello":
            System.out.println("hello");
            break;
        case "world":
            System.out.println("world");
            break;
        default:
            break;
        }
    }
}
```

**åç¼–è¯‘åå†…å®¹å¦‚ä¸‹ï¼š**

```java
public class switchDemoString
{
    public switchDemoString()
    {
    }
    public static void main(String args[])
    {
        String str = "world";
        String s;
        switch((s = str).hashCode())
        {
        default:
            break;
        case 99162322:
            if(s.equals("hello"))
                System.out.println("hello");
            break;
        case 113318802:
            if(s.equals("world"))
                System.out.println("world");
            break;
        }
    }
}
```

çœ‹åˆ°è¿™ä¸ªä»£ç ï¼Œä½ çŸ¥é“åŸæ¥ **å­—ç¬¦ä¸²çš„ switch æ˜¯é€šè¿‡`equals()`å’Œ`hashCode()`æ–¹æ³•æ¥å®ç°çš„ã€‚** è¿˜å¥½`hashCode()`æ–¹æ³•è¿”å›çš„æ˜¯`int`ï¼Œè€Œä¸æ˜¯`long`ã€‚

ä»”ç»†çœ‹ä¸‹å¯ä»¥å‘ç°ï¼Œè¿›è¡Œ`switch`çš„å®é™…æ˜¯å“ˆå¸Œå€¼ï¼Œç„¶åé€šè¿‡ä½¿ç”¨`equals`æ–¹æ³•æ¯”è¾ƒè¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œè¿™ä¸ªæ£€æŸ¥æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå“ˆå¸Œå¯èƒ½ä¼šå‘ç”Ÿç¢°æ’ã€‚å› æ­¤å®ƒçš„æ€§èƒ½æ˜¯ä¸å¦‚ä½¿ç”¨æšä¸¾è¿›è¡Œ `switch` æˆ–è€…ä½¿ç”¨çº¯æ•´æ•°å¸¸é‡ï¼Œä½†è¿™ä¹Ÿä¸æ˜¯å¾ˆå·®ã€‚

### æ³›å‹

æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¾ˆå¤šè¯­è¨€éƒ½æ˜¯æ”¯æŒæ³›å‹çš„ï¼Œä½†æ˜¯å¾ˆå¤šäººä¸çŸ¥é“çš„æ˜¯ï¼Œ**ä¸åŒçš„ç¼–è¯‘å™¨å¯¹äºæ³›å‹çš„å¤„ç†æ–¹å¼æ˜¯ä¸åŒçš„** ,ä¸€ä¸ªç¼–è¯‘å™¨å¤„ç†æ³›å‹æœ‰ä¸¤ç§æ–¹å¼ï¼š`Code specialization`å’Œ`Code sharing`ã€‚

- C++å’Œ C#æ˜¯ä½¿ç”¨`Code specialization`çš„å¤„ç†æœºåˆ¶
- Java ä½¿ç”¨çš„æ˜¯`Code sharing`çš„æœºåˆ¶ã€‚

> Code sharing æ–¹å¼ä¸ºæ¯ä¸ªæ³›å‹ç±»å‹åˆ›å»ºå”¯ä¸€çš„å­—èŠ‚ç è¡¨ç¤ºï¼Œå¹¶ä¸”å°†è¯¥æ³›å‹ç±»å‹çš„å®ä¾‹éƒ½æ˜ å°„åˆ°è¿™ä¸ªå”¯ä¸€çš„å­—èŠ‚ç è¡¨ç¤ºä¸Šã€‚å°†å¤šç§æ³›å‹ç±»å½¢å®ä¾‹æ˜ å°„åˆ°å”¯ä¸€çš„å­—èŠ‚ç è¡¨ç¤ºæ˜¯é€šè¿‡ç±»å‹æ“¦é™¤ï¼ˆ`type erasue`ï¼‰å®ç°çš„ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œ**å¯¹äº Java è™šæ‹Ÿæœºæ¥è¯´ï¼Œä»–æ ¹æœ¬ä¸è®¤è¯†`Map<String, String> map`è¿™æ ·çš„è¯­æ³•ã€‚éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µé€šè¿‡ç±»å‹æ“¦é™¤çš„æ–¹å¼è¿›è¡Œè§£è¯­æ³•ç³–ã€‚**

ç±»å‹æ“¦é™¤çš„ä¸»è¦è¿‡ç¨‹å¦‚ä¸‹ï¼š 

- 1. å°†æ‰€æœ‰çš„æ³›å‹å‚æ•°ç”¨å…¶æœ€å·¦è¾¹ç•Œï¼ˆæœ€é¡¶çº§çš„çˆ¶ç±»å‹ï¼‰ç±»å‹æ›¿æ¢ã€‚ 
- 2. ç§»é™¤æ‰€æœ‰çš„ç±»å‹å‚æ•°ã€‚

**ä»¥ä¸‹ä»£ç ï¼š**

```java
Map<String, String> map = new HashMap<String, String>();
map.put("name", "hollis");
map.put("wechat", "Hollis");
map.put("blog", "www.hollischuang.com");
```

**è§£è¯­æ³•ç³–ä¹‹åä¼šå˜æˆï¼š**

```java
Map map = new HashMap();
map.put("name", "hollis");
map.put("wechat", "Hollis");
map.put("blog", "www.hollischuang.com");
```

**ä»¥ä¸‹ä»£ç ï¼š**

```java
public static <A extends Comparable<A>> A max(Collection<A> xs) {
    Iterator<A> xi = xs.iterator();
    A w = xi.next();
    while (xi.hasNext()) {
        A x = xi.next();
        if (w.compareTo(x) < 0)
            w = x;
    }
    return w;
}
```

**ç±»å‹æ“¦é™¤åä¼šå˜æˆï¼š**

```java
 public static Comparable max(Collection xs){
    Iterator xi = xs.iterator();
    Comparable w = (Comparable)xi.next();
    while(xi.hasNext())
    {
        Comparable x = (Comparable)xi.next();
        if(w.compareTo(x) < 0)
            w = x;
    }
    return w;
}
```

**è™šæ‹Ÿæœºä¸­æ²¡æœ‰æ³›å‹ï¼Œåªæœ‰æ™®é€šç±»å’Œæ™®é€šæ–¹æ³•ï¼Œæ‰€æœ‰æ³›å‹ç±»çš„ç±»å‹å‚æ•°åœ¨ç¼–è¯‘æ—¶éƒ½ä¼šè¢«æ“¦é™¤ï¼Œæ³›å‹ç±»å¹¶æ²¡æœ‰è‡ªå·±ç‹¬æœ‰çš„`Class`ç±»å¯¹è±¡ã€‚æ¯”å¦‚å¹¶ä¸å­˜åœ¨`List<String>.class`æˆ–æ˜¯`List<Integer>.class`ï¼Œè€Œåªæœ‰`List.class`ã€‚**

### è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±

è‡ªåŠ¨è£…ç®±å°±æ˜¯ Java è‡ªåŠ¨å°†åŸå§‹ç±»å‹å€¼è½¬æ¢æˆå¯¹åº”çš„å¯¹è±¡ï¼Œ
- å°† int çš„å˜é‡è½¬æ¢æˆ Integer å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè£…ç®±ï¼Œ
- å°† Integer å¯¹è±¡è½¬æ¢æˆ int ç±»å‹å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšæ‹†ç®±ã€‚

å› ä¸ºè¿™é‡Œçš„è£…ç®±å’Œæ‹†ç®±æ˜¯è‡ªåŠ¨è¿›è¡Œçš„éäººä¸ºè½¬æ¢ï¼Œæ‰€ä»¥å°±ç§°ä½œä¸ºè‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ã€‚åŸå§‹ç±»å‹ byte, short, char, int, long, float, double å’Œ boolean å¯¹åº”çš„å°è£…ç±»ä¸º Byte, Short, Character, Integer, Long, Float, Double, Booleanã€‚

> **è‡ªåŠ¨è£…ç®±**

å…ˆæ¥çœ‹ä¸ªè‡ªåŠ¨è£…ç®±çš„ä»£ç ï¼š

```java
 public static void main(String[] args) {
    int i = 10;
    Integer n = i;
}
```

åç¼–è¯‘åä»£ç å¦‚ä¸‹:

```java
public static void main(String args[])
{
    int i = 10;
    Integer n = Integer.valueOf(i);
}
```

> **è‡ªåŠ¨æ‹†ç®±**

å†æ¥çœ‹ä¸ªè‡ªåŠ¨æ‹†ç®±çš„ä»£ç ï¼š

```java
public static void main(String[] args) {

    Integer i = 10;
    int n = i;
}
```

åç¼–è¯‘åä»£ç å¦‚ä¸‹ï¼š

```java
public static void main(String args[])
{
    Integer i = Integer.valueOf(10);
    int n = i.intValue();
}
```

ä»åç¼–è¯‘å¾—åˆ°å†…å®¹å¯ä»¥çœ‹å‡ºï¼Œåœ¨è£…ç®±çš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨çš„æ˜¯`Integer`çš„`valueOf(int)`æ–¹æ³•ã€‚è€Œåœ¨æ‹†ç®±çš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨çš„æ˜¯`Integer`çš„`intValue`æ–¹æ³•ã€‚

æ‰€ä»¥ï¼Œ**è£…ç®±è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒç”¨åŒ…è£…å™¨çš„ valueOf æ–¹æ³•å®ç°çš„ï¼Œè€Œæ‹†ç®±è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒç”¨åŒ…è£…å™¨çš„ xxxValue æ–¹æ³•å®ç°çš„ã€‚**

### å¯å˜é•¿å‚æ•°

å¯å˜å‚æ•°(`variable arguments`)æ˜¯åœ¨ Java 1.5 ä¸­å¼•å…¥çš„ä¸€ä¸ªç‰¹æ€§ã€‚å®ƒå…è®¸ä¸€ä¸ªæ–¹æ³•æŠŠä»»æ„æ•°é‡çš„å€¼ä½œä¸ºå‚æ•°ã€‚

çœ‹ä¸‹ä»¥ä¸‹å¯å˜å‚æ•°ä»£ç ï¼Œå…¶ä¸­ `print` æ–¹æ³•æ¥æ”¶å¯å˜å‚æ•°ï¼š

```java
public static void main(String[] args)
    {
        print("Holis", "å…¬ä¼—å·:Hollis", "åšå®¢ï¼šwww.hollischuang.com", "QQï¼š907607222");
    }

public static void print(String... strs)
{
    for (int i = 0; i < strs.length; i++)
    {
        System.out.println(strs[i]);
    }
}
```

åç¼–è¯‘åä»£ç ï¼š

```java
 public static void main(String args[])
{
    print(new String[] {
        "Holis", "\u516C\u4F17\u53F7:Hollis", "\u535A\u5BA2\uFF1Awww.hollischuang.com", "QQ\uFF1A907607222"
    });
}

public static transient void print(String strs[])
{
    for(int i = 0; i < strs.length; i++)
        System.out.println(strs[i]);

}
```

ä»åç¼–è¯‘åä»£ç å¯ä»¥çœ‹å‡ºï¼Œ**å¯å˜å‚æ•°åœ¨è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œä»–é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„é•¿åº¦å°±æ˜¯è°ƒç”¨è¯¥æ–¹æ³•æ˜¯ä¼ é€’çš„å®å‚çš„ä¸ªæ•°**ï¼Œç„¶åå†æŠŠå‚æ•°å€¼å…¨éƒ¨æ”¾åˆ°è¿™ä¸ªæ•°ç»„å½“ä¸­ï¼Œç„¶åå†æŠŠè¿™ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’åˆ°è¢«è°ƒç”¨çš„æ–¹æ³•ä¸­ã€‚

### æšä¸¾

Java SE5 æä¾›äº†ä¸€ç§æ–°çš„ç±»å‹-Java çš„æšä¸¾ç±»å‹ï¼Œå…³é”®å­—`enum`å¯ä»¥å°†ä¸€ç»„å…·åçš„å€¼çš„æœ‰é™é›†åˆåˆ›å»ºä¸ºä¸€ç§æ–°çš„ç±»å‹ï¼Œè€Œè¿™äº›å…·åçš„å€¼å¯ä»¥ä½œä¸ºå¸¸è§„çš„ç¨‹åºç»„ä»¶ä½¿ç”¨ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„åŠŸèƒ½ã€‚

è¦æƒ³çœ‹æºç ï¼Œé¦–å…ˆå¾—æœ‰ä¸€ä¸ªç±»å§ï¼Œé‚£ä¹ˆæšä¸¾ç±»å‹åˆ°åº•æ˜¯ä»€ä¹ˆç±»å‘¢ï¼Ÿæ˜¯`enum`å—ï¼Ÿç­”æ¡ˆå¾ˆæ˜æ˜¾ä¸æ˜¯ï¼Œ`enum`å°±å’Œ`class`ä¸€æ ·ï¼Œåªæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œä»–å¹¶ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆæšä¸¾æ˜¯ç”±ä»€ä¹ˆç±»ç»´æŠ¤çš„å‘¢ï¼Œæˆ‘ä»¬ç®€å•çš„å†™ä¸€ä¸ªæšä¸¾ï¼š

```java
public enum t {
    SPRING,SUMMER;
}
```

ç„¶åæˆ‘ä»¬ä½¿ç”¨åç¼–è¯‘ï¼Œçœ‹çœ‹è¿™æ®µä»£ç åˆ°åº•æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œåç¼–è¯‘åä»£ç å†…å®¹å¦‚ä¸‹ï¼š

```java
public final class T extends Enum
{
    private T(String s, int i)
    {
        super(s, i);
    }
    public static T[] values()
    {
        T at[];
        int i;
        T at1[];
        System.arraycopy(at = ENUM$VALUES, 0, at1 = new T[i = at.length], 0, i);
        return at1;
    }

    public static T valueOf(String s)
    {
        return (T)Enum.valueOf(demo/T, s);
    }

    public static final T SPRING;
    public static final T SUMMER;
    private static final T ENUM$VALUES[];
    static
    {
        SPRING = new T("SPRING", 0);
        SUMMER = new T("SUMMER", 1);
        ENUM$VALUES = (new T[] {
            SPRING, SUMMER
        });
    }
}
```

é€šè¿‡åç¼–è¯‘åä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ`public final class T extends Enum`ï¼Œè¯´æ˜ï¼Œè¯¥ç±»æ˜¯ç»§æ‰¿äº†`Enum`ç±»çš„ï¼ŒåŒæ—¶`final`å…³é”®å­—å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ä¸ªç±»ä¹Ÿæ˜¯ä¸èƒ½è¢«ç»§æ‰¿çš„ã€‚

**å½“æˆ‘ä»¬ä½¿ç”¨`enum`æ¥å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª`final`ç±»å‹çš„ç±»ç»§æ‰¿`Enum`ç±»ï¼Œæ‰€ä»¥æšä¸¾ç±»å‹ä¸èƒ½è¢«ç»§æ‰¿ã€‚**

### å†…éƒ¨ç±»

å†…éƒ¨ç±»åˆç§°ä¸ºåµŒå¥—ç±»ï¼Œå¯ä»¥æŠŠ**å†…éƒ¨ç±»ç†è§£ä¸ºå¤–éƒ¨ç±»çš„ä¸€ä¸ªæ™®é€šæˆå‘˜ã€‚**

**å†…éƒ¨ç±»ä¹‹æ‰€ä»¥ä¹Ÿæ˜¯è¯­æ³•ç³–ï¼Œæ˜¯å› ä¸ºå®ƒä»…ä»…æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶çš„æ¦‚å¿µï¼Œ`outer.java`é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªå†…éƒ¨ç±»`inner`ï¼Œä¸€æ—¦ç¼–è¯‘æˆåŠŸï¼Œå°±ä¼šç”Ÿæˆä¸¤ä¸ªå®Œå…¨ä¸åŒçš„`.class`æ–‡ä»¶äº†ï¼Œåˆ†åˆ«æ˜¯`outer.class`å’Œ`outer$inner.class`ã€‚æ‰€ä»¥å†…éƒ¨ç±»çš„åå­—å®Œå…¨å¯ä»¥å’Œå®ƒçš„å¤–éƒ¨ç±»åå­—ç›¸åŒã€‚**

```java
public class OutterClass {
    private String userName;

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public static void main(String[] args) {

    }

    class InnerClass{
        private String name;

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }
    }
}
```

ä»¥ä¸Šä»£ç ç¼–è¯‘åä¼šç”Ÿæˆä¸¤ä¸ª class æ–‡ä»¶ï¼š`OutterClass$InnerClass.class` ã€`OutterClass.class` ã€‚å½“æˆ‘ä»¬å°è¯•å¯¹`OutterClass.class`æ–‡ä»¶è¿›è¡Œåç¼–è¯‘çš„æ—¶å€™ï¼Œå‘½ä»¤è¡Œä¼šæ‰“å°ä»¥ä¸‹å†…å®¹ï¼š`Parsing OutterClass.class...Parsing inner class OutterClass$InnerClass.class... Generating OutterClass.jad` ã€‚ä»–ä¼šæŠŠä¸¤ä¸ªæ–‡ä»¶å…¨éƒ¨è¿›è¡Œåç¼–è¯‘ï¼Œç„¶åä¸€èµ·ç”Ÿæˆä¸€ä¸ª`OutterClass.jad`æ–‡ä»¶ã€‚æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```java
public class OutterClass
{
    class InnerClass
    {
        public String getName()
        {
            return name;
        }
        public void setName(String name)
        {
            this.name = name;
        }
        private String name;
        final OutterClass this$0;

        InnerClass()
        {
            this.this$0 = OutterClass.this;
            super();
        }
    }

    public OutterClass()
    {
    }
    public String getUserName()
    {
        return userName;
    }
    public void setUserName(String userName){
        this.userName = userName;
    }
    public static void main(String args1[])
    {
    }
    private String userName;
}
```

### æ¡ä»¶ç¼–è¯‘

â€”èˆ¬æƒ…å†µä¸‹ï¼Œç¨‹åºä¸­çš„æ¯ä¸€è¡Œä»£ç éƒ½è¦å‚åŠ ç¼–è¯‘ã€‚ä½†æœ‰æ—¶å€™å‡ºäºå¯¹ç¨‹åºä»£ç ä¼˜åŒ–çš„è€ƒè™‘ï¼Œå¸Œæœ›åªå¯¹å…¶ä¸­ä¸€éƒ¨åˆ†å†…å®¹è¿›è¡Œç¼–è¯‘ï¼Œæ­¤æ—¶å°±éœ€è¦åœ¨ç¨‹åºä¸­åŠ ä¸Šæ¡ä»¶ï¼Œè®©ç¼–è¯‘å™¨åªå¯¹æ»¡è¶³æ¡ä»¶çš„ä»£ç è¿›è¡Œç¼–è¯‘ï¼Œå°†ä¸æ»¡è¶³æ¡ä»¶çš„ä»£ç èˆå¼ƒï¼Œè¿™å°±æ˜¯**æ¡ä»¶ç¼–è¯‘**ã€‚

å¦‚åœ¨ C æˆ– CPP ä¸­ï¼Œå¯ä»¥é€šè¿‡é¢„å¤„ç†è¯­å¥æ¥å®ç°æ¡ä»¶ç¼–è¯‘ã€‚å…¶å®åœ¨ Java ä¸­ä¹Ÿå¯å®ç°æ¡ä»¶ç¼–è¯‘ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼š

```java
public class ConditionalCompilation {
    public static void main(String[] args) {
        final boolean DEBUG = true;
        if(DEBUG) {
            System.out.println("Hello, DEBUG!");
        }

        final boolean ONLINE = false;

        if(ONLINE){
            System.out.println("Hello, ONLINE!");
        }
    }
}
```

åç¼–è¯‘åä»£ç å¦‚ä¸‹ï¼š

```java
public class ConditionalCompilation
{

    public ConditionalCompilation()
    {
    }

    public static void main(String args[])
    {
        boolean DEBUG = true;
        System.out.println("Hello, DEBUG!");
        boolean ONLINE = false;
    }
}
```

é¦–å…ˆï¼Œæˆ‘ä»¬å‘ç°ï¼Œåœ¨åç¼–è¯‘åçš„ä»£ç ä¸­æ²¡æœ‰`System.out.println("Hello, ONLINE!");`ï¼Œè¿™å…¶å®å°±æ˜¯æ¡ä»¶ç¼–è¯‘ã€‚å½“`if(ONLINE)`ä¸º false çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±æ²¡æœ‰å¯¹å…¶å†…çš„ä»£ç è¿›è¡Œç¼–è¯‘ã€‚

æ‰€ä»¥ï¼Œ**Java è¯­æ³•çš„æ¡ä»¶ç¼–è¯‘ï¼Œæ˜¯é€šè¿‡åˆ¤æ–­æ¡ä»¶ä¸ºå¸¸é‡çš„ if è¯­å¥å®ç°çš„ã€‚å…¶åŸç†ä¹Ÿæ˜¯ Java è¯­è¨€çš„è¯­æ³•ç³–ã€‚æ ¹æ® if åˆ¤æ–­æ¡ä»¶çš„çœŸå‡ï¼Œç¼–è¯‘å™¨ç›´æ¥æŠŠåˆ†æ”¯ä¸º false çš„ä»£ç å—æ¶ˆé™¤ã€‚é€šè¿‡è¯¥æ–¹å¼å®ç°çš„æ¡ä»¶ç¼–è¯‘ï¼Œå¿…é¡»åœ¨æ–¹æ³•ä½“å†…å®ç°ï¼Œè€Œæ— æ³•åœ¨æ­£æ•´ä¸ª Java ç±»çš„ç»“æ„æˆ–è€…ç±»çš„å±æ€§ä¸Šè¿›è¡Œæ¡ä»¶ç¼–è¯‘ï¼Œè¿™ä¸ C/C++çš„æ¡ä»¶ç¼–è¯‘ç›¸æ¯”ï¼Œç¡®å®æ›´æœ‰å±€é™æ€§ã€‚åœ¨ Java è¯­è¨€è®¾è®¡ä¹‹åˆå¹¶æ²¡æœ‰å¼•å…¥æ¡ä»¶ç¼–è¯‘çš„åŠŸèƒ½ï¼Œè™½æœ‰å±€é™ï¼Œä½†æ˜¯æ€»æ¯”æ²¡æœ‰æ›´å¼ºã€‚**

### æ–­è¨€

åœ¨ Java ä¸­ï¼Œ`assert`å…³é”®å­—æ˜¯ä» JAVA SE 1.4 å¼•å…¥çš„ï¼Œä¸ºäº†é¿å…å’Œè€ç‰ˆæœ¬çš„ Java ä»£ç ä¸­ä½¿ç”¨äº†`assert`å…³é”®å­—å¯¼è‡´é”™è¯¯ï¼ŒJava åœ¨æ‰§è¡Œçš„æ—¶å€™é»˜è®¤æ˜¯ä¸å¯åŠ¨æ–­è¨€æ£€æŸ¥çš„ï¼ˆè¿™ä¸ªæ—¶å€™ï¼Œæ‰€æœ‰çš„æ–­è¨€è¯­å¥éƒ½å°†å¿½ç•¥ï¼ï¼‰

å¦‚æœè¦å¼€å¯æ–­è¨€æ£€æŸ¥ï¼Œåˆ™éœ€è¦ç”¨å¼€å…³`-enableassertions`æˆ–`-ea`æ¥å¼€å¯ã€‚

çœ‹ä¸€æ®µåŒ…å«æ–­è¨€çš„ä»£ç ï¼š

```java
public class AssertTest {
    public static void main(String args[]) {
        int a = 1;
        int b = 1;
        assert a == b;
        System.out.println("å…¬ä¼—å·ï¼šHollis");
        assert a != b : "Hollis";
        System.out.println("åšå®¢ï¼šwww.hollischuang.com");
    }
}
```

åç¼–è¯‘åä»£ç å¦‚ä¸‹ï¼š

```java
public class AssertTest {
   public AssertTest()
    {
    }
    public static void main(String args[])
{
    int a = 1;
    int b = 1;
    if(!$assertionsDisabled && a != b)
        throw new AssertionError();
    System.out.println("\u516C\u4F17\u53F7\uFF1AHollis");
    if(!$assertionsDisabled && a == b)
    {
        throw new AssertionError("Hollis");
    } else
    {
        System.out.println("\u535A\u5BA2\uFF1Awww.hollischuang.com");
        return;
    }
}

static final boolean $assertionsDisabled = !com/hollis/suguar/AssertTest.desiredAssertionStatus();

}
```

å¾ˆæ˜æ˜¾ï¼Œåç¼–è¯‘ä¹‹åçš„ä»£ç è¦æ¯”æˆ‘ä»¬è‡ªå·±çš„ä»£ç å¤æ‚çš„å¤šã€‚æ‰€ä»¥ï¼Œä½¿ç”¨äº† assert è¿™ä¸ªè¯­æ³•ç³–æˆ‘ä»¬èŠ‚çœäº†å¾ˆå¤šä»£ç ã€‚**å…¶å®æ–­è¨€çš„åº•å±‚å®ç°å°±æ˜¯ if è¯­è¨€ï¼Œå¦‚æœæ–­è¨€ç»“æœä¸º trueï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼Œç¨‹åºç»§ç»­æ‰§è¡Œï¼Œå¦‚æœæ–­è¨€ç»“æœä¸º falseï¼Œåˆ™ç¨‹åºæŠ›å‡º AssertError æ¥æ‰“æ–­ç¨‹åºçš„æ‰§è¡Œã€‚**`-enableassertions`ä¼šè®¾ç½®\$assertionsDisabled å­—æ®µçš„å€¼ã€‚

### æ•°å€¼å­—é¢é‡

åœ¨ java 7 ä¸­ï¼Œæ•°å€¼å­—é¢é‡ï¼Œä¸ç®¡æ˜¯æ•´æ•°è¿˜æ˜¯æµ®ç‚¹æ•°ï¼Œéƒ½å…è®¸åœ¨æ•°å­—ä¹‹é—´æ’å…¥ä»»æ„å¤šä¸ªä¸‹åˆ’çº¿ã€‚è¿™äº›ä¸‹åˆ’çº¿ä¸ä¼šå¯¹å­—é¢é‡çš„æ•°å€¼äº§ç”Ÿå½±å“ï¼Œç›®çš„å°±æ˜¯æ–¹ä¾¿é˜…è¯»ã€‚

æ¯”å¦‚ï¼š

```java
public class Test {
    public static void main(String... args) {
        int i = 10_000;
        System.out.println(i);
    }
}
```

åç¼–è¯‘åï¼š

```java
public class Test
{
  public static void main(String[] args)
  {
    int i = 10000;
    System.out.println(i);
  }
}
```

åç¼–è¯‘åå°±æ˜¯æŠŠ`_`åˆ é™¤äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ **ç¼–è¯‘å™¨å¹¶ä¸è®¤è¯†åœ¨æ•°å­—å­—é¢é‡ä¸­çš„`_`ï¼Œéœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µæŠŠä»–å»æ‰ã€‚**

### for-each

å¢å¼º for å¾ªç¯ï¼ˆ`for-each`ï¼‰ç›¸ä¿¡å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œæ—¥å¸¸å¼€å‘ç»å¸¸ä¼šç”¨åˆ°çš„ï¼Œä»–ä¼šæ¯” for å¾ªç¯è¦å°‘å†™å¾ˆå¤šä»£ç ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯­æ³•ç³–èƒŒåæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ

```java
public static void main(String... args) {
    String[] strs = {"Hollis", "å…¬ä¼—å·ï¼šHollis", "åšå®¢ï¼šwww.hollischuang.com"};
    for (String s : strs) {
        System.out.println(s);
    }
    List<String> strList = ImmutableList.of("Hollis", "å…¬ä¼—å·ï¼šHollis", "åšå®¢ï¼šwww.hollischuang.com");
    for (String s : strList) {
        System.out.println(s);
    }
}
```

åç¼–è¯‘åä»£ç å¦‚ä¸‹ï¼š

```java
public static transient void main(String args[])
{
    String strs[] = {
        "Hollis", "\u516C\u4F17\u53F7\uFF1AHollis", "\u535A\u5BA2\uFF1Awww.hollischuang.com"
    };
    String args1[] = strs;
    int i = args1.length;
    for(int j = 0; j < i; j++)
    {
        String s = args1[j];
        System.out.println(s);
    }

    List strList = ImmutableList.of("Hollis", "\u516C\u4F17\u53F7\uFF1AHollis", "\u535A\u5BA2\uFF1Awww.hollischuang.com");
    String s;
    for(Iterator iterator = strList.iterator(); iterator.hasNext(); System.out.println(s))
        s = (String)iterator.next();

}
```

ä»£ç å¾ˆç®€å•ï¼Œ**for-each çš„å®ç°åŸç†å…¶å®å°±æ˜¯ä½¿ç”¨äº†æ™®é€šçš„ for å¾ªç¯å’Œè¿­ä»£å™¨ã€‚**

### try-with-resource

Java é‡Œï¼Œå¯¹äºæ–‡ä»¶æ“ä½œ IO æµã€æ•°æ®åº“è¿æ¥ç­‰å¼€é”€éå¸¸æ˜‚è´µçš„èµ„æºï¼Œç”¨å®Œä¹‹åå¿…é¡»åŠæ—¶é€šè¿‡ close æ–¹æ³•å°†å…¶å…³é—­ï¼Œå¦åˆ™èµ„æºä¼šä¸€ç›´å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ç­‰é—®é¢˜ã€‚

å…³é—­èµ„æºçš„å¸¸ç”¨æ–¹å¼å°±æ˜¯åœ¨`finally`å—é‡Œæ˜¯é‡Šæ”¾ï¼Œå³è°ƒç”¨`close`æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå†™è¿™æ ·çš„ä»£ç ï¼š

```java
public static void main(String[] args) {
    BufferedReader br = null;
    try {
        String line;
        br = new BufferedReader(new FileReader("d:\\hollischuang.xml"));
        while ((line = br.readLine()) != null) {
            System.out.println(line);
        }
    } catch (IOException e) {
        // handle exception
    } finally {
        try {
            if (br != null) {
                br.close();
            }
        } catch (IOException ex) {
            // handle exception
        }
    }
}
```

ä» Java 7 å¼€å§‹ï¼Œjdk æä¾›äº†ä¸€ç§æ›´å¥½çš„æ–¹å¼å…³é—­èµ„æºï¼Œä½¿ç”¨`try-with-resources`è¯­å¥ï¼Œæ”¹å†™ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š

```java
public static void main(String... args) {
    try (BufferedReader br = new BufferedReader(new FileReader("d:\\ hollischuang.xml"))) {
        String line;
        while ((line = br.readLine()) != null) {
            System.out.println(line);
        }
    } catch (IOException e) {
        // handle exception
    }
}
```

çœ‹ï¼Œè¿™ç®€ç›´æ˜¯ä¸€å¤§ç¦éŸ³å•Šï¼Œè™½ç„¶æˆ‘ä¹‹å‰ä¸€èˆ¬ä½¿ç”¨`IOUtils`å»å…³é—­æµï¼Œå¹¶ä¸ä¼šä½¿ç”¨åœ¨`finally`ä¸­å†™å¾ˆå¤šä»£ç çš„æ–¹å¼ï¼Œä½†æ˜¯è¿™ç§æ–°çš„è¯­æ³•ç³–çœ‹ä¸Šå»å¥½åƒä¼˜é›…å¾ˆå¤šå‘¢ã€‚çœ‹ä¸‹ä»–çš„èƒŒåï¼š

```java
public static transient void main(String args[])
    {
        BufferedReader br;
        Throwable throwable;
        br = new BufferedReader(new FileReader("d:\\ hollischuang.xml"));
        throwable = null;
        String line;
        try
        {
            while((line = br.readLine()) != null)
                System.out.println(line);
        }
        catch(Throwable throwable2)
        {
            throwable = throwable2;
            throw throwable2;
        }
        if(br != null)
            if(throwable != null)
                try
                {
                    br.close();
                }
                catch(Throwable throwable1)
                {
                    throwable.addSuppressed(throwable1);
                }
            else
                br.close();
            break MISSING_BLOCK_LABEL_113;
            Exception exception;
            exception;
            if(br != null)
                if(throwable != null)
                    try
                    {
                        br.close();
                    }
                    catch(Throwable throwable3)
                      {
                        throwable.addSuppressed(throwable3);
                    }
                else
                    br.close();
        throw exception;
        IOException ioexception;
        ioexception;
    }
}
```

**å…¶å®èƒŒåçš„åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œé‚£äº›æˆ‘ä»¬æ²¡æœ‰åšçš„å…³é—­èµ„æºçš„æ“ä½œï¼Œç¼–è¯‘å™¨éƒ½å¸®æˆ‘ä»¬åšäº†ã€‚æ‰€ä»¥ï¼Œå†æ¬¡å°è¯äº†ï¼Œè¯­æ³•ç³–çš„ä½œç”¨å°±æ˜¯æ–¹ä¾¿ç¨‹åºå‘˜çš„ä½¿ç”¨ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯è¦è½¬æˆç¼–è¯‘å™¨è®¤è¯†çš„è¯­è¨€ã€‚**

### Lambda è¡¨è¾¾å¼

å…³äº lambda è¡¨è¾¾å¼ï¼Œæœ‰äººå¯èƒ½ä¼šæœ‰è´¨ç–‘ï¼Œå› ä¸ºç½‘ä¸Šæœ‰äººè¯´ä»–å¹¶ä¸æ˜¯è¯­æ³•ç³–ã€‚

å…¶å®æˆ‘æƒ³çº æ­£ä¸‹è¿™ä¸ªè¯´æ³•ã€‚**Labmda è¡¨è¾¾å¼ä¸æ˜¯åŒ¿åå†…éƒ¨ç±»çš„è¯­æ³•ç³–ï¼Œä½†æ˜¯ä»–ä¹Ÿæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚å®ç°æ–¹å¼å…¶å®æ˜¯ä¾èµ–äº†å‡ ä¸ª JVM åº•å±‚æä¾›çš„ lambda ç›¸å…³ apiã€‚**

å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ lambda è¡¨è¾¾å¼ã€‚éå†ä¸€ä¸ª listï¼š

```java
public static void main(String... args) {
    List<String> strList = ImmutableList.of("Hollis", "å…¬ä¼—å·ï¼šHollis", "åšå®¢ï¼šwww.hollischuang.com");

    strList.forEach( s -> { System.out.println(s); } );
}
```

ä¸ºå•¥è¯´ä»–å¹¶ä¸æ˜¯å†…éƒ¨ç±»çš„è¯­æ³•ç³–å‘¢ï¼Œå‰é¢è®²å†…éƒ¨ç±»æˆ‘ä»¬è¯´è¿‡ï¼Œå†…éƒ¨ç±»åœ¨ç¼–è¯‘ä¹‹åä¼šæœ‰ä¸¤ä¸ª class æ–‡ä»¶ï¼Œä½†æ˜¯ï¼ŒåŒ…å« lambda è¡¨è¾¾å¼çš„ç±»ç¼–è¯‘ååªæœ‰ä¸€ä¸ªæ–‡ä»¶ã€‚

åç¼–è¯‘åä»£ç å¦‚ä¸‹:

```java
public static /* varargs */ void main(String ... args) {
    ImmutableList strList = ImmutableList.of((Object)"Hollis", (Object)"\u516c\u4f17\u53f7\uff1aHollis", (Object)"\u535a\u5ba2\uff1awww.hollischuang.com");
    strList.forEach((Consumer<String>)LambdaMetafactory.metafactory(null, null, null, (Ljava/lang/Object;)V, lambda$main$0(java.lang.String ), (Ljava/lang/String;)V)());
}

private static /* synthetic */ void lambda$main$0(String s) {
    System.out.println(s);
}
```

å¯ä»¥çœ‹åˆ°ï¼Œåœ¨`forEach`æ–¹æ³•ä¸­ï¼Œå…¶å®æ˜¯è°ƒç”¨äº†`java.lang.invoke.LambdaMetafactory#metafactory`æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ç¬¬å››ä¸ªå‚æ•° `implMethod` æŒ‡å®šäº†æ–¹æ³•å®ç°ã€‚å¯ä»¥çœ‹åˆ°è¿™é‡Œå…¶å®æ˜¯è°ƒç”¨äº†ä¸€ä¸ª`lambda$main$0`æ–¹æ³•è¿›è¡Œäº†è¾“å‡ºã€‚

å†æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€ç‚¹çš„ï¼Œå…ˆå¯¹ List è¿›è¡Œè¿‡æ»¤ï¼Œç„¶åå†è¾“å‡ºï¼š

```java
public static void main(String... args) {
    List<String> strList = ImmutableList.of("Hollis", "å…¬ä¼—å·ï¼šHollis", "åšå®¢ï¼šwww.hollischuang.com");

    List HollisList = strList.stream().filter(string -> string.contains("Hollis")).collect(Collectors.toList());

    HollisList.forEach( s -> { System.out.println(s); } );
}
```

åç¼–è¯‘åä»£ç å¦‚ä¸‹ï¼š

```java
public static /* varargs */ void main(String ... args) {
    ImmutableList strList = ImmutableList.of((Object)"Hollis", (Object)"\u516c\u4f17\u53f7\uff1aHollis", (Object)"\u535a\u5ba2\uff1awww.hollischuang.com");
    List<Object> HollisList = strList.stream().filter((Predicate<String>)LambdaMetafactory.metafactory(null, null, null, (Ljava/lang/Object;)Z, lambda$main$0(java.lang.String ), (Ljava/lang/String;)Z)()).collect(Collectors.toList());
    HollisList.forEach((Consumer<Object>)LambdaMetafactory.metafactory(null, null, null, (Ljava/lang/Object;)V, lambda$main$1(java.lang.Object ), (Ljava/lang/Object;)V)());
}

private static /* synthetic */ void lambda$main$1(Object s) {
    System.out.println(s);
}

private static /* synthetic */ boolean lambda$main$0(String string) {
    return string.contains("Hollis");
}
```

ä¸¤ä¸ª lambda è¡¨è¾¾å¼åˆ†åˆ«è°ƒç”¨äº†`lambda$main$1`å’Œ`lambda$main$0`ä¸¤ä¸ªæ–¹æ³•ã€‚

**æ‰€ä»¥ï¼Œlambda è¡¨è¾¾å¼çš„å®ç°å…¶å®æ˜¯ä¾èµ–äº†ä¸€äº›åº•å±‚çš„ apiï¼Œåœ¨ç¼–è¯‘é˜¶æ®µï¼Œç¼–è¯‘å™¨ä¼šæŠŠ lambda è¡¨è¾¾å¼è¿›è¡Œè§£ç³–ï¼Œè½¬æ¢æˆè°ƒç”¨å†…éƒ¨ api çš„æ–¹å¼ã€‚**

## å¯èƒ½é‡åˆ°çš„å‘

### æ³›å‹

**ä¸€ã€å½“æ³›å‹é‡åˆ°é‡è½½**

```java
public class GenericTypes {

    public static void method(List<String> list) {
        System.out.println("invoke method(List<String> list)");
    }

    public static void method(List<Integer> list) {
        System.out.println("invoke method(List<Integer> list)");
    }
}
```

ä¸Šé¢è¿™æ®µä»£ç ï¼Œæœ‰ä¸¤ä¸ªé‡è½½çš„å‡½æ•°ï¼Œå› ä¸ºä»–ä»¬çš„å‚æ•°ç±»å‹ä¸åŒï¼Œä¸€ä¸ªæ˜¯`List<String>`å¦ä¸€ä¸ªæ˜¯`List<Integer>` ï¼Œä½†æ˜¯ï¼Œè¿™æ®µä»£ç æ˜¯ç¼–è¯‘é€šä¸è¿‡çš„ã€‚å› ä¸ºæˆ‘ä»¬å‰é¢è®²è¿‡ï¼Œå‚æ•°`List<Integer>`å’Œ`List<String>`ç¼–è¯‘ä¹‹åéƒ½è¢«æ“¦é™¤äº†ï¼Œå˜æˆäº†ä¸€æ ·çš„åŸç”Ÿç±»å‹ Listï¼Œæ“¦é™¤åŠ¨ä½œå¯¼è‡´è¿™ä¸¤ä¸ªæ–¹æ³•çš„ç‰¹å¾ç­¾åå˜å¾—ä¸€æ¨¡ä¸€æ ·ã€‚

**äºŒã€å½“æ³›å‹é‡åˆ° catch**

æ³›å‹çš„ç±»å‹å‚æ•°ä¸èƒ½ç”¨åœ¨ Java å¼‚å¸¸å¤„ç†çš„ catch è¯­å¥ä¸­ã€‚å› ä¸ºå¼‚å¸¸å¤„ç†æ˜¯ç”± JVM åœ¨è¿è¡Œæ—¶åˆ»æ¥è¿›è¡Œçš„ã€‚ç”±äºç±»å‹ä¿¡æ¯è¢«æ“¦é™¤ï¼ŒJVM æ˜¯æ— æ³•åŒºåˆ†ä¸¤ä¸ªå¼‚å¸¸ç±»å‹`MyException<String>`å’Œ`MyException<Integer>`çš„

**ä¸‰ã€å½“æ³›å‹å†…åŒ…å«é™æ€å˜é‡**

```java
public class StaticTest{
    public static void main(String[] args){
        GT<Integer> gti = new GT<Integer>();
        gti.var=1;
        GT<String> gts = new GT<String>();
        gts.var=2;
        System.out.println(gti.var);
    }
}
class GT<T>{
    public static int var=0;
    public void nothing(T x){}
}
```

ä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š2ï¼

ç”±äºç»è¿‡ç±»å‹æ“¦é™¤ï¼Œæ‰€æœ‰çš„æ³›å‹ç±»å®ä¾‹éƒ½å…³è”åˆ°åŒä¸€ä»½å­—èŠ‚ç ä¸Šï¼Œæ³›å‹ç±»çš„æ‰€æœ‰é™æ€å˜é‡æ˜¯å…±äº«çš„ã€‚

### è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±

**å¯¹è±¡ç›¸ç­‰æ¯”è¾ƒ**

```java
public static void main(String[] args) {
    Integer a = 1000;
    Integer b = 1000;
    Integer c = 100;
    Integer d = 100;
    System.out.println("a == b is " + (a == b));
    System.out.println(("c == d is " + (c == d)));
}
```

è¾“å‡ºç»“æœï¼š

```
a == b is false
c == d is true
```

åœ¨ Java 5 ä¸­ï¼Œåœ¨ Integer çš„æ“ä½œä¸Šå¼•å…¥äº†ä¸€ä¸ªæ–°åŠŸèƒ½æ¥èŠ‚çœå†…å­˜å’Œæé«˜æ€§èƒ½ã€‚æ•´å‹å¯¹è±¡é€šè¿‡ä½¿ç”¨ç›¸åŒçš„å¯¹è±¡å¼•ç”¨å®ç°äº†ç¼“å­˜å’Œé‡ç”¨ã€‚

> é€‚ç”¨äºæ•´æ•°å€¼åŒºé—´-128 è‡³ +127ã€‚
>
> åªé€‚ç”¨äºè‡ªåŠ¨è£…ç®±ã€‚ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ä¸é€‚ç”¨ã€‚

### å¢å¼º for å¾ªç¯

```java
for (Student stu : students) {
    if (stu.getId() == 2)
        students.remove(stu);
}
```

ä¼šæŠ›å‡º`ConcurrentModificationException`å¼‚å¸¸ã€‚

Iterator æ˜¯å·¥ä½œåœ¨ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ä¸­ï¼Œå¹¶ä¸”æ‹¥æœ‰ä¸€ä¸ª mutex é”ã€‚ Iterator è¢«åˆ›å»ºä¹‹åä¼šå»ºç«‹ä¸€ä¸ªæŒ‡å‘åŸæ¥å¯¹è±¡çš„å•é“¾ç´¢å¼•è¡¨ï¼Œå½“åŸæ¥çš„å¯¹è±¡æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿™ä¸ªç´¢å¼•è¡¨çš„å†…å®¹ä¸ä¼šåŒæ­¥æ”¹å˜ï¼Œæ‰€ä»¥å½“ç´¢å¼•æŒ‡é’ˆå¾€åç§»åŠ¨çš„æ—¶å€™å°±æ‰¾ä¸åˆ°è¦è¿­ä»£çš„å¯¹è±¡ï¼Œæ‰€ä»¥æŒ‰ç…§ fail-fast åŸåˆ™ Iterator ä¼šé©¬ä¸ŠæŠ›å‡º`java.util.ConcurrentModificationException`å¼‚å¸¸ã€‚

æ‰€ä»¥ `Iterator` åœ¨å·¥ä½œçš„æ—¶å€™æ˜¯ä¸å…è®¸è¢«è¿­ä»£çš„å¯¹è±¡è¢«æ”¹å˜çš„ã€‚ä½†ä½ å¯ä»¥ä½¿ç”¨ `Iterator` æœ¬èº«çš„æ–¹æ³•`remove()`æ¥åˆ é™¤å¯¹è±¡ï¼Œ`Iterator.remove()` æ–¹æ³•ä¼šåœ¨åˆ é™¤å½“å‰è¿­ä»£å¯¹è±¡çš„åŒæ—¶ç»´æŠ¤ç´¢å¼•çš„ä¸€è‡´æ€§ã€‚

![](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/basis/syntactic-sugar/image-20220818175912313.png)

## æ€»ç»“

å‰é¢ä»‹ç»äº† 12 ç§ Java ä¸­å¸¸ç”¨çš„è¯­æ³•ç³–ã€‚æ‰€è°“è¯­æ³•ç³–å°±æ˜¯æä¾›ç»™å¼€å‘äººå‘˜ä¾¿äºå¼€å‘çš„ä¸€ç§è¯­æ³•è€Œå·²ã€‚ä½†æ˜¯è¿™ç§è¯­æ³•åªæœ‰å¼€å‘äººå‘˜è®¤è¯†ã€‚è¦æƒ³è¢«æ‰§è¡Œï¼Œéœ€è¦è¿›è¡Œè§£ç³–ï¼Œå³è½¬æˆ JVM è®¤è¯†çš„è¯­æ³•ã€‚å½“æˆ‘ä»¬æŠŠè¯­æ³•ç³–è§£ç³–ä¹‹åï¼Œä½ å°±ä¼šå‘ç°å…¶å®æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„è¿™äº›æ–¹ä¾¿çš„è¯­æ³•ï¼Œå…¶å®éƒ½æ˜¯ä¸€äº›å…¶ä»–æ›´ç®€å•çš„è¯­æ³•æ„æˆçš„ã€‚