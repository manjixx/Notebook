# äºŒã€æ•°ç»„å’Œé“¾è¡¨

## 2.1 æ¦‚è¿°

æ•°ç»„/é“¾è¡¨ä»£è¡¨ç€è®¡ç®—æœºæœ€åŸºæœ¬çš„ä¸¤ç§å­˜å‚¨å½¢å¼ï¼š**é¡ºåºå­˜å‚¨å’Œé“¾å¼å­˜å‚¨**ï¼Œæ‰€ä»¥ä»–ä¿©å¯ä»¥ç®—æ˜¯æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„ã€‚

é“¾è¡¨æ¶‰åŠåˆ°ä¸»è¦çš„ç®—æ³•æŠ€å·§:

- åŒæŒ‡é’ˆ

æ•°ç»„æ¶‰åŠåˆ°çš„ä¸»è¦è®¡ç®—æŠ€å·§

- åŒæŒ‡é’ˆ
  - ä¸­é—´å‘ä¸¤ç«¯æ‰©æ•£çš„åŒæŒ‡é’ˆï¼ˆå¯»æ‰¾å›æ–‡å­ä¸²ï¼‰
  - ä¸¤ç«¯å‘ä¸­é—´æ”¶ç¼©çš„åŒæŒ‡é’ˆï¼ˆäºŒåˆ†æŸ¥æ‰¾ã€åˆ¤æ–­æ˜¯å¦ä¸ºå›æ–‡å­ä¸²ï¼‰
  - å¿«æ…¢æŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰
- å‰ç¼€å’Œ
- å·®åˆ†æ•°ç»„

## 2.1 æ•°ç»„å‰ç¼€æ•°ç»„

å‰ç¼€å’ŒæŠ€å·§é€‚â½¤äºå¿«é€Ÿã€é¢‘ç¹åœ°**è®¡ç®—â¼€ä¸ªç´¢å¼•åŒºé—´å†…çš„å…ƒç´ ä¹‹å’Œ**ã€‚

### 2.1.1 ä¸€ç»´æ•°ç»„çš„å‰ç¼€å’Œ

> **ä¾‹é¢˜æè¿°**

[â¼’æ‰£ç¬¬ 303 é¢˜ åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-immutable/description/)

sumRange å‡½æ•°éœ€è¦è®¡ç®—å¹¶è¿”å›â¼€ä¸ªç´¢å¼•åŒºé—´ä¹‹å†…çš„å…ƒç´ å’Œï¼Œå³è®¡ç®—é—­åŒºé—´ [left, right] çš„ç´¯åŠ å’Œ

> **æš´åŠ›æ±‚è§£**

```java
class NumArray {

    private int[] nums;

    public NumArray(int[] nums) {
        this.nums = nums;

    }
    
    public int sumRange(int left, int right) {
        int ans = 0;

        for(int i = 0;i <= right;i++){
            if(i >= left){
                ans += nums[i];
            }
        }
        return ans;
    }
}
```

ç¼ºç‚¹: æ—¶é—´å¤æ‚åº¦ä¸º ${O(N)}$ï¼Œå…¶ä¸­Nä¸ºnumsæ•°ç»„çš„é•¿åº¦

> **å‰ç¼€å’Œæ•°ç»„**

æ ¸â¼¼æ€è·¯æ˜¯æˆ‘ä»¬ new â¼€ä¸ªæ–°çš„æ•°ç»„ preSum å‡ºæ¥ï¼ŒpreSum[i] è®°å½• nums[0..i-1] çš„ç´¯åŠ å’Œ.

çœ‹è¿™ä¸ª preSum æ•°ç»„ï¼Œå¦‚æœæˆ‘æƒ³æ±‚ç´¢å¼•åŒºé—´ [1, 4] å†…çš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼Œå°±å¯ä»¥é€šè¿‡ ${preSum[5] - preSum[1]}$ å¾—å‡ºã€‚

è¿™æ ·ï¼ŒsumRange å‡½æ•°ä»…ä»…éœ€è¦åšâ¼€æ¬¡å‡æ³•è¿ç®—ï¼Œé¿å…äº†æ¯æ¬¡è¿›â¾ for å¾ªç¯è°ƒâ½¤ï¼Œ**æœ€åæ—¶é—´å¤æ‚åº¦**ä¸ºå¸¸æ•° ${O(1)}$ã€‚

```java
class NumArray {

    private int[] nums;
    private int[] preSum;

    public NumArray(int[] nums) {
        this.nums = nums;
        preSum = new int[nums.length + 1];
        for(int i = 1;i < preSum.length;i++){
            preSum[i] = preSum[i - 1] + nums[i - 1];
        }
    }
    
    public int sumRange(int left, int right) {
        int ans = preSum[right + 1] - preSum[left];
        return ans;
    }
}
```

### 2.1.2 äºŒç»´çŸ©é˜µçš„å‰ç¼€å’Œ

> **ä¾‹é¢˜æè¿°**

[LeetCode-304:â¼†ç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-2d-immutable/)

è®¡ç®—å…¶å­çŸ©å½¢èŒƒå›´å†…å…ƒç´ çš„æ€»å’Œï¼Œè¯¥å­çŸ©é˜µçš„ å·¦ä¸Šè§’ ä¸º (row1, col1) ï¼Œå³ä¸‹è§’ ä¸º (row2, col2) ã€‚

> **äºŒç»´æ•°ç»„å‰ç¼€å’Œ**

- äºŒç»´æ•°ç»„å‰ç¼€å’Œè®¡ç®—

![](https://img-blog.csdnimg.cn/img_convert/3004d0cf07f611ac2f72248056338dfc.png)

```java
s[i][j] = s[i - 1][j] + s[i][j - 1] - s[i - 1][j - 1] + a[i][j]
```

å¦‚æœå®šä¹‰sä¸º m + 1 * n + 1 ç»´æ•°ç»„åˆ™ï¼š

```java
s[i][j] = s[i - 1][j] + s[i][j - 1] - s[i - 1][j - 1] + a[i - 1][j - 1]
```

- åˆ©ç”¨äºŒç»´æ•°ç»„å‰ç¼€å’Œè®¡ç®—åŒºåŸŸå’Œ

![](https://img-blog.csdnimg.cn/img_convert/96a7903dc9223d5ee71aab49f3be5de6.png)

```java
s[x2, y2] - s[x1, y2] - s[x2, y1] + s[x1, y1]
```

sumRegion å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿâ½¤å‰ç¼€å’ŒæŠ€å·§ä¼˜åŒ–åˆ°äº† O(1)ï¼Œè¿™æ˜¯å…¸å‹çš„ã€Œç©ºé—´æ¢æ—¶é—´ã€æ€è·¯ã€‚

```java
class NumMatrix {

    private int[][] matrix;
    private int[][] preSum;

    public NumMatrix(int[][] matrix) {
        this.matrix = matrix;
        int m = matrix.length;
        int n = matrix[0].length;
        preSum = new int[m + 1][n + 1];

        for(int i = 1;i < m + 1;i++){
            for(int j = 1;j < n + 1;j++){
                preSum[i][j] = preSum[i - 1][j] + preSum[i][j - 1] - preSum[i - 1][j - 1] + matrix[i - 1][j - 1] ;
            }
        }

    }
    
    public int sumRegion(int row1, int col1, int row2, int col2) {
        int ans = 0;
        // å¦‚æœå®šä¹‰ m + 1 * n + 1ç»´ å‰ç¼€å’Œæ•°ç»„ é‚£ä¹ˆæ¶‰åŠåˆ° row2 ä¸ col2çš„å‡éœ€ + 1 row1 ä¸col1 å‡ä¸åŠ 
        ans = preSum[row2 + 1][col2 + 1] - preSum[row1][col2 + 1] - preSum[row2 + 1][col1] + preSum[row1][col1];
        return ans;
    }
```

***

## 2.2 æ•°ç»„å·®åˆ†æ•°ç»„

å·®åˆ†æ•°ç»„çš„ä¸»è¦é€‚â½¤åœºæ™¯æ˜¯**é¢‘ç¹å¯¹åŸå§‹æ•°ç»„çš„æŸä¸ªåŒºé—´çš„å…ƒç´ è¿›â¾å¢å‡**ã€‚

> **é¢˜ç›®**

ç»™ä½ è¾“â¼Šâ¼€ä¸ªæ•°ç»„ numsï¼Œç„¶åâ¼œè¦æ±‚ç»™åŒºé—´ ${nums[2..6]}$ å…¨éƒ¨åŠ  1ï¼Œå†ç»™ ${nums[3..9]}$ å…¨éƒ¨å‡3ï¼Œå†ç»™ ${nums[0..4]}$ å…¨éƒ¨åŠ  2ï¼Œå†ç»™...

> **ä¼ ç»Ÿæ–¹æ³•**

åˆ©ç”¨`forå¾ªç¯`é€ç»™èŒƒå›´å†…æ•°å­—`åŠ \å‡val`,è¿™ç§æ€è·¯çš„æ—¶é—´å¤æ‚åº¦æ˜¯${O(N)}$ï¼Œç”±äºè¿™ä¸ªåœºæ™¯ä¸‹å¯¹ nums çš„ä¿®æ”¹â¾®å¸¸é¢‘ç¹ï¼Œæ‰€ä»¥æ•ˆç‡ä¼šå¾ˆä½ä¸‹ã€‚

> **å·®åˆ†æ•°ç»„**


åˆ©ç”¨å·®åˆ†æ•°ç»„æŠ€å·§ï¼Œdiff[i] å°±æ˜¯ nums[i] å’Œ nums[i-1] ä¹‹å·®ã€‚ **é€šè¿‡å·®åˆ†æ•°ç»„æ˜¯å¯ä»¥åæ¨å‡ºåŸå§‹æ•°ç»„nums**

```java
/*æ„å»ºå·®åˆ†æ•°ç»„ */

int[] diff = new int[nums.length];

diff[0] = nums[0];

for(int i = 1;i < nums.length;i++){
    diff[i] = nums[i] - nums[i - 1];
}

/* åˆ©ç”¨å·®åˆ†æ•°ç»„diff è¿˜åŸåŸå§‹æ•°ç»„ */

int[] res = new int[diff.length];
res[0] = diff[0];

for(int i = 1;i < n;i++){
    res[i] = diff[i] + res[i - 1];
}
```

æ„é€ å·®åˆ†æ•°ç»„ `diff`ï¼Œå°±å¯ä»¥å¿«é€Ÿè¿›â¾åŒºé—´å¢å‡çš„æ“ä½œï¼Œå¦‚æœä½ æƒ³å¯¹åŒºé—´ `nums[i..j]`çš„å…ƒç´ å…¨éƒ¨åŠ 3ï¼Œé‚£ä¹ˆåªéœ€è¦è®© `diff[i] += 3`ï¼Œç„¶åå†è®© `diff[j+1] -= 3` å³å¯

åŸç†å¾ˆç®€å•ï¼Œåœ¨ `diff` æ•°ç»„åæ¨ `nums` æ•°ç»„çš„è¿‡ç¨‹ï¼Œ`diff[i] += 3` æ„å‘³ç€ç»™ `nums[i..]` æ‰€æœ‰çš„å…ƒç´ éƒ½åŠ äº† 3ï¼Œç„¶å `diff[j+1] -= 3` â¼œæ„å‘³ç€å¯¹äº `nums[j+1..]` æ‰€æœ‰å…ƒç´ å†å‡ 3ï¼Œé‚£ç»¼åˆèµ·æ¥ï¼Œå°±æ˜¯å¯¹nums[i..j] ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½åŠ  3 äº†

ä¸Šè¿°æ“ä½œåªè¦èŠ±è´¹ ${O(1)}$ çš„æ—¶é—´ä¿®æ”¹ `diff` æ•°ç»„ï¼Œå°±ç›¸å½“äºç»™ `nums` çš„æ•´ä¸ªåŒºé—´åšäº†ä¿®æ”¹ã€‚å³é€šè¿‡ä¿®æ”¹ `diff`ï¼Œç„¶åé€šè¿‡`diff` æ•°ç»„åæ¨ï¼Œå³å¯å¾—åˆ° `nums` ä¿®æ”¹åçš„ç»“æœã€‚

**å°†å·®åˆ†æ•°ç»„æŠ½è±¡ä¸ºä¸€ä¸ªå·¥å…·ç±»:**

```java
class Difference{
    // å·®åˆ†æ•°ç»„
    private int[] diff;

    /* è¾“â¼Šâ¼€ä¸ªåˆå§‹æ•°ç»„ï¼ŒåŒºé—´æ“ä½œå°†åœ¨è¿™ä¸ªæ•°ç»„ä¸Šè¿›â¾ */
    public Difference(int[] nums) {
       assert nums.length > 0;
        diff = new int[nums.length];
        // æ ¹æ®åˆå§‹æ•°ç»„æ„é€ å·®åˆ†æ•°ç»„
        diff[0] = nums[0];
        for (int i = 1; i < nums.length; i++) {
            diff[i] = nums[i] - nums[i - 1];
        } 
    }

    /* ç»™é—­åŒºé—´ [i ,j]å¢åŠ  valï¼Œvalå¯ä»¥æ˜¯è´Ÿæ•° */
    public void increment(int i, int j, int val) { 
        diff[i] += val;
        if(j + 1 < diff.length - 1){
            diff[j + 1] -= val;
        }
    }

    /* è¿”å›ç»“æœæ•°ç»„ */
    public int[] result() {
        int[] res = new int[diff.length];
        // æ ¹æ®å·®åˆ†æ•°ç»„æ„é€ ç»“æœæ•°ç»„
        res[0] = diff[0];

        for(int i = 1;i < diff.length;i++){
            res[i] = res[i - 1] + diff[i];
        }

        return res;
    }

}
```

## 2.3 æ•°ç»„-åŒæŒ‡é’ˆ

## 2.4 æ•°ç»„-æ»‘åŠ¨çª—å£ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰

## 2.5 æ•°ç»„-äºŒåˆ†æŸ¥æ‰¾ï¼ˆä¸¤ç«¯å‘ä¸­é—´æ”¶ç¼©çš„åŒæŒ‡é’ˆï¼‰

## 2.6 é“¾è¡¨-åŒæŒ‡é’ˆ

## 2.7 é“¾è¡¨-é€’å½’æ€æƒ³

***

## 2.8 è¯¾åä¹ é¢˜

### 2.8.1 å‰ç¼€å’Œä¹ é¢˜

- [x] [1314.çŸ©é˜µåŒºåŸŸå’Œ](https://leetcode.cn/problems/matrix-block-sum/?show=1)
- [x] [1352.æœ€å K ä¸ªæ•°çš„ä¹˜ç§¯](https://leetcode.cn/problems/product-of-the-last-k-numbers/?show=1)
- [x] [238.é™¤â¾ƒèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯](https://leetcode.cn/problems/product-of-array-except-self/?show=1)
- [ ] [327. åŒºé—´å’Œçš„ä¸ªæ•°](https://leetcode.cn/problems/count-of-range-sum/?show=1)
- [ ] [437. è·¯å¾„æ€»å’Œ](https://leetcode.cn/problems/path-sum-iii/?show=1)
- [ ] [523.è¿ç»­çš„â¼¦æ•°ç»„å’Œ](https://leetcode.cn/problems/continuous-subarray-sum/?show=1)
- [ ] [525. è¿ç»­æ•°ç»„](https://leetcode.cn/problems/contiguous-array/?show=1)
- [ ] [560. å’Œä¸º K çš„â¼¦æ•°ç»„](https://leetcode.cn/problems/subarray-sum-equals-k/?show=1)
- [ ] [724. å¯»æ‰¾æ•°ç»„çš„ä¸­â¼¼ä¸‹æ ‡](https://leetcode.cn/problems/find-pivot-index/?show=1)
- [ ] [862. å’Œâ¾„å°‘ä¸º K çš„æœ€çŸ­â¼¦æ•°ç»„](https://leetcode.cn/problems/shortest-subarray-with-sum-at-least-k/?show=1)
- [ ] [918. ç¯å½¢â¼¦æ•°ç»„çš„æœ€â¼¤å’Œ](https://leetcode.cn/problems/maximum-sum-circular-subarray/?show=1)
- [ ] [974. å’Œå¯è¢« K æ•´é™¤çš„â¼¦æ•°ç»„](https://leetcode.cn/problems/shortest-subarray-with-sum-at-least-k/?show=1)
- [ ] [å‰‘æŒ‡ Offer II 010. å’Œä¸º k çš„â¼¦æ•°ç»„](https://leetcode.cn/problems/QTMn0o/?show=1))
- [ ] [å‰‘æŒ‡ Offer II 011. 0 å’Œ 1 ä¸ªæ•°ç›¸åŒçš„â¼¦æ•°ç»„](https://leetcode.cn/problems/A1NYOS/?show=1)
- [ ] [å‰‘æŒ‡ Offer II 012. å·¦å³ä¸¤è¾¹â¼¦æ•°ç»„çš„å’Œç›¸ç­‰](https://leetcode.cn/problems/tvdfij/?show=1)
- [x] [å‰‘æŒ‡ Offer II 013. â¼†ç»´â¼¦çŸ©é˜µçš„å’Œ](https://leetcode.cn/problems/O4NDxx/?show=1)
- [ ] [å‰‘æŒ‡ Offer II 050. å‘ä¸‹çš„è·¯å¾„èŠ‚ç‚¹ä¹‹å’Œ](https://leetcode.cn/problems/6eUYwP/?show=1)
- [ ] [å‰‘æŒ‡ Offer 57 - II. å’Œä¸ºsçš„è¿ç»­æ­£æ•°åºåˆ—](https://leetcode.cn/problems/he-wei-sde-lian-xu-zheng-shu-xu-lie-lcof/?show=1)
- [x] [å‰‘æŒ‡ Offer 66. æ„å»ºä¹˜ç§¯æ•°ç»„](https://leetcode.cn/problems/gou-jian-cheng-ji-shu-zu-lcof/)

### 2.8.2 å·®åˆ†æ•°ç»„ä¹ é¢˜

- [ ] [370 åŒºé—´åŠ æ³• ğŸŸ  ğŸ”’](https://leetcode.cn/problems/range-addition/)
- [x] [1094. æ‹¼è½¦ ğŸŸ ](https://leetcode.cn/problems/car-pooling/)
- [ ] [1109. èˆªç­é¢„è®¢ç»Ÿè®¡ ğŸŸ ](https://leetcode.cn/problems/corporate-flight-bookings/)
- [x] [1450. åœ¨æ—¢å®šæ—¶é—´åšä½œä¸šçš„å­¦ç”Ÿäººæ•° ğŸŸ¢](https://leetcode.cn/problems/number-of-students-doing-homework-at-a-given-time/description/)
- [ ] [846. ä¸€æ‰‹é¡ºå­ ğŸŸ ](https://leetcode.cn/problems/hand-of-straights/description/)
