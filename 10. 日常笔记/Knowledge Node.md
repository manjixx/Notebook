> # 正向代理与反向代理

## 1. 基本概念


## 2. 正向代理

![正向代理](https://images2015.cnblogs.com/blog/305504/201611/305504-20161112124853014-1532060796.png)

- 正向代理:是一个位于客户端和原始服务器(origin server)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。客户端必须要进行一些特别的设置才能使用正向代理。

- 正向代理的用途：
  - 1. 访问原来无法访问的资源，如google
  - 2. 可以做缓存，加速访问资源
  - 3. 户端访问授权，上网进行认证
  - 4. 可以记录用户访问记录（上网行为管理），对外隐藏用户信息

## 3. 反向代理

- 初次接触方向代理的感觉是，客户端是无感知代理的存在的，反向代理对外都是透明的，访问者者并不知道自己访问的是一个代理。因为客户端不需要任何配置就可以访问。

- 反向代理（Reverse Proxy）实际运行方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。

- 反向代理的作用
  - 1. 保证内网的安全，可以使用反向代理提供WAF功能，阻止web攻击
    ![反向代理保证内网安全](https://images2015.cnblogs.com/blog/305504/201611/305504-20161112124341280-1435223816.png)
    
  - 2. 负载均衡，通过反向代理服务器来优化网站的负载
    ![负载均衡](https://images2015.cnblogs.com/blog/305504/201611/305504-20161112124423530-566240666.png)
 
## 4. 二者区别

 实际上proxy在两种代理中做的事都是代为收发请求和响应，不过从结构上来看正好左右互换了下，所以把后出现的那种代理方式叫成了反向代理。

- 正向代理中，proxy和client同属一个LAN，对server透明；

- 反向代理中，proxy和server同属一个LAN，对client透明。

![正向代理与反向代理的区别](https://pic2.zhimg.com/80/480c1c45d2565e2f92fd930d25b73a18_720w.jpg?source=1940ef5c)

## 5. Nginx的反向代理

- Nginx概念

Nginx("engine x")是一款是由俄罗斯的程序设计师Igor Sysoev所开发高性能的 Web和 反向代理 服务器，也是一个 IMAP/POP3/SMTP 代理服务器。

在高连接并发的情况下，Nginx是Apache服务器不错的替代品。

nginx支持配置反向代理，通过反向代理实现网站的负载均衡。这部分先写一个nginx的配置，后续需要深入研究nginx的代理模块和负载均衡模块。

nginx通过proxy_pass_http 配置代理站点，upstream实现负载均衡。
> # CDN 内容分发网络(Content Delivery Network)
